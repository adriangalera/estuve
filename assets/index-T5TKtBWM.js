function Ea(h,i){for(var n=0;n<i.length;n++){const r=i[n];if(typeof r!="string"&&!Array.isArray(r)){for(const u in r)if(u!=="default"&&!(u in h)){const s=Object.getOwnPropertyDescriptor(r,u);s&&Object.defineProperty(h,u,s.get?s:{enumerable:!0,get:()=>r[u]})}}}return Object.freeze(Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))r(u);new MutationObserver(u=>{for(const s of u)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(u){const s={};return u.integrity&&(s.integrity=u.integrity),u.referrerPolicy&&(s.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?s.credentials="include":u.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(u){if(u.ep)return;u.ep=!0;const s=n(u);fetch(u.href,s)}})();var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ka(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var Ie={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var Aa=Ie.exports,Do;function Ps(){return Do||(Do=1,function(h,i){(function(n,r){r(i)})(Aa,function(n){var r="1.9.4";function u(t){var e,o,l,f;for(o=1,l=arguments.length;o<l;o++){f=arguments[o];for(e in f)t[e]=f[e]}return t}var s=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function a(t,e){var o=Array.prototype.slice;if(t.bind)return t.bind.apply(t,o.call(arguments,1));var l=o.call(arguments,2);return function(){return t.apply(e,l.length?l.concat(o.call(arguments)):arguments)}}var c=0;function d(t){return"_leaflet_id"in t||(t._leaflet_id=++c),t._leaflet_id}function p(t,e,o){var l,f,m,y;return y=function(){l=!1,f&&(m.apply(o,f),f=!1)},m=function(){l?f=arguments:(t.apply(o,arguments),setTimeout(y,e),l=!0)},m}function g(t,e,o){var l=e[1],f=e[0],m=l-f;return t===l&&o?t:((t-f)%m+m)%m+f}function _(){return!1}function v(t,e){if(e===!1)return t;var o=Math.pow(10,e===void 0?6:e);return Math.round(t*o)/o}function w(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function x(t){return w(t).split(/\s+/)}function P(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?s(t.options):{});for(var o in e)t.options[o]=e[o];return t.options}function O(t,e,o){var l=[];for(var f in t)l.push(encodeURIComponent(o?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!e||e.indexOf("?")===-1?"?":"&")+l.join("&")}var M=/\{ *([\w_ -]+) *\}/g;function E(t,e){return t.replace(M,function(o,l){var f=e[l];if(f===void 0)throw new Error("No value provided for variable "+o);return typeof f=="function"&&(f=f(e)),f})}var I=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function W(t,e){for(var o=0;o<t.length;o++)if(t[o]===e)return o;return-1}var F="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var U=0;function J(t){var e=+new Date,o=Math.max(0,16-(e-U));return U=e+o,window.setTimeout(t,o)}var _t=window.requestAnimationFrame||$("RequestAnimationFrame")||J,It=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function V(t,e,o){if(o&&_t===J)t.call(e);else return _t.call(window,a(t,e))}function Q(t){t&&It.call(window,t)}var Ge={__proto__:null,extend:u,create:s,bind:a,get lastId(){return c},stamp:d,throttle:p,wrapNum:g,falseFn:_,formatNum:v,trim:w,splitWords:x,setOptions:P,getParamString:O,template:E,isArray:I,indexOf:W,emptyImageUrl:F,requestFn:_t,cancelFn:It,requestAnimFrame:V,cancelAnimFrame:Q};function nt(){}nt.extend=function(t){var e=function(){P(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},o=e.__super__=this.prototype,l=s(o);l.constructor=e,e.prototype=l;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(e[f]=this[f]);return t.statics&&u(e,t.statics),t.includes&&(bt(t.includes),u.apply(null,[l].concat(t.includes))),u(l,t),delete l.statics,delete l.includes,l.options&&(l.options=o.options?s(o.options):{},u(l.options,t.options)),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){o.callInitHooks&&o.callInitHooks.call(this),this._initHooksCalled=!0;for(var m=0,y=l._initHooks.length;m<y;m++)l._initHooks[m].call(this)}},e},nt.include=function(t){var e=this.prototype.options;return u(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},nt.mergeOptions=function(t){return u(this.prototype.options,t),this},nt.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),o=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(o),this};function bt(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=I(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var at={on:function(t,e,o){if(typeof t=="object")for(var l in t)this._on(l,t[l],e);else{t=x(t);for(var f=0,m=t.length;f<m;f++)this._on(t[f],e,o)}return this},off:function(t,e,o){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],e);else{t=x(t);for(var f=arguments.length===1,m=0,y=t.length;m<y;m++)f?this._off(t[m]):this._off(t[m],e,o)}return this},_on:function(t,e,o,l){if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}if(this._listens(t,e,o)===!1){o===this&&(o=void 0);var f={fn:e,ctx:o};l&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,e,o){var l,f,m;if(this._events&&(l=this._events[t],!!l)){if(arguments.length===1){if(this._firingCount)for(f=0,m=l.length;f<m;f++)l[f].fn=_;delete this._events[t];return}if(typeof e!="function"){console.warn("wrong listener type: "+typeof e);return}var y=this._listens(t,e,o);if(y!==!1){var b=l[y];this._firingCount&&(b.fn=_,this._events[t]=l=l.slice()),l.splice(y,1)}}},fire:function(t,e,o){if(!this.listens(t,o))return this;var l=u({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var m=0,y=f.length;m<y;m++){var b=f[m],C=b.fn;b.once&&this.off(t,C,b.ctx),C.call(b.ctx||this,l)}this._firingCount--}}return o&&this._propagateEvent(l),this},listens:function(t,e,o,l){typeof t!="string"&&console.warn('"string" type argument expected');var f=e;typeof e!="function"&&(l=!!e,f=void 0,o=void 0);var m=this._events&&this._events[t];if(m&&m.length&&this._listens(t,f,o)!==!1)return!0;if(l){for(var y in this._eventParents)if(this._eventParents[y].listens(t,e,o,l))return!0}return!1},_listens:function(t,e,o){if(!this._events)return!1;var l=this._events[t]||[];if(!e)return!!l.length;o===this&&(o=void 0);for(var f=0,m=l.length;f<m;f++)if(l[f].fn===e&&l[f].ctx===o)return f;return!1},once:function(t,e,o){if(typeof t=="object")for(var l in t)this._on(l,t[l],e,!0);else{t=x(t);for(var f=0,m=t.length;f<m;f++)this._on(t[f],e,o,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[d(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[d(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,u({layer:t.target,propagatedFrom:t.target},t),!0)}};at.addEventListener=at.on,at.removeEventListener=at.clearAllEventListeners=at.off,at.addOneTimeEventListener=at.once,at.fireEvent=at.fire,at.hasEventListeners=at.listens;var Pt=nt.extend(at);function R(t,e,o){this.x=o?Math.round(t):t,this.y=o?Math.round(e):e}var dt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};R.prototype={clone:function(){return new R(this.x,this.y)},add:function(t){return this.clone()._add(A(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(A(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new R(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new R(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(t){t=A(t);var e=t.x-this.x,o=t.y-this.y;return Math.sqrt(e*e+o*o)},equals:function(t){return t=A(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=A(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function A(t,e,o){return t instanceof R?t:I(t)?new R(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new R(t.x,t.y):new R(t,e,o)}function q(t,e){if(t)for(var o=e?[t,e]:t,l=0,f=o.length;l<f;l++)this.extend(o[l])}q.prototype={extend:function(t){var e,o;if(!t)return this;if(t instanceof R||typeof t[0]=="number"||"x"in t)e=o=A(t);else if(t=lt(t),e=t.min,o=t.max,!e||!o)return this;return!this.min&&!this.max?(this.min=e.clone(),this.max=o.clone()):(this.min.x=Math.min(e.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(e.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)),this},getCenter:function(t){return A((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return A(this.min.x,this.max.y)},getTopRight:function(){return A(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,o;return typeof t[0]=="number"||t instanceof R?t=A(t):t=lt(t),t instanceof q?(e=t.min,o=t.max):e=o=t,e.x>=this.min.x&&o.x<=this.max.x&&e.y>=this.min.y&&o.y<=this.max.y},intersects:function(t){t=lt(t);var e=this.min,o=this.max,l=t.min,f=t.max,m=f.x>=e.x&&l.x<=o.x,y=f.y>=e.y&&l.y<=o.y;return m&&y},overlaps:function(t){t=lt(t);var e=this.min,o=this.max,l=t.min,f=t.max,m=f.x>e.x&&l.x<o.x,y=f.y>e.y&&l.y<o.y;return m&&y},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var e=this.min,o=this.max,l=Math.abs(e.x-o.x)*t,f=Math.abs(e.y-o.y)*t;return lt(A(e.x-l,e.y-f),A(o.x+l,o.y+f))},equals:function(t){return t?(t=lt(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function lt(t,e){return!t||t instanceof q?t:new q(t,e)}function ut(t,e){if(t)for(var o=e?[t,e]:t,l=0,f=o.length;l<f;l++)this.extend(o[l])}ut.prototype={extend:function(t){var e=this._southWest,o=this._northEast,l,f;if(t instanceof K)l=t,f=t;else if(t instanceof ut){if(l=t._southWest,f=t._northEast,!l||!f)return this}else return t?this.extend(j(t)||ot(t)):this;return!e&&!o?(this._southWest=new K(l.lat,l.lng),this._northEast=new K(f.lat,f.lng)):(e.lat=Math.min(l.lat,e.lat),e.lng=Math.min(l.lng,e.lng),o.lat=Math.max(f.lat,o.lat),o.lng=Math.max(f.lng,o.lng)),this},pad:function(t){var e=this._southWest,o=this._northEast,l=Math.abs(e.lat-o.lat)*t,f=Math.abs(e.lng-o.lng)*t;return new ut(new K(e.lat-l,e.lng-f),new K(o.lat+l,o.lng+f))},getCenter:function(){return new K((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new K(this.getNorth(),this.getWest())},getSouthEast:function(){return new K(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof K||"lat"in t?t=j(t):t=ot(t);var e=this._southWest,o=this._northEast,l,f;return t instanceof ut?(l=t.getSouthWest(),f=t.getNorthEast()):l=f=t,l.lat>=e.lat&&f.lat<=o.lat&&l.lng>=e.lng&&f.lng<=o.lng},intersects:function(t){t=ot(t);var e=this._southWest,o=this._northEast,l=t.getSouthWest(),f=t.getNorthEast(),m=f.lat>=e.lat&&l.lat<=o.lat,y=f.lng>=e.lng&&l.lng<=o.lng;return m&&y},overlaps:function(t){t=ot(t);var e=this._southWest,o=this._northEast,l=t.getSouthWest(),f=t.getNorthEast(),m=f.lat>e.lat&&l.lat<o.lat,y=f.lng>e.lng&&l.lng<o.lng;return m&&y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=ot(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ot(t,e){return t instanceof ut?t:new ut(t,e)}function K(t,e,o){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,o!==void 0&&(this.alt=+o)}K.prototype={equals:function(t,e){if(!t)return!1;t=j(t);var o=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return o<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+v(this.lat,t)+", "+v(this.lng,t)+")"},distanceTo:function(t){return Ut.distance(this,j(t))},wrap:function(){return Ut.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,o=e/Math.cos(Math.PI/180*this.lat);return ot([this.lat-e,this.lng-o],[this.lat+e,this.lng+o])},clone:function(){return new K(this.lat,this.lng,this.alt)}};function j(t,e,o){return t instanceof K?t:I(t)&&typeof t[0]!="object"?t.length===3?new K(t[0],t[1],t[2]):t.length===2?new K(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new K(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new K(t,e,o)}var Bt={latLngToPoint:function(t,e){var o=this.projection.project(t),l=this.scale(e);return this.transformation._transform(o,l)},pointToLatLng:function(t,e){var o=this.scale(e),l=this.transformation.untransform(t,o);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,o=this.scale(t),l=this.transformation.transform(e.min,o),f=this.transformation.transform(e.max,o);return new q(l,f)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?g(t.lng,this.wrapLng,!0):t.lng,o=this.wrapLat?g(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new K(o,e,l)},wrapLatLngBounds:function(t){var e=t.getCenter(),o=this.wrapLatLng(e),l=e.lat-o.lat,f=e.lng-o.lng;if(l===0&&f===0)return t;var m=t.getSouthWest(),y=t.getNorthEast(),b=new K(m.lat-l,m.lng-f),C=new K(y.lat-l,y.lng-f);return new ut(b,C)}},Ut=u({},Bt,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var o=Math.PI/180,l=t.lat*o,f=e.lat*o,m=Math.sin((e.lat-t.lat)*o/2),y=Math.sin((e.lng-t.lng)*o/2),b=m*m+Math.cos(l)*Math.cos(f)*y*y,C=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));return this.R*C}}),Mn=6378137,Pi={R:Mn,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,o=this.MAX_LATITUDE,l=Math.max(Math.min(o,t.lat),-o),f=Math.sin(l*e);return new R(this.R*t.lng*e,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var e=180/Math.PI;return new K((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Mn*Math.PI;return new q([-t,-t],[t,t])}()};function Si(t,e,o,l){if(I(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=o,this._d=l}Si.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new R((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function ge(t,e,o,l){return new Si(t,e,o,l)}var Oi=u({},Ut,{code:"EPSG:3857",projection:Pi,transformation:function(){var t=.5/(Math.PI*Pi.R);return ge(t,.5,-t,.5)}()}),rr=u({},Oi,{code:"EPSG:900913"});function Tn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function En(t,e){var o="",l,f,m,y,b,C;for(l=0,m=t.length;l<m;l++){for(b=t[l],f=0,y=b.length;f<y;f++)C=b[f],o+=(f?"L":"M")+C.x+" "+C.y;o+=e?k.svg?"z":"x":""}return o||"M0 0"}var Mi=document.documentElement.style,He="ActiveXObject"in window,ar=He&&!document.addEventListener,kn="msLaunchUri"in navigator&&!("documentMode"in document),Ti=St("webkit"),An=St("android"),In=St("android 2")||St("android 3"),hr=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),lr=An&&St("Google")&&hr<537&&!("AudioNode"in window),Ei=!!window.opera,Bn=!kn&&St("chrome"),Rn=St("gecko")&&!Ti&&!Ei&&!He,ur=!Bn&&St("safari"),zn=St("phantom"),Nn="OTransition"in Mi,cr=navigator.platform.indexOf("Win")===0,Zn=He&&"transition"in Mi,ki="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!In,Dn="MozPerspective"in Mi,fr=!window.L_DISABLE_3D&&(Zn||ki||Dn)&&!Nn&&!zn,ve=typeof orientation<"u"||St("mobile"),dr=ve&&Ti,pr=ve&&ki,Fn=!window.PointerEvent&&window.MSPointerEvent,Un=!!(window.PointerEvent||Fn),jn="ontouchstart"in window||!!window.TouchEvent,mr=!window.L_NO_TOUCH&&(jn||Un),_r=ve&&Ei,gr=ve&&Rn,vr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,yr=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",_,e),window.removeEventListener("testPassiveEventSupport",_,e)}catch{}return t}(),Lr=function(){return!!document.createElement("canvas").getContext}(),Ai=!!(document.createElementNS&&Tn("svg").createSVGRect),wr=!!Ai&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),br=!Ai&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch{return!1}}(),xr=navigator.platform.indexOf("Mac")===0,Cr=navigator.platform.indexOf("Linux")===0;function St(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var k={ie:He,ielt9:ar,edge:kn,webkit:Ti,android:An,android23:In,androidStock:lr,opera:Ei,chrome:Bn,gecko:Rn,safari:ur,phantom:zn,opera12:Nn,win:cr,ie3d:Zn,webkit3d:ki,gecko3d:Dn,any3d:fr,mobile:ve,mobileWebkit:dr,mobileWebkit3d:pr,msPointer:Fn,pointer:Un,touch:mr,touchNative:jn,mobileOpera:_r,mobileGecko:gr,retina:vr,passiveEvents:yr,canvas:Lr,svg:Ai,vml:br,inlineSvg:wr,mac:xr,linux:Cr},Gn=k.msPointer?"MSPointerDown":"pointerdown",Hn=k.msPointer?"MSPointerMove":"pointermove",Wn=k.msPointer?"MSPointerUp":"pointerup",$n=k.msPointer?"MSPointerCancel":"pointercancel",Ii={touchstart:Gn,touchmove:Hn,touchend:Wn,touchcancel:$n},qn={touchstart:Er,touchmove:We,touchend:We,touchcancel:We},Qt={},Vn=!1;function Pr(t,e,o){return e==="touchstart"&&Tr(),qn[e]?(o=qn[e].bind(this,o),t.addEventListener(Ii[e],o,!1),o):(console.warn("wrong event specified:",e),_)}function Sr(t,e,o){if(!Ii[e]){console.warn("wrong event specified:",e);return}t.removeEventListener(Ii[e],o,!1)}function Or(t){Qt[t.pointerId]=t}function Mr(t){Qt[t.pointerId]&&(Qt[t.pointerId]=t)}function Kn(t){delete Qt[t.pointerId]}function Tr(){Vn||(document.addEventListener(Gn,Or,!0),document.addEventListener(Hn,Mr,!0),document.addEventListener(Wn,Kn,!0),document.addEventListener($n,Kn,!0),Vn=!0)}function We(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){e.touches=[];for(var o in Qt)e.touches.push(Qt[o]);e.changedTouches=[e],t(e)}}function Er(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&ct(e),We(t,e)}function kr(t){var e={},o,l;for(l in t)o=t[l],e[l]=o&&o.bind?o.bind(t):o;return t=e,e.type="dblclick",e.detail=2,e.isTrusted=!1,e._simulated=!0,e}var Ar=200;function Ir(t,e){t.addEventListener("dblclick",e);var o=0,l;function f(m){if(m.detail!==1){l=m.detail;return}if(!(m.pointerType==="mouse"||m.sourceCapabilities&&!m.sourceCapabilities.firesTouchEvents)){var y=to(m);if(!(y.some(function(C){return C instanceof HTMLLabelElement&&C.attributes.for})&&!y.some(function(C){return C instanceof HTMLInputElement||C instanceof HTMLSelectElement}))){var b=Date.now();b-o<=Ar?(l++,l===2&&e(kr(m))):l=1,o=b}}}return t.addEventListener("click",f),{dblclick:e,simDblclick:f}}function Br(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var Bi=Ve(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ye=Ve(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jn=ye==="webkitTransition"||ye==="OTransition"?ye+"End":"transitionend";function Xn(t){return typeof t=="string"?document.getElementById(t):t}function Le(t,e){var o=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!o||o==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);o=l?l[e]:null}return o==="auto"?null:o}function H(t,e,o){var l=document.createElement(t);return l.className=e||"",o&&o.appendChild(l),l}function tt(t){var e=t.parentNode;e&&e.removeChild(t)}function $e(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function te(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function ee(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Ri(t,e){if(t.classList!==void 0)return t.classList.contains(e);var o=qe(t);return o.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(o)}function Z(t,e){if(t.classList!==void 0)for(var o=x(e),l=0,f=o.length;l<f;l++)t.classList.add(o[l]);else if(!Ri(t,e)){var m=qe(t);zi(t,(m?m+" ":"")+e)}}function it(t,e){t.classList!==void 0?t.classList.remove(e):zi(t,w((" "+qe(t)+" ").replace(" "+e+" "," ")))}function zi(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function qe(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function vt(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Rr(t,e)}function Rr(t,e){var o=!1,l="DXImageTransform.Microsoft.Alpha";try{o=t.filters.item(l)}catch{if(e===1)return}e=Math.round(e*100),o?(o.Enabled=e!==100,o.Opacity=e):t.style.filter+=" progid:"+l+"(opacity="+e+")"}function Ve(t){for(var e=document.documentElement.style,o=0;o<t.length;o++)if(t[o]in e)return t[o];return!1}function Wt(t,e,o){var l=e||new R(0,0);t.style[Bi]=(k.ie3d?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(o?" scale("+o+")":"")}function st(t,e){t._leaflet_pos=e,k.any3d?Wt(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function $t(t){return t._leaflet_pos||new R(0,0)}var we,be,Ni;if("onselectstart"in document)we=function(){N(window,"selectstart",ct)},be=function(){Y(window,"selectstart",ct)};else{var xe=Ve(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);we=function(){if(xe){var t=document.documentElement.style;Ni=t[xe],t[xe]="none"}},be=function(){xe&&(document.documentElement.style[xe]=Ni,Ni=void 0)}}function Zi(){N(window,"dragstart",ct)}function Di(){Y(window,"dragstart",ct)}var Ke,Fi;function Ui(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(Je(),Ke=t,Fi=t.style.outlineStyle,t.style.outlineStyle="none",N(window,"keydown",Je))}function Je(){Ke&&(Ke.style.outlineStyle=Fi,Ke=void 0,Fi=void 0,Y(window,"keydown",Je))}function Yn(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function ji(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var zr={__proto__:null,TRANSFORM:Bi,TRANSITION:ye,TRANSITION_END:Jn,get:Xn,getStyle:Le,create:H,remove:tt,empty:$e,toFront:te,toBack:ee,hasClass:Ri,addClass:Z,removeClass:it,setClass:zi,getClass:qe,setOpacity:vt,testProp:Ve,setTransform:Wt,setPosition:st,getPosition:$t,get disableTextSelection(){return we},get enableTextSelection(){return be},disableImageDrag:Zi,enableImageDrag:Di,preventOutline:Ui,restoreOutline:Je,getSizedParentNode:Yn,getScale:ji};function N(t,e,o,l){if(e&&typeof e=="object")for(var f in e)Hi(t,f,e[f],o);else{e=x(e);for(var m=0,y=e.length;m<y;m++)Hi(t,e[m],o,l)}return this}var Ot="_leaflet_events";function Y(t,e,o,l){if(arguments.length===1)Qn(t),delete t[Ot];else if(e&&typeof e=="object")for(var f in e)Wi(t,f,e[f],o);else if(e=x(e),arguments.length===2)Qn(t,function(b){return W(e,b)!==-1});else for(var m=0,y=e.length;m<y;m++)Wi(t,e[m],o,l);return this}function Qn(t,e){for(var o in t[Ot]){var l=o.split(/\d/)[0];(!e||e(l))&&Wi(t,l,null,null,o)}}var Gi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Hi(t,e,o,l){var f=e+d(o)+(l?"_"+d(l):"");if(t[Ot]&&t[Ot][f])return this;var m=function(b){return o.call(l||t,b||window.event)},y=m;!k.touchNative&&k.pointer&&e.indexOf("touch")===0?m=Pr(t,e,m):k.touch&&e==="dblclick"?m=Ir(t,m):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(Gi[e]||e,m,k.passiveEvents?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(m=function(b){b=b||window.event,qi(t,b)&&y(b)},t.addEventListener(Gi[e],m,!1)):t.addEventListener(e,y,!1):t.attachEvent("on"+e,m),t[Ot]=t[Ot]||{},t[Ot][f]=m}function Wi(t,e,o,l,f){f=f||e+d(o)+(l?"_"+d(l):"");var m=t[Ot]&&t[Ot][f];if(!m)return this;!k.touchNative&&k.pointer&&e.indexOf("touch")===0?Sr(t,e,m):k.touch&&e==="dblclick"?Br(t,m):"removeEventListener"in t?t.removeEventListener(Gi[e]||e,m,!1):t.detachEvent("on"+e,m),t[Ot][f]=null}function qt(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function $i(t){return Hi(t,"wheel",qt),this}function Ce(t){return N(t,"mousedown touchstart dblclick contextmenu",qt),t._leaflet_disable_click=!0,this}function ct(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Vt(t){return ct(t),qt(t),this}function to(t){if(t.composedPath)return t.composedPath();for(var e=[],o=t.target;o;)e.push(o),o=o.parentNode;return e}function eo(t,e){if(!e)return new R(t.clientX,t.clientY);var o=ji(e),l=o.boundingClientRect;return new R((t.clientX-l.left)/o.x-e.clientLeft,(t.clientY-l.top)/o.y-e.clientTop)}var Nr=k.linux&&k.chrome?window.devicePixelRatio:k.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function io(t){return k.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/Nr:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function qi(t,e){var o=e.relatedTarget;if(!o)return!0;try{for(;o&&o!==t;)o=o.parentNode}catch{return!1}return o!==t}var Zr={__proto__:null,on:N,off:Y,stopPropagation:qt,disableScrollPropagation:$i,disableClickPropagation:Ce,preventDefault:ct,stop:Vt,getPropagationPath:to,getMousePosition:eo,getWheelDelta:io,isExternalTarget:qi,addListener:N,removeListener:Y},no=Pt.extend({run:function(t,e,o,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=o||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=$t(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,o=this._duration*1e3;e<o?this._runFrame(this._easeOut(e/o),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var o=this._startPos.add(this._offset.multiplyBy(t));e&&o._round(),st(this._el,o),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),G=Pt.extend({options:{crs:Oi,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=P(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ye&&k.any3d&&!k.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),N(this._proxy,Jn,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,o){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),o=o||{},this._stop(),this._loaded&&!o.reset&&o!==!0){o.animate!==void 0&&(o.zoom=u({animate:o.animate},o.zoom),o.pan=u({animate:o.animate,duration:o.duration},o.pan));var l=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,o.zoom):this._tryAnimatedPan(t,o.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e,o.pan&&o.pan.noMoveStart),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(k.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,o){var l=this.getZoomScale(e),f=this.getSize().divideBy(2),m=t instanceof R?t:this.latLngToContainerPoint(t),y=m.subtract(f).multiplyBy(1-1/l),b=this.containerPointToLatLng(f.add(y));return this.setView(b,e,{zoom:o})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():ot(t);var o=A(e.paddingTopLeft||e.padding||[0,0]),l=A(e.paddingBottomRight||e.padding||[0,0]),f=this.getBoundsZoom(t,!1,o.add(l));if(f=typeof e.maxZoom=="number"?Math.min(e.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var m=l.subtract(o).divideBy(2),y=this.project(t.getSouthWest(),f),b=this.project(t.getNorthEast(),f),C=this.unproject(y.add(b).divideBy(2).add(m),f);return{center:C,zoom:f}},fitBounds:function(t,e){if(t=ot(t),!t.isValid())throw new Error("Bounds are not valid.");var o=this._getBoundsCenterZoom(t,e);return this.setView(o.center,o.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=A(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new no,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Z(this._mapPane,"leaflet-pan-anim");var o=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,o,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,o){if(o=o||{},o.animate===!1||!k.any3d)return this.setView(t,e,o);this._stop();var l=this.project(this.getCenter()),f=this.project(t),m=this.getSize(),y=this._zoom;t=j(t),e=e===void 0?y:e;var b=Math.max(m.x,m.y),C=b*this.getZoomScale(y,e),S=f.distanceTo(l)||1,T=1.42,B=T*T;function D(rt){var hi=rt?-1:1,Sa=rt?C:b,Oa=C*C-b*b+hi*B*B*S*S,Ma=2*Sa*B*S,sn=Oa/Ma,Zo=Math.sqrt(sn*sn+1)-sn,Ta=Zo<1e-9?-18:Math.log(Zo);return Ta}function pt(rt){return(Math.exp(rt)-Math.exp(-rt))/2}function ht(rt){return(Math.exp(rt)+Math.exp(-rt))/2}function Lt(rt){return pt(rt)/ht(rt)}var gt=D(0);function ae(rt){return b*(ht(gt)/ht(gt+T*rt))}function ba(rt){return b*(ht(gt)*Lt(gt+T*rt)-pt(gt))/B}function xa(rt){return 1-Math.pow(1-rt,1.5)}var Ca=Date.now(),zo=(D(1)-gt)/T,Pa=o.duration?1e3*o.duration:1e3*zo*.8;function No(){var rt=(Date.now()-Ca)/Pa,hi=xa(rt)*zo;rt<=1?(this._flyToFrame=V(No,this),this._move(this.unproject(l.add(f.subtract(l).multiplyBy(ba(hi)/S)),y),this.getScaleZoom(b/ae(hi),y),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,o.noMoveStart),No.call(this),this},flyToBounds:function(t,e){var o=this._getBoundsCenterZoom(t,e);return this.flyTo(o.center,o.zoom,e)},setMaxBounds:function(t){return t=ot(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var o=this.getCenter(),l=this._limitCenter(o,this._zoom,ot(t));return o.equals(l)||this.panTo(l,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var o=A(e.paddingTopLeft||e.padding||[0,0]),l=A(e.paddingBottomRight||e.padding||[0,0]),f=this.project(this.getCenter()),m=this.project(t),y=this.getPixelBounds(),b=lt([y.min.add(o),y.max.subtract(l)]),C=b.getSize();if(!b.contains(m)){this._enforcingBounds=!0;var S=m.subtract(b.getCenter()),T=b.extend(m).getSize().subtract(C);f.x+=S.x<0?-T.x:T.x,f.y+=S.y<0?-T.y:T.y,this.panTo(this.unproject(f),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=u({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var o=this.getSize(),l=e.divideBy(2).round(),f=o.divideBy(2).round(),m=l.subtract(f);return!m.x&&!m.y?this:(t.animate&&t.pan?this.panBy(m):(t.pan&&this._rawPanBy(m),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:o}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=u({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=a(this._handleGeolocationResponse,this),o=a(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,o,t):navigator.geolocation.getCurrentPosition(e,o,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,o=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+o+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=t.coords.latitude,o=t.coords.longitude,l=new K(e,o),f=l.toBounds(t.coords.accuracy*2),m=this._locateOptions;if(m.setView){var y=this.getBoundsZoom(f);this.setView(l,m.maxZoom?Math.min(y,m.maxZoom):y)}var b={latlng:l,bounds:f,timestamp:t.timestamp};for(var C in t.coords)typeof t.coords[C]=="number"&&(b[C]=t.coords[C]);this.fire("locationfound",b)}},addHandler:function(t,e){if(!e)return this;var o=this[t]=new e(this);return this._handlers.push(o),this.options[t]&&o.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)tt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var o="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=H("div",o,e||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),o=this.unproject(t.getTopRight());return new ut(e,o)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,o){t=ot(t),o=A(o||[0,0]);var l=this.getZoom()||0,f=this.getMinZoom(),m=this.getMaxZoom(),y=t.getNorthWest(),b=t.getSouthEast(),C=this.getSize().subtract(o),S=lt(this.project(b,l),this.project(y,l)).getSize(),T=k.any3d?this.options.zoomSnap:1,B=C.x/S.x,D=C.y/S.y,pt=e?Math.max(B,D):Math.min(B,D);return l=this.getScaleZoom(pt,l),T&&(l=Math.round(l/(T/100))*(T/100),l=e?Math.ceil(l/T)*T:Math.floor(l/T)*T),Math.max(f,Math.min(m,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new R(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var o=this._getTopLeftPoint(t,e);return new q(o,o.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var o=this.options.crs;return e=e===void 0?this._zoom:e,o.scale(t)/o.scale(e)},getScaleZoom:function(t,e){var o=this.options.crs;e=e===void 0?this._zoom:e;var l=o.zoom(t*o.scale(e));return isNaN(l)?1/0:l},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(A(t),e)},layerPointToLatLng:function(t){var e=A(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(j(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(ot(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return A(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return A(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(A(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return eo(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=Xn(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");N(e,"scroll",this._onScroll,this),this._containerId=d(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&k.any3d,Z(t,"leaflet-container"+(k.touch?" leaflet-touch":"")+(k.retina?" leaflet-retina":"")+(k.ielt9?" leaflet-oldie":"")+(k.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=Le(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&e!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),st(this._mapPane,new R(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Z(t.markerPane,"leaflet-zoom-hide"),Z(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e,o){st(this._mapPane,new R(0,0));var l=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var f=this._zoom!==e;this._moveStart(f,o)._move(t,e)._moveEnd(f),this.fire("viewreset"),l&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,o,l){e===void 0&&(e=this._zoom);var f=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),l?o&&o.pinch&&this.fire("zoom",o):((f||o&&o.pinch)&&this.fire("zoom",o),this.fire("move",o)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){st(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[d(this._container)]=this;var e=t?Y:N;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),k.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var o=[],l,f=e==="mouseout"||e==="mouseover",m=t.target||t.srcElement,y=!1;m;){if(l=this._targets[d(m)],l&&(e==="click"||e==="preclick")&&this._draggableMoved(l)){y=!0;break}if(l&&l.listens(e,!0)&&(f&&!qi(m,t)||(o.push(l),f))||m===this._container)break;m=m.parentNode}return!o.length&&!y&&!f&&this.listens(e,!0)&&(o=[this]),o},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(e))){var o=t.type;o==="mousedown"&&Ui(e),this._fireDOMEvent(t,o)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,o){if(t.type==="click"){var l=u({},t);l.type="preclick",this._fireDOMEvent(l,l.type,o)}var f=this._findEventTargets(t,e);if(o){for(var m=[],y=0;y<o.length;y++)o[y].listens(e,!0)&&m.push(o[y]);f=m.concat(f)}if(f.length){e==="contextmenu"&&ct(t);var b=f[0],C={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var S=b.getLatLng&&(!b._radius||b._radius<=10);C.containerPoint=S?this.latLngToContainerPoint(b.getLatLng()):this.mouseEventToContainerPoint(t),C.layerPoint=this.containerPointToLayerPoint(C.containerPoint),C.latlng=S?b.getLatLng():this.layerPointToLatLng(C.layerPoint)}for(y=0;y<f.length;y++)if(f[y].fire(e,C,!0),C.originalEvent._stopped||f[y].options.bubblingMouseEvents===!1&&W(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return $t(this._mapPane)||new R(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var o=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return o.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var o=this.getSize()._divideBy(2);return this.project(t,e)._subtract(o)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,o){var l=this._getNewPixelOrigin(o,e);return this.project(t,e)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,e,o){var l=this._getNewPixelOrigin(o,e);return lt([this.project(t.getSouthWest(),e)._subtract(l),this.project(t.getNorthWest(),e)._subtract(l),this.project(t.getSouthEast(),e)._subtract(l),this.project(t.getNorthEast(),e)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,o){if(!o)return t;var l=this.project(t,e),f=this.getSize().divideBy(2),m=new q(l.subtract(f),l.add(f)),y=this._getBoundsOffset(m,o,e);return Math.abs(y.x)<=1&&Math.abs(y.y)<=1?t:this.unproject(l.add(y),e)},_limitOffset:function(t,e){if(!e)return t;var o=this.getPixelBounds(),l=new q(o.min.add(t),o.max.add(t));return t.add(this._getBoundsOffset(l,e))},_getBoundsOffset:function(t,e,o){var l=lt(this.project(e.getNorthEast(),o),this.project(e.getSouthWest(),o)),f=l.min.subtract(t.min),m=l.max.subtract(t.max),y=this._rebound(f.x,-m.x),b=this._rebound(f.y,-m.y);return new R(y,b)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),o=this.getMaxZoom(),l=k.any3d?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(e,Math.min(o,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){it(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var o=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(o)?!1:(this.panBy(o,e),!0)},_createAnimProxy:function(){var t=this._proxy=H("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var o=Bi,l=this._proxy.style[o];Wt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),l===this._proxy.style[o]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Wt(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,o){if(this._animatingZoom)return!0;if(o=o||{},!this._zoomAnimated||o.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(e),f=this._getCenterOffset(t)._divideBy(1-1/l);return o.animate!==!0&&!this.getSize().contains(f)?!1:(V(function(){this._moveStart(!0,o.noMoveStart||!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,o,l){this._mapPane&&(o&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Z(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:l}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&it(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Dr(t,e){return new G(t,e)}var xt=nt.extend({options:{position:"topright"},initialize:function(t){P(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),o=this.getPosition(),l=t._controlCorners[o];return Z(e,"leaflet-control"),o.indexOf("bottom")!==-1?l.insertBefore(e,l.firstChild):l.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Pe=function(t){return new xt(t)};G.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",o=this._controlContainer=H("div",e+"control-container",this._container);function l(f,m){var y=e+f+" "+e+m;t[f+m]=H("div",y,o)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)tt(this._controlCorners[t]);tt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var oo=xt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,o,l){return o<l?-1:l<o?1:0}},initialize:function(t,e,o){P(this,o),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in e)this._addLayer(e[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return xt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(d(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Z(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Z(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):it(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return it(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=H("div",t),o=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ce(e),$i(e);var l=this._section=H("section",t+"-list");o&&(this._map.on("click",this.collapse,this),N(e,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=H("a",t+"-toggle",e);f.href="#",f.title="Layers",f.setAttribute("role","button"),N(f,{keydown:function(m){m.keyCode===13&&this._expandSafely()},click:function(m){ct(m),this._expandSafely()}},this),o||this.expand(),this._baseLayersList=H("div",t+"-base",l),this._separator=H("div",t+"-separator",l),this._overlaysList=H("div",t+"-overlays",l),e.appendChild(l)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&d(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,o){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:o}),this.options.sortLayers&&this._layers.sort(a(function(l,f){return this.options.sortFunction(l.layer,f.layer,l.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;$e(this._baseLayersList),$e(this._overlaysList),this._layerControlInputs=[];var t,e,o,l,f=0;for(o=0;o<this._layers.length;o++)l=this._layers[o],this._addItem(l),e=e||l.overlay,t=t||!l.overlay,f+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(d(t.target)),o=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;o&&this._map.fire(o,e)},_createRadioElement:function(t,e){var o='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=o,l.firstChild},_addItem:function(t){var e=document.createElement("label"),o=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=o):l=this._createRadioElement("leaflet-base-layers_"+d(this),o),this._layerControlInputs.push(l),l.layerId=d(t.layer),N(l,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var m=document.createElement("span");e.appendChild(m),m.appendChild(l),m.appendChild(f);var y=t.overlay?this._overlaysList:this._baseLayersList;return y.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,e,o,l=[],f=[];this._handlingClick=!0;for(var m=t.length-1;m>=0;m--)e=t[m],o=this._getLayer(e.layerId).layer,e.checked?l.push(o):e.checked||f.push(o);for(m=0;m<f.length;m++)this._map.hasLayer(f[m])&&this._map.removeLayer(f[m]);for(m=0;m<l.length;m++)this._map.hasLayer(l[m])||this._map.addLayer(l[m]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,o,l=this._map.getZoom(),f=t.length-1;f>=0;f--)e=t[f],o=this._getLayer(e.layerId).layer,e.disabled=o.options.minZoom!==void 0&&l<o.options.minZoom||o.options.maxZoom!==void 0&&l>o.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,N(t,"click",ct),this.expand();var e=this;setTimeout(function(){Y(t,"click",ct),e._preventClick=!1})}}),Fr=function(t,e,o){return new oo(t,e,o)},Vi=xt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",o=H("div",e+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,e+"-in",o,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,e+"-out",o,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),o},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,o,l,f){var m=H("a",o,l);return m.innerHTML=t,m.href="#",m.title=e,m.setAttribute("role","button"),m.setAttribute("aria-label",e),Ce(m),N(m,"click",Vt),N(m,"click",f,this),N(m,"click",this._refocusOnMap,this),m},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";it(this._zoomInButton,e),it(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Z(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Z(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});G.mergeOptions({zoomControl:!0}),G.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Vi,this.addControl(this.zoomControl))});var Ur=function(t){return new Vi(t)},so=xt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",o=H("div",e),l=this.options;return this._addScales(l,e+"-line",o),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),o},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,o){t.metric&&(this._mScale=H("div",e,o)),t.imperial&&(this._iScale=H("div",e,o))},_update:function(){var t=this._map,e=t.getSize().y/2,o=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(o)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),o=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,o,e/t)},_updateImperial:function(t){var e=t*3.2808399,o,l,f;e>5280?(o=e/5280,l=this._getRoundNum(o),this._updateScale(this._iScale,l+" mi",l/o)):(f=this._getRoundNum(e),this._updateScale(this._iScale,f+" ft",f/e))},_updateScale:function(t,e,o){t.style.width=Math.round(this.options.maxWidth*o)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),o=t/e;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,e*o}}),jr=function(t){return new so(t)},Gr='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ki=xt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(k.inlineSvg?Gr+" ":"")+"Leaflet</a>"},initialize:function(t){P(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=H("div","leaflet-control-attribution"),Ce(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var o=[];this.options.prefix&&o.push(this.options.prefix),t.length&&o.push(t.join(", ")),this._container.innerHTML=o.join(' <span aria-hidden="true">|</span> ')}}});G.mergeOptions({attributionControl:!0}),G.addInitHook(function(){this.options.attributionControl&&new Ki().addTo(this)});var Hr=function(t){return new Ki(t)};xt.Layers=oo,xt.Zoom=Vi,xt.Scale=so,xt.Attribution=Ki,Pe.layers=Fr,Pe.zoom=Ur,Pe.scale=jr,Pe.attribution=Hr;var Mt=nt.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Mt.addTo=function(t,e){return t.addHandler(e,this),this};var Wr={Events:at},ro=k.touch?"touchstart mousedown":"mousedown",jt=Pt.extend({options:{clickTolerance:3},initialize:function(t,e,o,l){P(this,l),this._element=t,this._dragStartTarget=e||t,this._preventOutline=o},enable:function(){this._enabled||(N(this._dragStartTarget,ro,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(jt._dragging===this&&this.finishDrag(!0),Y(this._dragStartTarget,ro,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Ri(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){jt._dragging===this&&this.finishDrag();return}if(!(jt._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(jt._dragging=this,this._preventOutline&&Ui(this._element),Zi(),we(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,o=Yn(this._element);this._startPoint=new R(e.clientX,e.clientY),this._startPos=$t(this._element),this._parentScale=ji(o);var l=t.type==="mousedown";N(document,l?"mousemove":"touchmove",this._onMove,this),N(document,l?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,o=new R(e.clientX,e.clientY)._subtract(this._startPoint);!o.x&&!o.y||Math.abs(o.x)+Math.abs(o.y)<this.options.clickTolerance||(o.x/=this._parentScale.x,o.y/=this._parentScale.y,ct(t),this._moved||(this.fire("dragstart"),this._moved=!0,Z(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Z(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(o),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),st(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){it(document.body,"leaflet-dragging"),this._lastTarget&&(it(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Y(document,"mousemove touchmove",this._onMove,this),Y(document,"mouseup touchend touchcancel",this._onUp,this),Di(),be();var e=this._moved&&this._moving;this._moving=!1,jt._dragging=!1,e&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function ao(t,e,o){var l,f=[1,4,2,8],m,y,b,C,S,T,B,D;for(m=0,T=t.length;m<T;m++)t[m]._code=Kt(t[m],e);for(b=0;b<4;b++){for(B=f[b],l=[],m=0,T=t.length,y=T-1;m<T;y=m++)C=t[m],S=t[y],C._code&B?S._code&B||(D=Xe(S,C,B,e,o),D._code=Kt(D,e),l.push(D)):(S._code&B&&(D=Xe(S,C,B,e,o),D._code=Kt(D,e),l.push(D)),l.push(C));t=l}return t}function ho(t,e){var o,l,f,m,y,b,C,S,T;if(!t||t.length===0)throw new Error("latlngs not passed");yt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var B=j([0,0]),D=ot(t),pt=D.getNorthWest().distanceTo(D.getSouthWest())*D.getNorthEast().distanceTo(D.getNorthWest());pt<1700&&(B=Ji(t));var ht=t.length,Lt=[];for(o=0;o<ht;o++){var gt=j(t[o]);Lt.push(e.project(j([gt.lat-B.lat,gt.lng-B.lng])))}for(b=C=S=0,o=0,l=ht-1;o<ht;l=o++)f=Lt[o],m=Lt[l],y=f.y*m.x-m.y*f.x,C+=(f.x+m.x)*y,S+=(f.y+m.y)*y,b+=y*3;b===0?T=Lt[0]:T=[C/b,S/b];var ae=e.unproject(A(T));return j([ae.lat+B.lat,ae.lng+B.lng])}function Ji(t){for(var e=0,o=0,l=0,f=0;f<t.length;f++){var m=j(t[f]);e+=m.lat,o+=m.lng,l++}return j([e/l,o/l])}var $r={__proto__:null,clipPolygon:ao,polygonCenter:ho,centroid:Ji};function lo(t,e){if(!e||!t.length)return t.slice();var o=e*e;return t=Kr(t,o),t=Vr(t,o),t}function uo(t,e,o){return Math.sqrt(Se(t,e,o,!0))}function qr(t,e,o){return Se(t,e,o)}function Vr(t,e){var o=t.length,l=typeof Uint8Array<"u"?Uint8Array:Array,f=new l(o);f[0]=f[o-1]=1,Xi(t,f,e,0,o-1);var m,y=[];for(m=0;m<o;m++)f[m]&&y.push(t[m]);return y}function Xi(t,e,o,l,f){var m=0,y,b,C;for(b=l+1;b<=f-1;b++)C=Se(t[b],t[l],t[f],!0),C>m&&(y=b,m=C);m>o&&(e[y]=1,Xi(t,e,o,l,y),Xi(t,e,o,y,f))}function Kr(t,e){for(var o=[t[0]],l=1,f=0,m=t.length;l<m;l++)Jr(t[l],t[f])>e&&(o.push(t[l]),f=l);return f<m-1&&o.push(t[m-1]),o}var co;function fo(t,e,o,l,f){var m=l?co:Kt(t,o),y=Kt(e,o),b,C,S;for(co=y;;){if(!(m|y))return[t,e];if(m&y)return!1;b=m||y,C=Xe(t,e,b,o,f),S=Kt(C,o),b===m?(t=C,m=S):(e=C,y=S)}}function Xe(t,e,o,l,f){var m=e.x-t.x,y=e.y-t.y,b=l.min,C=l.max,S,T;return o&8?(S=t.x+m*(C.y-t.y)/y,T=C.y):o&4?(S=t.x+m*(b.y-t.y)/y,T=b.y):o&2?(S=C.x,T=t.y+y*(C.x-t.x)/m):o&1&&(S=b.x,T=t.y+y*(b.x-t.x)/m),new R(S,T,f)}function Kt(t,e){var o=0;return t.x<e.min.x?o|=1:t.x>e.max.x&&(o|=2),t.y<e.min.y?o|=4:t.y>e.max.y&&(o|=8),o}function Jr(t,e){var o=e.x-t.x,l=e.y-t.y;return o*o+l*l}function Se(t,e,o,l){var f=e.x,m=e.y,y=o.x-f,b=o.y-m,C=y*y+b*b,S;return C>0&&(S=((t.x-f)*y+(t.y-m)*b)/C,S>1?(f=o.x,m=o.y):S>0&&(f+=y*S,m+=b*S)),y=t.x-f,b=t.y-m,l?y*y+b*b:new R(f,m)}function yt(t){return!I(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function po(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),yt(t)}function mo(t,e){var o,l,f,m,y,b,C,S;if(!t||t.length===0)throw new Error("latlngs not passed");yt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var T=j([0,0]),B=ot(t),D=B.getNorthWest().distanceTo(B.getSouthWest())*B.getNorthEast().distanceTo(B.getNorthWest());D<1700&&(T=Ji(t));var pt=t.length,ht=[];for(o=0;o<pt;o++){var Lt=j(t[o]);ht.push(e.project(j([Lt.lat-T.lat,Lt.lng-T.lng])))}for(o=0,l=0;o<pt-1;o++)l+=ht[o].distanceTo(ht[o+1])/2;if(l===0)S=ht[0];else for(o=0,m=0;o<pt-1;o++)if(y=ht[o],b=ht[o+1],f=y.distanceTo(b),m+=f,m>l){C=(m-l)/f,S=[b.x-C*(b.x-y.x),b.y-C*(b.y-y.y)];break}var gt=e.unproject(A(S));return j([gt.lat+T.lat,gt.lng+T.lng])}var Xr={__proto__:null,simplify:lo,pointToSegmentDistance:uo,closestPointOnSegment:qr,clipSegment:fo,_getEdgeIntersection:Xe,_getBitCode:Kt,_sqClosestPointOnSegment:Se,isFlat:yt,_flat:po,polylineCenter:mo},Yi={project:function(t){return new R(t.lng,t.lat)},unproject:function(t){return new K(t.y,t.x)},bounds:new q([-180,-90],[180,90])},Qi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,o=this.R,l=t.lat*e,f=this.R_MINOR/o,m=Math.sqrt(1-f*f),y=m*Math.sin(l),b=Math.tan(Math.PI/4-l/2)/Math.pow((1-y)/(1+y),m/2);return l=-o*Math.log(Math.max(b,1e-10)),new R(t.lng*e*o,l)},unproject:function(t){for(var e=180/Math.PI,o=this.R,l=this.R_MINOR/o,f=Math.sqrt(1-l*l),m=Math.exp(-t.y/o),y=Math.PI/2-2*Math.atan(m),b=0,C=.1,S;b<15&&Math.abs(C)>1e-7;b++)S=f*Math.sin(y),S=Math.pow((1-S)/(1+S),f/2),C=Math.PI/2-2*Math.atan(m*S)-y,y+=C;return new K(y*e,t.x*e/o)}},Yr={__proto__:null,LonLat:Yi,Mercator:Qi,SphericalMercator:Pi},Qr=u({},Ut,{code:"EPSG:3395",projection:Qi,transformation:function(){var t=.5/(Math.PI*Qi.R);return ge(t,.5,-t,.5)}()}),_o=u({},Ut,{code:"EPSG:4326",projection:Yi,transformation:ge(1/180,1,-1/180,.5)}),ta=u({},Bt,{projection:Yi,transformation:ge(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var o=e.lng-t.lng,l=e.lat-t.lat;return Math.sqrt(o*o+l*l)},infinite:!0});Bt.Earth=Ut,Bt.EPSG3395=Qr,Bt.EPSG3857=Oi,Bt.EPSG900913=rr,Bt.EPSG4326=_o,Bt.Simple=ta;var Ct=Pt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[d(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[d(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var o=this.getEvents();e.on(o,this),this.once("remove",function(){e.off(o,this)},this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});G.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=d(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=d(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return d(t)in this._layers},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},_addLayers:function(t){t=t?I(t)?t:[t]:[];for(var e=0,o=t.length;e<o;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[d(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=d(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,o=this._getZoomSpan();for(var l in this._zoomBoundLayers){var f=this._zoomBoundLayers[l].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),e=f.maxZoom===void 0?e:Math.max(e,f.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,o!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ie=Ct.extend({initialize:function(t,e){P(this,e),this._layers={};var o,l;if(t)for(o=0,l=t.length;o<l;o++)this.addLayer(t[o])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),o,l;for(o in this._layers)l=this._layers[o],l[t]&&l[t].apply(l,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var o in this._layers)t.call(e,this._layers[o]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return d(t)}}),ea=function(t,e){return new ie(t,e)},Rt=ie.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ie.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ie.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new ut;for(var e in this._layers){var o=this._layers[e];t.extend(o.getBounds?o.getBounds():o.getLatLng())}return t}}),ia=function(t,e){return new Rt(t,e)},ne=nt.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){P(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var o=this._getIconUrl(t);if(!o){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(o,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(l,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),l},_setIconStyles:function(t,e){var o=this.options,l=o[e+"Size"];typeof l=="number"&&(l=[l,l]);var f=A(l),m=A(e==="shadow"&&o.shadowAnchor||o.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(o.className||""),m&&(t.style.marginLeft=-m.x+"px",t.style.marginTop=-m.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return k.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function na(t){return new ne(t)}var Oe=ne.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Oe.imagePath!="string"&&(Oe.imagePath=this._detectIconPath()),(this.options.imagePath||Oe.imagePath)+ne.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(o,l,f){var m=l.exec(o);return m&&m[f]};return t=e(t,/^url\((['"])?(.+)\1\)$/,2),t&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=H("div","leaflet-default-icon-path",document.body),e=Le(t,"background-image")||Le(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e),e)return e;var o=document.querySelector('link[href$="leaflet.css"]');return o?o.href.substring(0,o.href.length-11-1):""}}),go=Mt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new jt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Z(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&it(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,o=e._map,l=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,m=$t(e._icon),y=o.getPixelBounds(),b=o.getPixelOrigin(),C=lt(y.min._subtract(b).add(f),y.max._subtract(b).subtract(f));if(!C.contains(m)){var S=A((Math.max(C.max.x,m.x)-C.max.x)/(y.max.x-C.max.x)-(Math.min(C.min.x,m.x)-C.min.x)/(y.min.x-C.min.x),(Math.max(C.max.y,m.y)-C.max.y)/(y.max.y-C.max.y)-(Math.min(C.min.y,m.y)-C.min.y)/(y.min.y-C.min.y)).multiplyBy(l);o.panBy(S,{animate:!1}),this._draggable._newPos._add(S),this._draggable._startPos._add(S),st(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=V(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,o=e._shadow,l=$t(e._icon),f=e._map.layerPointToLatLng(l);o&&st(o,l),e._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ye=Ct.extend({options:{icon:new Oe,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){P(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),o=t.icon.createIcon(this._icon),l=!1;o!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(o.title=t.title),o.tagName==="IMG"&&(o.alt=t.alt||"")),Z(o,e),t.keyboard&&(o.tabIndex="0",o.setAttribute("role","button")),this._icon=o,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&N(o,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),m=!1;f!==this._shadow&&(this._removeShadow(),m=!0),f&&(Z(f,e),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&m&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Y(this._icon,"focus",this._panOnFocus,this),tt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&st(this._icon,t),this._shadow&&st(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(Z(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),go)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new go(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&vt(this._icon,t),this._shadow&&vt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,o=e.iconSize?A(e.iconSize):A(0,0),l=e.iconAnchor?A(e.iconAnchor):A(0,0);t.panInside(this._latlng,{paddingTopLeft:l,paddingBottomRight:o.subtract(l)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function oa(t,e){return new Ye(t,e)}var Gt=Ct.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return P(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qe=Gt.extend({options:{fill:!0,radius:10},initialize:function(t,e){P(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Gt.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,o=this._clickTolerance(),l=[t+o,e+o];this._pxBounds=new q(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function sa(t,e){return new Qe(t,e)}var tn=Qe.extend({initialize:function(t,e,o){if(typeof e=="number"&&(e=u({},o,{radius:e})),P(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new ut(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Gt.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,o=this._map,l=o.options.crs;if(l.distance===Ut.distance){var f=Math.PI/180,m=this._mRadius/Ut.R/f,y=o.project([e+m,t]),b=o.project([e-m,t]),C=y.add(b).divideBy(2),S=o.unproject(C).lat,T=Math.acos((Math.cos(m*f)-Math.sin(e*f)*Math.sin(S*f))/(Math.cos(e*f)*Math.cos(S*f)))/f;(isNaN(T)||T===0)&&(T=m/Math.cos(Math.PI/180*e)),this._point=C.subtract(o.getPixelOrigin()),this._radius=isNaN(T)?0:C.x-o.project([S,t-T]).x,this._radiusY=C.y-y.y}else{var B=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=o.latLngToLayerPoint(this._latlng),this._radius=this._point.x-o.latLngToLayerPoint(B).x}this._updateBounds()}});function ra(t,e,o){return new tn(t,e,o)}var zt=Gt.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){P(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,o=null,l=Se,f,m,y=0,b=this._parts.length;y<b;y++)for(var C=this._parts[y],S=1,T=C.length;S<T;S++){f=C[S-1],m=C[S];var B=l(t,f,m,!0);B<e&&(e=B,o=l(t,f,m))}return o&&(o.distance=Math.sqrt(e)),o},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return mo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new ut,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return yt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],o=yt(t),l=0,f=t.length;l<f;l++)o?(e[l]=j(t[l]),this._bounds.extend(e[l])):e[l]=this._convertLatLngs(t[l]);return e},_project:function(){var t=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new R(t,t);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,o){var l=t[0]instanceof K,f=t.length,m,y;if(l){for(y=[],m=0;m<f;m++)y[m]=this._map.latLngToLayerPoint(t[m]),o.extend(y[m]);e.push(y)}else for(m=0;m<f;m++)this._projectLatlngs(t[m],e,o)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,o,l,f,m,y,b,C;for(o=0,f=0,m=this._rings.length;o<m;o++)for(C=this._rings[o],l=0,y=C.length;l<y-1;l++)b=fo(C[l],C[l+1],t,l,!0),b&&(e[f]=e[f]||[],e[f].push(b[0]),(b[1]!==C[l+1]||l===y-2)&&(e[f].push(b[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,o=0,l=t.length;o<l;o++)t[o]=lo(t[o],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var o,l,f,m,y,b,C=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(o=0,m=this._parts.length;o<m;o++)for(b=this._parts[o],l=0,y=b.length,f=y-1;l<y;f=l++)if(!(!e&&l===0)&&uo(t,b[f],b[l])<=C)return!0;return!1}});function aa(t,e){return new zt(t,e)}zt._flat=po;var oe=zt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ho(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var e=zt.prototype._convertLatLngs.call(this,t),o=e.length;return o>=2&&e[0]instanceof K&&e[0].equals(e[o-1])&&e.pop(),e},_setLatLngs:function(t){zt.prototype._setLatLngs.call(this,t),yt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return yt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,o=new R(e,e);if(t=new q(t.min.subtract(o),t.max.add(o)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,f=this._rings.length,m;l<f;l++)m=ao(this._rings[l],t,!0),m.length&&this._parts.push(m)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,o,l,f,m,y,b,C,S;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(m=0,C=this._parts.length;m<C;m++)for(o=this._parts[m],y=0,S=o.length,b=S-1;y<S;b=y++)l=o[y],f=o[b],l.y>t.y!=f.y>t.y&&t.x<(f.x-l.x)*(t.y-l.y)/(f.y-l.y)+l.x&&(e=!e);return e||zt.prototype._containsPoint.call(this,t,!0)}});function ha(t,e){return new oe(t,e)}var Nt=Rt.extend({initialize:function(t,e){P(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=I(t)?t:t.features,o,l,f;if(e){for(o=0,l=e.length;o<l;o++)f=e[o],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var m=this.options;if(m.filter&&!m.filter(t))return this;var y=ti(t,m);return y?(y.feature=ni(t),y.defaultOptions=y.options,this.resetStyle(y),m.onEachFeature&&m.onEachFeature(t,y),this.addLayer(y)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=u({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function ti(t,e){var o=t.type==="Feature"?t.geometry:t,l=o?o.coordinates:null,f=[],m=e&&e.pointToLayer,y=e&&e.coordsToLatLng||en,b,C,S,T;if(!l&&!o)return null;switch(o.type){case"Point":return b=y(l),vo(m,t,b,e);case"MultiPoint":for(S=0,T=l.length;S<T;S++)b=y(l[S]),f.push(vo(m,t,b,e));return new Rt(f);case"LineString":case"MultiLineString":return C=ei(l,o.type==="LineString"?0:1,y),new zt(C,e);case"Polygon":case"MultiPolygon":return C=ei(l,o.type==="Polygon"?1:2,y),new oe(C,e);case"GeometryCollection":for(S=0,T=o.geometries.length;S<T;S++){var B=ti({geometry:o.geometries[S],type:"Feature",properties:t.properties},e);B&&f.push(B)}return new Rt(f);case"FeatureCollection":for(S=0,T=o.features.length;S<T;S++){var D=ti(o.features[S],e);D&&f.push(D)}return new Rt(f);default:throw new Error("Invalid GeoJSON object.")}}function vo(t,e,o,l){return t?t(e,o):new Ye(o,l&&l.markersInheritOptions&&l)}function en(t){return new K(t[1],t[0],t[2])}function ei(t,e,o){for(var l=[],f=0,m=t.length,y;f<m;f++)y=e?ei(t[f],e-1,o):(o||en)(t[f]),l.push(y);return l}function nn(t,e){return t=j(t),t.alt!==void 0?[v(t.lng,e),v(t.lat,e),v(t.alt,e)]:[v(t.lng,e),v(t.lat,e)]}function ii(t,e,o,l){for(var f=[],m=0,y=t.length;m<y;m++)f.push(e?ii(t[m],yt(t[m])?0:e-1,o,l):nn(t[m],l));return!e&&o&&f.length>0&&f.push(f[0].slice()),f}function se(t,e){return t.feature?u({},t.feature,{geometry:e}):ni(e)}function ni(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var on={toGeoJSON:function(t){return se(this,{type:"Point",coordinates:nn(this.getLatLng(),t)})}};Ye.include(on),tn.include(on),Qe.include(on),zt.include({toGeoJSON:function(t){var e=!yt(this._latlngs),o=ii(this._latlngs,e?1:0,!1,t);return se(this,{type:(e?"Multi":"")+"LineString",coordinates:o})}}),oe.include({toGeoJSON:function(t){var e=!yt(this._latlngs),o=e&&!yt(this._latlngs[0]),l=ii(this._latlngs,o?2:e?1:0,!0,t);return e||(l=[l]),se(this,{type:(o?"Multi":"")+"Polygon",coordinates:l})}}),ie.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(o){e.push(o.toGeoJSON(t).geometry.coordinates)}),se(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var o=e==="GeometryCollection",l=[];return this.eachLayer(function(f){if(f.toGeoJSON){var m=f.toGeoJSON(t);if(o)l.push(m.geometry);else{var y=ni(m);y.type==="FeatureCollection"?l.push.apply(l,y.features):l.push(y)}}}),o?se(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function yo(t,e){return new Nt(t,e)}var la=yo,oi=Ct.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,o){this._url=t,this._bounds=ot(e),P(this,o)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Z(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&te(this._image),this},bringToBack:function(){return this._map&&ee(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=ot(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:H("img");if(Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onload=a(this.fire,this,"load"),e.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),o=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Wt(this._image,o,e)},_reset:function(){var t=this._image,e=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),o=e.getSize();st(t,e.min),t.style.width=o.x+"px",t.style.height=o.y+"px"},_updateOpacity:function(){vt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),ua=function(t,e,o){return new oi(t,e,o)},Lo=oi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:H("video");if(Z(e,"leaflet-image-layer"),this._zoomAnimated&&Z(e,"leaflet-zoom-animated"),this.options.className&&Z(e,this.options.className),e.onselectstart=_,e.onmousemove=_,e.onloadeddata=a(this.fire,this,"load"),t){for(var o=e.getElementsByTagName("source"),l=[],f=0;f<o.length;f++)l.push(o[f].src);this._url=o.length>0?l:[e.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var m=0;m<this._url.length;m++){var y=H("source");y.src=this._url[m],e.appendChild(y)}}});function ca(t,e,o){return new Lo(t,e,o)}var wo=oi.extend({_initImage:function(){var t=this._image=this._url;Z(t,"leaflet-image-layer"),this._zoomAnimated&&Z(t,"leaflet-zoom-animated"),this.options.className&&Z(t,this.options.className),t.onselectstart=_,t.onmousemove=_}});function fa(t,e,o){return new wo(t,e,o)}var Tt=Ct.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,e){t&&(t instanceof K||I(t))?(this._latlng=j(t),P(this,e)):(P(this,t),this._source=e),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&vt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&vt(this._container,1),this.bringToFront(),this.options.interactive&&(Z(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(vt(this._container,0),this._removeTimeout=setTimeout(a(tt,void 0,this._container),200)):tt(this._container),this.options.interactive&&(it(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&te(this._container),this},bringToBack:function(){return this._map&&ee(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Rt){e=null;var o=this._source._layers;for(var l in o)if(o[l]._map){e=o[l];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else if(e.getBounds)t=e.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=A(this.options.offset),o=this._getAnchor();this._zoomAnimated?st(this._container,t.add(o)):e=e.add(t).add(o);var l=this._containerBottom=-e.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=l+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});G.include({_initOverlay:function(t,e,o,l){var f=e;return f instanceof t||(f=new t(l).setContent(e)),o&&f.setLatLng(o),f}}),Ct.include({_initOverlay:function(t,e,o,l){var f=o;return f instanceof t?(P(f,l),f._source=this):(f=e&&!l?e:new t(l,this),f.setContent(o)),f}});var si=Tt.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Tt.prototype.openOn.call(this,t)},onAdd:function(t){Tt.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Gt||this._source.on("preclick",qt))},onRemove:function(t){Tt.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Gt||this._source.off("preclick",qt))},getEvents:function(){var t=Tt.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=H("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),o=this._wrapper=H("div",t+"-content-wrapper",e);if(this._contentNode=H("div",t+"-content",o),Ce(e),$i(this._contentNode),N(e,"contextmenu",qt),this._tipContainer=H("div",t+"-tip-container",e),this._tip=H("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=H("a",t+"-close-button",e);l.setAttribute("role","button"),l.setAttribute("aria-label","Close popup"),l.href="#close",l.innerHTML='<span aria-hidden="true">&#215;</span>',N(l,"click",function(f){ct(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var o=t.offsetWidth;o=Math.min(o,this.options.maxWidth),o=Math.max(o,this.options.minWidth),e.width=o+1+"px",e.whiteSpace="",e.height="";var l=t.offsetHeight,f=this.options.maxHeight,m="leaflet-popup-scrolled";f&&l>f?(e.height=f+"px",Z(t,m)):it(t,m),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),o=this._getAnchor();st(this._container,e.add(o))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,e=parseInt(Le(this._container,"marginBottom"),10)||0,o=this._container.offsetHeight+e,l=this._containerWidth,f=new R(this._containerLeft,-o-this._containerBottom);f._add($t(this._container));var m=t.layerPointToContainerPoint(f),y=A(this.options.autoPanPadding),b=A(this.options.autoPanPaddingTopLeft||y),C=A(this.options.autoPanPaddingBottomRight||y),S=t.getSize(),T=0,B=0;m.x+l+C.x>S.x&&(T=m.x+l-S.x+C.x),m.x-T-b.x<0&&(T=m.x-b.x),m.y+o+C.y>S.y&&(B=m.y+o-S.y+C.y),m.y-B-b.y<0&&(B=m.y-b.y),(T||B)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([T,B]))}},_getAnchor:function(){return A(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),da=function(t,e){return new si(t,e)};G.mergeOptions({closePopupOnClick:!0}),G.include({openPopup:function(t,e,o){return this._initOverlay(si,t,e,o).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Ct.include({bindPopup:function(t,e){return this._popup=this._initOverlay(si,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof Rt||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Vt(t);var e=t.layer||t.target;if(this._popup._source===e&&!(e instanceof Gt)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=e,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var ri=Tt.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Tt.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Tt.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Tt.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=H("div",e),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,o,l=this._map,f=this._container,m=l.latLngToContainerPoint(l.getCenter()),y=l.layerPointToContainerPoint(t),b=this.options.direction,C=f.offsetWidth,S=f.offsetHeight,T=A(this.options.offset),B=this._getAnchor();b==="top"?(e=C/2,o=S):b==="bottom"?(e=C/2,o=0):b==="center"?(e=C/2,o=S/2):b==="right"?(e=0,o=S/2):b==="left"?(e=C,o=S/2):y.x<m.x?(b="right",e=0,o=S/2):(b="left",e=C+(T.x+B.x)*2,o=S/2),t=t.subtract(A(e,o,!0)).add(T).add(B),it(f,"leaflet-tooltip-right"),it(f,"leaflet-tooltip-left"),it(f,"leaflet-tooltip-top"),it(f,"leaflet-tooltip-bottom"),Z(f,"leaflet-tooltip-"+b),st(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&vt(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return A(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),pa=function(t,e){return new ri(t,e)};G.include({openTooltip:function(t,e,o){return this._initOverlay(ri,t,e,o).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Ct.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ri,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",o={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?o.add=this._openTooltip:(o.mouseover=this._openTooltip,o.mouseout=this.closeTooltip,o.click=this._openTooltip,this._map?this._addFocusListeners():o.add=this._addFocusListeners),this._tooltip.options.sticky&&(o.mousemove=this._moveTooltip),this[e](o),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof Rt||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&(N(e,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),N(e,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var e=typeof t.getElement=="function"&&t.getElement();e&&e.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var e=this;this._map.once("moveend",function(){e._openOnceFlag=!1,e._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var e=t.latlng,o,l;this._tooltip.options.sticky&&t.originalEvent&&(o=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(o),e=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(e)}});var bo=ne.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),o=this.options;if(o.html instanceof Element?($e(e),e.appendChild(o.html)):e.innerHTML=o.html!==!1?o.html:"",o.bgPos){var l=A(o.bgPos);e.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function ma(t){return new bo(t)}ne.Default=Oe;var Me=Ct.extend({options:{tileSize:256,opacity:1,updateWhenIdle:k.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){P(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),tt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(te(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ee(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof R?t:new R(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,o=-t(-1/0,1/0),l=0,f=e.length,m;l<f;l++)m=e[l].style.zIndex,e[l]!==this._container&&m&&(o=t(o,+m));isFinite(o)&&(this.options.zIndex=o+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!k.ielt9){vt(this._container,this.options.opacity);var t=+new Date,e=!1,o=!1;for(var l in this._tiles){var f=this._tiles[l];if(!(!f.current||!f.loaded)){var m=Math.min(1,(t-f.loaded)/200);vt(f.el,m),m<1?e=!0:(f.active?o=!0:this._onOpaqueTile(f),f.active=!0)}}o&&!this._noPrune&&this._pruneTiles(),e&&(Q(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=H("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var o in this._levels)o=Number(o),this._levels[o].el.children.length||o===t?(this._levels[o].el.style.zIndex=e-Math.abs(t-o),this._onUpdateLevel(o)):(tt(this._levels[o].el),this._removeTilesAtZoom(o),this._onRemoveLevel(o),delete this._levels[o]);var l=this._levels[t],f=this._map;return l||(l=this._levels[t]={},l.el=H("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=e,l.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,f.getCenter(),f.getZoom()),_(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var t,e,o=this._map.getZoom();if(o>this.options.maxZoom||o<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var l=e.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)tt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,o,l){var f=Math.floor(t/2),m=Math.floor(e/2),y=o-1,b=new R(+f,+m);b.z=+y;var C=this._tileCoordsToKey(b),S=this._tiles[C];return S&&S.active?(S.retain=!0,!0):(S&&S.loaded&&(S.retain=!0),y>l?this._retainParent(f,m,y,l):!1)},_retainChildren:function(t,e,o,l){for(var f=2*t;f<2*t+2;f++)for(var m=2*e;m<2*e+2;m++){var y=new R(f,m);y.z=o+1;var b=this._tileCoordsToKey(y),C=this._tiles[b];if(C&&C.active){C.retain=!0;continue}else C&&C.loaded&&(C.retain=!0);o+1<l&&this._retainChildren(f,m,o+1,l)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,o,l){var f=Math.round(e);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var m=this.options.updateWhenZooming&&f!==this._tileZoom;(!l||m)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),o||this._pruneTiles(),this._noPrune=!!o),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var o in this._levels)this._setZoomTransform(this._levels[o],t,e)},_setZoomTransform:function(t,e,o){var l=this._map.getZoomScale(o,t.zoom),f=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(e,o)).round();k.any3d?Wt(t.el,f,l):st(t.el,f)},_resetGrid:function(){var t=this._map,e=t.options.crs,o=this._tileSize=this.getTileSize(),l=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],l).x/o.x),Math.ceil(t.project([0,e.wrapLng[1]],l).x/o.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],l).y/o.x),Math.ceil(t.project([e.wrapLat[1],0],l).y/o.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,o=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),l=e.getZoomScale(o,this._tileZoom),f=e.project(t,this._tileZoom).floor(),m=e.getSize().divideBy(l*2);return new q(f.subtract(m),f.add(m))},_update:function(t){var e=this._map;if(e){var o=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(l),m=f.getCenter(),y=[],b=this.options.keepBuffer,C=new q(f.getBottomLeft().subtract([b,-b]),f.getTopRight().add([b,-b]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var S in this._tiles){var T=this._tiles[S].coords;(T.z!==this._tileZoom||!C.contains(new R(T.x,T.y)))&&(this._tiles[S].current=!1)}if(Math.abs(o-this._tileZoom)>1){this._setView(t,o);return}for(var B=f.min.y;B<=f.max.y;B++)for(var D=f.min.x;D<=f.max.x;D++){var pt=new R(D,B);if(pt.z=this._tileZoom,!!this._isValidTile(pt)){var ht=this._tiles[this._tileCoordsToKey(pt)];ht?ht.current=!0:y.push(pt)}}if(y.sort(function(gt,ae){return gt.distanceTo(m)-ae.distanceTo(m)}),y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Lt=document.createDocumentFragment();for(D=0;D<y.length;D++)this._addTile(y[D],Lt);this._level.el.appendChild(Lt)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var o=this._globalTileRange;if(!e.wrapLng&&(t.x<o.min.x||t.x>o.max.x)||!e.wrapLat&&(t.y<o.min.y||t.y>o.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return ot(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,o=this.getTileSize(),l=t.scaleBy(o),f=l.add(o),m=e.unproject(l,t.z),y=e.unproject(f,t.z);return[m,y]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),o=new ut(e[0],e[1]);return this.options.noWrap||(o=this._map.wrapLatLngBounds(o)),o},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),o=new R(+e[0],+e[1]);return o.z=+e[2],o},_removeTile:function(t){var e=this._tiles[t];e&&(tt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Z(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=_,t.onmousemove=_,k.ielt9&&this.options.opacity<1&&vt(t,this.options.opacity)},_addTile:function(t,e){var o=this._getTilePos(t),l=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),a(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&V(a(this._tileReady,this,t,null,f)),st(f,o),this._tiles[l]={el:f,coords:t,current:!0},e.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,e,o){e&&this.fire("tileerror",{error:e,tile:o,coords:t});var l=this._tileCoordsToKey(t);o=this._tiles[l],o&&(o.loaded=+new Date,this._map._fadeAnimated?(vt(o.el,0),Q(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(o.active=!0,this._pruneTiles()),e||(Z(o.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:o.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),k.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new R(this._wrapX?g(t.x,this._wrapX):t.x,this._wrapY?g(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new q(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function _a(t){return new Me(t)}var re=Me.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,e=P(this,e),e.detectRetina&&k.retina&&e.maxZoom>0?(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom=Math.min(e.maxZoom,e.minZoom+1)):(e.zoomOffset++,e.maxZoom=Math.max(e.minZoom,e.maxZoom-1)),e.minZoom=Math.max(0,e.minZoom)):e.zoomReverse?e.minZoom=Math.min(e.maxZoom,e.minZoom):e.maxZoom=Math.max(e.minZoom,e.maxZoom),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var o=document.createElement("img");return N(o,"load",a(this._tileOnLoad,this,e,o)),N(o,"error",a(this._tileOnError,this,e,o)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(o.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(o.referrerPolicy=this.options.referrerPolicy),o.alt="",o.src=this.getTileUrl(t),o},getTileUrl:function(t){var e={r:k.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var o=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=o),e["-y"]=o}return E(this._url,u(e,this.options))},_tileOnLoad:function(t,e){k.ielt9?setTimeout(a(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,o){var l=this.options.errorTileUrl;l&&e.getAttribute("src")!==l&&(e.src=l),t(o,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,o=this.options.zoomReverse,l=this.options.zoomOffset;return o&&(t=e-t),t+l},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=_,e.onerror=_,!e.complete)){e.src=F;var o=this._tiles[t].coords;tt(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:o})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",F),Me.prototype._removeTile.call(this,t)},_tileReady:function(t,e,o){if(!(!this._map||o&&o.getAttribute("src")===F))return Me.prototype._tileReady.call(this,t,e,o)}});function xo(t,e){return new re(t,e)}var Co=re.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var o=u({},this.defaultWmsParams);for(var l in e)l in this.options||(o[l]=e[l]);e=P(this,e);var f=e.detectRetina&&k.retina?2:1,m=this.getTileSize();o.width=m.x*f,o.height=m.y*f,this.wmsParams=o},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,re.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),o=this._crs,l=lt(o.project(e[0]),o.project(e[1])),f=l.min,m=l.max,y=(this._wmsVersion>=1.3&&this._crs===_o?[f.y,f.x,m.y,m.x]:[f.x,f.y,m.x,m.y]).join(","),b=re.prototype.getTileUrl.call(this,t);return b+O(this.wmsParams,b,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+y},setParams:function(t,e){return u(this.wmsParams,t),e||this.redraw(),this}});function ga(t,e){return new Co(t,e)}re.WMS=Co,xo.wms=ga;var Zt=Ct.extend({options:{padding:.1},initialize:function(t){P(this,t),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Z(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var o=this._map.getZoomScale(e,this._zoom),l=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,e),m=l.multiplyBy(-o).add(f).subtract(this._map._getNewPixelOrigin(t,e));k.any3d?Wt(this._container,m,o):st(this._container,m)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),o=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new q(o,o.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Po=Zt.extend({options:{tolerance:0},getEvents:function(){var t=Zt.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");N(t,"mousemove",this._onMouseMove,this),N(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),N(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,tt(this._container),Y(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zt.prototype._update.call(this);var t=this._bounds,e=this._container,o=t.getSize(),l=k.retina?2:1;st(e,t.min),e.width=l*o.x,e.height=l*o.y,e.style.width=o.x+"px",e.style.height=o.y+"px",k.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Zt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[d(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,o=e.next,l=e.prev;o?o.prev=l:this._drawLast=l,l?l.next=o:this._drawFirst=o,delete t._order,delete this._layers[d(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),o=[],l,f;for(f=0;f<e.length;f++){if(l=Number(e[f]),isNaN(l))return;o.push(l)}t.options._dashArray=o}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var o=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,o.x,o.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var o,l,f,m,y=t._parts,b=y.length,C=this._ctx;if(b){for(C.beginPath(),o=0;o<b;o++){for(l=0,f=y[o].length;l<f;l++)m=y[o][l],C[l?"lineTo":"moveTo"](m.x,m.y);e&&C.closePath()}this._fillStroke(C,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,o=this._ctx,l=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||l)/l;f!==1&&(o.save(),o.scale(1,f)),o.beginPath(),o.arc(e.x,e.y/f,l,0,Math.PI*2,!1),f!==1&&o.restore(),this._fillStroke(o,t)}},_fillStroke:function(t,e){var o=e.options;o.fill&&(t.globalAlpha=o.fillOpacity,t.fillStyle=o.fillColor||o.color,t.fill(o.fillRule||"evenodd")),o.stroke&&o.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=o.opacity,t.lineWidth=o.weight,t.strokeStyle=o.color,t.lineCap=o.lineCap,t.lineJoin=o.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),o,l,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(e)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(o))&&(l=o);this._fireEvent(l?[l]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(it(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var o,l,f=this._drawFirst;f;f=f.next)o=f.layer,o.options.interactive&&o._containsPoint(e)&&(l=o);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(Z(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,o){this._map._fireDOMEvent(e,o||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var o=e.next,l=e.prev;if(o)o.prev=l;else return;l?l.next=o:o&&(this._drawFirst=o),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(e){var o=e.next,l=e.prev;if(l)l.next=o;else return;o?o.prev=l:l&&(this._drawLast=l),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function So(t){return k.canvas?new Po(t):null}var Te=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),va={_initContainer:function(){this._container=H("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zt.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Te("shape");Z(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Te("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;tt(e),t.removeInteractiveTarget(e),delete this._layers[d(t)]},_updateStyle:function(t){var e=t._stroke,o=t._fill,l=t.options,f=t._container;f.stroked=!!l.stroke,f.filled=!!l.fill,l.stroke?(e||(e=t._stroke=Te("stroke")),f.appendChild(e),e.weight=l.weight+"px",e.color=l.color,e.opacity=l.opacity,l.dashArray?e.dashStyle=I(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=l.lineCap.replace("butt","flat"),e.joinstyle=l.lineJoin):e&&(f.removeChild(e),t._stroke=null),l.fill?(o||(o=t._fill=Te("fill")),f.appendChild(o),o.color=l.fillColor||l.color,o.opacity=l.fillOpacity):o&&(f.removeChild(o),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),o=Math.round(t._radius),l=Math.round(t._radiusY||o);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+o+","+l+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){te(t._container)},_bringToBack:function(t){ee(t._container)}},ai=k.vml?Te:Tn,Ee=Zt.extend({_initContainer:function(){this._container=ai("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ai("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tt(this._container),Y(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zt.prototype._update.call(this);var t=this._bounds,e=t.getSize(),o=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,o.setAttribute("width",e.x),o.setAttribute("height",e.y)),st(o,t.min),o.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=ai("path");t.options.className&&Z(e,t.options.className),t.options.interactive&&Z(e,"leaflet-interactive"),this._updateStyle(t),this._layers[d(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){tt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[d(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,o=t.options;e&&(o.stroke?(e.setAttribute("stroke",o.color),e.setAttribute("stroke-opacity",o.opacity),e.setAttribute("stroke-width",o.weight),e.setAttribute("stroke-linecap",o.lineCap),e.setAttribute("stroke-linejoin",o.lineJoin),o.dashArray?e.setAttribute("stroke-dasharray",o.dashArray):e.removeAttribute("stroke-dasharray"),o.dashOffset?e.setAttribute("stroke-dashoffset",o.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),o.fill?(e.setAttribute("fill",o.fillColor||o.color),e.setAttribute("fill-opacity",o.fillOpacity),e.setAttribute("fill-rule",o.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,En(t._parts,e))},_updateCircle:function(t){var e=t._point,o=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||o,f="a"+o+","+l+" 0 1,0 ",m=t._empty()?"M0 0":"M"+(e.x-o)+","+e.y+f+o*2+",0 "+f+-o*2+",0 ";this._setPath(t,m)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){te(t._path)},_bringToBack:function(t){ee(t._path)}});k.vml&&Ee.include(va);function Oo(t){return k.svg||k.vml?new Ee(t):null}G.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&So(t)||Oo(t)}});var Mo=oe.extend({initialize:function(t,e){oe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=ot(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function ya(t,e){return new Mo(t,e)}Ee.create=ai,Ee.pointsToPath=En,Nt.geometryToLayer=ti,Nt.coordsToLatLng=en,Nt.coordsToLatLngs=ei,Nt.latLngToCoords=nn,Nt.latLngsToCoords=ii,Nt.getFeature=se,Nt.asFeature=ni,G.mergeOptions({boxZoom:!0});var To=Mt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){N(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Y(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),we(),Zi(),this._startPoint=this._map.mouseEventToContainerPoint(t),N(document,{contextmenu:Vt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=H("div","leaflet-zoom-box",this._container),Z(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new q(this._point,this._startPoint),o=e.getSize();st(this._box,e.min),this._box.style.width=o.x+"px",this._box.style.height=o.y+"px"},_finish:function(){this._moved&&(tt(this._box),it(this._container,"leaflet-crosshair")),be(),Di(),Y(document,{contextmenu:Vt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var e=new ut(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});G.addInitHook("addHandler","boxZoom",To),G.mergeOptions({doubleClickZoom:!0});var Eo=Mt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,o=e.getZoom(),l=e.options.zoomDelta,f=t.originalEvent.shiftKey?o-l:o+l;e.options.doubleClickZoom==="center"?e.setZoom(f):e.setZoomAround(t.containerPoint,f)}});G.addInitHook("addHandler","doubleClickZoom",Eo),G.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ko=Mt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new jt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Z(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){it(this._map._container,"leaflet-grab"),it(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=ot(this._map.options.maxBounds);this._offsetLimit=lt(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,o=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(o),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),o=this._initialWorldOffset,l=this._draggable._newPos.x,f=(l-e+o)%t+e-o,m=(l+e+o)%t-e-o,y=Math.abs(f+o)<Math.abs(m+o)?f:m;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=y},_onDragEnd:function(t){var e=this._map,o=e.options,l=!o.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),l)e.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),m=(this._lastTime-this._times[0])/1e3,y=o.easeLinearity,b=f.multiplyBy(y/m),C=b.distanceTo([0,0]),S=Math.min(o.inertiaMaxSpeed,C),T=b.multiplyBy(S/C),B=S/(o.inertiaDeceleration*y),D=T.multiplyBy(-B/2).round();!D.x&&!D.y?e.fire("moveend"):(D=e._limitOffset(D,e.options.maxBounds),V(function(){e.panBy(D,{duration:B,easeLinearity:y,noMoveStart:!0,animate:!0})}))}}});G.addInitHook("addHandler","dragging",ko),G.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ao=Mt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),N(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Y(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,o=t.scrollTop||e.scrollTop,l=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(l,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},o=this.keyCodes,l,f;for(l=0,f=o.left.length;l<f;l++)e[o.left[l]]=[-1*t,0];for(l=0,f=o.right.length;l<f;l++)e[o.right[l]]=[t,0];for(l=0,f=o.down.length;l<f;l++)e[o.down[l]]=[0,t];for(l=0,f=o.up.length;l<f;l++)e[o.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},o=this.keyCodes,l,f;for(l=0,f=o.zoomIn.length;l<f;l++)e[o.zoomIn[l]]=t;for(l=0,f=o.zoomOut.length;l<f;l++)e[o.zoomOut[l]]=-t},_addHooks:function(){N(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Y(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,o=this._map,l;if(e in this._panKeys){if(!o._panAnim||!o._panAnim._inProgress)if(l=this._panKeys[e],t.shiftKey&&(l=A(l).multiplyBy(3)),o.options.maxBounds&&(l=o._limitOffset(A(l),o.options.maxBounds)),o.options.worldCopyJump){var f=o.wrapLatLng(o.unproject(o.project(o.getCenter()).add(l)));o.panTo(f)}else o.panBy(l)}else if(e in this._zoomKeys)o.setZoom(o.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&o._popup&&o._popup.options.closeOnEscapeKey)o.closePopup();else return;Vt(t)}}});G.addInitHook("addHandler","keyboard",Ao),G.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Io=Mt.extend({addHooks:function(){N(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Y(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=io(t),o=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(o-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),l),Vt(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),o=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,m=o?Math.ceil(f/o)*o:f,y=t._limitZoom(e+(this._delta>0?m:-m))-e;this._delta=0,this._startTime=null,y&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+y):t.setZoomAround(this._lastMousePos,e+y))}});G.addInitHook("addHandler","scrollWheelZoom",Io);var La=600;G.mergeOptions({tapHold:k.touchNative&&k.safari&&k.mobile,tapTolerance:15});var Bo=Mt.extend({addHooks:function(){N(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Y(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var e=t.touches[0];this._startPos=this._newPos=new R(e.clientX,e.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(N(document,"touchend",ct),N(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))},this),La),N(document,"touchend touchcancel contextmenu",this._cancel,this),N(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Y(document,"touchend",ct),Y(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Y(document,"touchend touchcancel contextmenu",this._cancel,this),Y(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new R(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var o=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});o._simulated=!0,e.target.dispatchEvent(o)}});G.addInitHook("addHandler","tapHold",Bo),G.mergeOptions({touchZoom:k.touch,bounceAtZoomLimits:!0});var Ro=Mt.extend({addHooks:function(){Z(this._map._container,"leaflet-touch-zoom"),N(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){it(this._map._container,"leaflet-touch-zoom"),Y(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var o=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(o.add(l)._divideBy(2))),this._startDist=o.distanceTo(l),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),N(document,"touchmove",this._onTouchMove,this),N(document,"touchend touchcancel",this._onTouchEnd,this),ct(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,o=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]),f=o.distanceTo(l)/this._startDist;if(this._zoom=e.getScaleZoom(f,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&f<1||this._zoom>e.getMaxZoom()&&f>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var m=o._add(l)._divideBy(2)._subtract(this._centerPoint);if(f===1&&m.x===0&&m.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(m),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var y=a(e._move,e,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(y,this,!0),ct(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),Y(document,"touchmove",this._onTouchMove,this),Y(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});G.addInitHook("addHandler","touchZoom",Ro),G.BoxZoom=To,G.DoubleClickZoom=Eo,G.Drag=ko,G.Keyboard=Ao,G.ScrollWheelZoom=Io,G.TapHold=Bo,G.TouchZoom=Ro,n.Bounds=q,n.Browser=k,n.CRS=Bt,n.Canvas=Po,n.Circle=tn,n.CircleMarker=Qe,n.Class=nt,n.Control=xt,n.DivIcon=bo,n.DivOverlay=Tt,n.DomEvent=Zr,n.DomUtil=zr,n.Draggable=jt,n.Evented=Pt,n.FeatureGroup=Rt,n.GeoJSON=Nt,n.GridLayer=Me,n.Handler=Mt,n.Icon=ne,n.ImageOverlay=oi,n.LatLng=K,n.LatLngBounds=ut,n.Layer=Ct,n.LayerGroup=ie,n.LineUtil=Xr,n.Map=G,n.Marker=Ye,n.Mixin=Wr,n.Path=Gt,n.Point=R,n.PolyUtil=$r,n.Polygon=oe,n.Polyline=zt,n.Popup=si,n.PosAnimation=no,n.Projection=Yr,n.Rectangle=Mo,n.Renderer=Zt,n.SVG=Ee,n.SVGOverlay=wo,n.TileLayer=re,n.Tooltip=ri,n.Transformation=Si,n.Util=Ge,n.VideoOverlay=Lo,n.bind=a,n.bounds=lt,n.canvas=So,n.circle=ra,n.circleMarker=sa,n.control=Pe,n.divIcon=ma,n.extend=u,n.featureGroup=ia,n.geoJSON=yo,n.geoJson=la,n.gridLayer=_a,n.icon=na,n.imageOverlay=ua,n.latLng=j,n.latLngBounds=ot,n.layerGroup=ea,n.map=Dr,n.marker=oa,n.point=A,n.polygon=ha,n.polyline=aa,n.popup=da,n.rectangle=ya,n.setOptions=P,n.stamp=d,n.svg=Oo,n.svgOverlay=fa,n.tileLayer=xo,n.tooltip=pa,n.transformation=ge,n.version=r,n.videoOverlay=ca;var wa=window.L;n.noConflict=function(){return window.L=wa,this},window.L=n})}(Ie,Ie.exports)),Ie.exports}var wt=Ps();const Cn=ka(wt),Pn=Ea({__proto__:null,default:Cn},[wt]);var Be={exports:{}},Ia=Be.exports,Fo;function Ba(){return Fo||(Fo=1,function(h,i){(function(n,r){r(i)})(Ia,function(n){var r=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnEveryZoom:!1,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyShapePositions:null,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(s){L.Util.setOptions(this,s),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var a=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,a?this._withAnimation:this._noAnimation),this._markerCluster=a?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(s){if(s instanceof L.LayerGroup)return this.addLayers([s]);if(!s.getLatLng)return this._nonPointGroup.addLayer(s),this.fire("layeradd",{layer:s}),this;if(!this._map)return this._needsClustering.push(s),this.fire("layeradd",{layer:s}),this;if(this.hasLayer(s))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(s,this._maxZoom),this.fire("layeradd",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var a=s,c=this._zoom;if(s.__parent)for(;a.__parent._zoom>=c;)a=a.__parent;return this._currentShownBounds.contains(a.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(s,a):this._animationAddLayerNonAnimated(s,a)),this},removeLayer:function(s){return s instanceof L.LayerGroup?this.removeLayers([s]):s.getLatLng?this._map?s.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(s)),this._removeLayer(s,!0),this.fire("layerremove",{layer:s}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),s.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(s)&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,s)&&this.hasLayer(s)&&this._needsRemoving.push({layer:s,latlng:s._latlng}),this.fire("layerremove",{layer:s}),this):(this._nonPointGroup.removeLayer(s),this.fire("layerremove",{layer:s}),this)},addLayers:function(s,a){if(!L.Util.isArray(s))return this.addLayer(s);var c=this._featureGroup,d=this._nonPointGroup,p=this.options.chunkedLoading,g=this.options.chunkInterval,_=this.options.chunkProgress,v=s.length,w=0,x=!0,P;if(this._map){var O=new Date().getTime(),M=L.bind(function(){var I=new Date().getTime();for(this._map&&this._unspiderfy&&this._unspiderfy();w<v;w++){if(p&&w%200===0){var W=new Date().getTime()-I;if(W>g)break}if(P=s[w],P instanceof L.LayerGroup){x&&(s=s.slice(),x=!1),this._extractNonGroupLayers(P,s),v=s.length;continue}if(!P.getLatLng){d.addLayer(P),a||this.fire("layeradd",{layer:P});continue}if(!this.hasLayer(P)&&(this._addLayer(P,this._maxZoom),a||this.fire("layeradd",{layer:P}),P.__parent&&P.__parent.getChildCount()===2)){var F=P.__parent.getAllChildMarkers(),$=F[0]===P?F[1]:F[0];c.removeLayer($)}}_&&_(w,v,new Date().getTime()-O),w===v?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(M,this.options.chunkDelay)},this);M()}else for(var E=this._needsClustering;w<v;w++){if(P=s[w],P instanceof L.LayerGroup){x&&(s=s.slice(),x=!1),this._extractNonGroupLayers(P,s),v=s.length;continue}if(!P.getLatLng){d.addLayer(P);continue}this.hasLayer(P)||E.push(P)}return this},removeLayers:function(s){var a,c,d=s.length,p=this._featureGroup,g=this._nonPointGroup,_=!0;if(!this._map){for(a=0;a<d;a++){if(c=s[a],c instanceof L.LayerGroup){_&&(s=s.slice(),_=!1),this._extractNonGroupLayers(c,s),d=s.length;continue}this._arraySplice(this._needsClustering,c),g.removeLayer(c),this.hasLayer(c)&&this._needsRemoving.push({layer:c,latlng:c._latlng}),this.fire("layerremove",{layer:c})}return this}if(this._unspiderfy){this._unspiderfy();var v=s.slice(),w=d;for(a=0;a<w;a++){if(c=v[a],c instanceof L.LayerGroup){this._extractNonGroupLayers(c,v),w=v.length;continue}this._unspiderfyLayer(c)}}for(a=0;a<d;a++){if(c=s[a],c instanceof L.LayerGroup){_&&(s=s.slice(),_=!1),this._extractNonGroupLayers(c,s),d=s.length;continue}if(!c.__parent){g.removeLayer(c),this.fire("layerremove",{layer:c});continue}this._removeLayer(c,!0,!0),this.fire("layerremove",{layer:c}),p.hasLayer(c)&&(p.removeLayer(c),c.clusterShow&&c.clusterShow())}return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],this._needsRemoving=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(s){s.off(this._childMarkerEventHandlers,this),delete s.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var s=new L.LatLngBounds;this._topClusterLevel&&s.extend(this._topClusterLevel._bounds);for(var a=this._needsClustering.length-1;a>=0;a--)s.extend(this._needsClustering[a].getLatLng());return s.extend(this._nonPointGroup.getBounds()),s},eachLayer:function(s,a){var c=this._needsClustering.slice(),d=this._needsRemoving,p,g,_;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(c),g=c.length-1;g>=0;g--){for(p=!0,_=d.length-1;_>=0;_--)if(d[_].layer===c[g]){p=!1;break}p&&s.call(a,c[g])}this._nonPointGroup.eachLayer(s,a)},getLayers:function(){var s=[];return this.eachLayer(function(a){s.push(a)}),s},getLayer:function(s){var a=null;return s=parseInt(s,10),this.eachLayer(function(c){L.stamp(c)===s&&(a=c)}),a},hasLayer:function(s){if(!s)return!1;var a,c=this._needsClustering;for(a=c.length-1;a>=0;a--)if(c[a]===s)return!0;for(c=this._needsRemoving,a=c.length-1;a>=0;a--)if(c[a].layer===s)return!1;return!!(s.__parent&&s.__parent._group===this)||this._nonPointGroup.hasLayer(s)},zoomToShowLayer:function(s,a){var c=this._map;typeof a!="function"&&(a=function(){});var d=function(){(c.hasLayer(s)||c.hasLayer(s.__parent))&&!this._inZoomAnimation&&(this._map.off("moveend",d,this),this.off("animationend",d,this),c.hasLayer(s)?a():s.__parent._icon&&(this.once("spiderfied",a,this),s.__parent.spiderfy()))};s._icon&&this._map.getBounds().contains(s.getLatLng())?a():s.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",d,this),this._map.panTo(s.getLatLng())):(this._map.on("moveend",d,this),this.on("animationend",d,this),s.__parent.zoomToBounds())},onAdd:function(s){this._map=s;var a,c,d;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(s),this._nonPointGroup.addTo(s),this._gridClusters||this._generateInitialClusters(),this._maxLat=s.options.crs.projection.MAX_LATITUDE,a=0,c=this._needsRemoving.length;a<c;a++)d=this._needsRemoving[a],d.newlatlng=d.layer._latlng,d.layer._latlng=d.latlng;for(a=0,c=this._needsRemoving.length;a<c;a++)d=this._needsRemoving[a],this._removeLayer(d.layer,!0),d.layer._latlng=d.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c,!0)},onRemove:function(s){s.off("zoomend",this._zoomEnd,this),s.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(s){for(var a=s;a&&!a._icon;)a=a.__parent;return a||null},_arraySplice:function(s,a){for(var c=s.length-1;c>=0;c--)if(s[c]===a)return s.splice(c,1),!0},_removeFromGridUnclustered:function(s,a){for(var c=this._map,d=this._gridUnclustered,p=Math.floor(this._map.getMinZoom());a>=p&&d[a].removeObject(s,c.project(s.getLatLng(),a));a--);},_childMarkerDragStart:function(s){s.target.__dragStart=s.target._latlng},_childMarkerMoved:function(s){if(!this._ignoreMove&&!s.target.__dragStart){var a=s.target._popup&&s.target._popup.isOpen();this._moveChild(s.target,s.oldLatLng,s.latlng),a&&s.target.openPopup()}},_moveChild:function(s,a,c){s._latlng=a,this.removeLayer(s),s._latlng=c,this.addLayer(s)},_childMarkerDragEnd:function(s){var a=s.target.__dragStart;delete s.target.__dragStart,a&&this._moveChild(s.target,a,s.target._latlng)},_removeLayer:function(s,a,c){var d=this._gridClusters,p=this._gridUnclustered,g=this._featureGroup,_=this._map,v=Math.floor(this._map.getMinZoom());a&&this._removeFromGridUnclustered(s,this._maxZoom);var w=s.__parent,x=w._markers,P;for(this._arraySplice(x,s);w&&(w._childCount--,w._boundsNeedUpdate=!0,!(w._zoom<v));)a&&w._childCount<=1?(P=w._markers[0]===s?w._markers[1]:w._markers[0],d[w._zoom].removeObject(w,_.project(w._cLatLng,w._zoom)),p[w._zoom].addObject(P,_.project(P.getLatLng(),w._zoom)),this._arraySplice(w.__parent._childClusters,w),w.__parent._markers.push(P),P.__parent=w.__parent,w._icon&&(g.removeLayer(w),c||g.addLayer(P))):w._iconNeedsUpdate=!0,w=w.__parent;delete s.__parent},_isOrIsParent:function(s,a){for(;a;){if(s===a)return!0;a=a.parentNode}return!1},fire:function(s,a,c){if(a&&a.layer instanceof L.MarkerCluster){if(a.originalEvent&&this._isOrIsParent(a.layer._icon,a.originalEvent.relatedTarget))return;s="cluster"+s}L.FeatureGroup.prototype.fire.call(this,s,a,c)},listens:function(s,a){return L.FeatureGroup.prototype.listens.call(this,s,a)||L.FeatureGroup.prototype.listens.call(this,"cluster"+s,a)},_defaultIconCreateFunction:function(s){var a=s.getChildCount(),c=" marker-cluster-";return a<10?c+="small":a<100?c+="medium":c+="large",new L.DivIcon({html:"<div><span>"+a+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var s=this._map,a=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,d=this.options.zoomToBoundsOnClick,p=this.options.spiderfyOnEveryZoom;(a||d||p)&&this.on("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),s.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(s){var a=s.layer,c=a;if(!(s.type==="clusterkeypress"&&s.originalEvent&&s.originalEvent.keyCode!==13)){for(;c._childClusters.length===1;)c=c._childClusters[0];c._zoom===this._maxZoom&&c._childCount===a._childCount&&this.options.spiderfyOnMaxZoom?a.spiderfy():this.options.zoomToBoundsOnClick&&a.zoomToBounds(),this.options.spiderfyOnEveryZoom&&a.spiderfy(),s.originalEvent&&s.originalEvent.keyCode===13&&this._map._container.focus()}},_showCoverage:function(s){var a=this._map;this._inZoomAnimation||(this._shownPolygon&&a.removeLayer(this._shownPolygon),s.layer.getChildCount()>2&&s.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(s.layer.getConvexHull(),this.options.polygonOptions),a.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var s=this.options.spiderfyOnMaxZoom,a=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,d=this.options.spiderfyOnEveryZoom,p=this._map;(s||c||d)&&this.off("clusterclick clusterkeypress",this._zoomOrSpiderfy,this),a&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),p.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var s=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,s),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),s),this._currentShownBounds=s}},_generateInitialClusters:function(){var s=Math.ceil(this._map.getMaxZoom()),a=Math.floor(this._map.getMinZoom()),c=this.options.maxClusterRadius,d=c;typeof c!="function"&&(d=function(){return c}),this.options.disableClusteringAtZoom!==null&&(s=this.options.disableClusteringAtZoom-1),this._maxZoom=s,this._gridClusters={},this._gridUnclustered={};for(var p=s;p>=a;p--)this._gridClusters[p]=new L.DistanceGrid(d(p)),this._gridUnclustered[p]=new L.DistanceGrid(d(p));this._topClusterLevel=new this._markerCluster(this,a-1)},_addLayer:function(s,a){var c=this._gridClusters,d=this._gridUnclustered,p=Math.floor(this._map.getMinZoom()),g,_;for(this.options.singleMarkerMode&&this._overrideMarkerIcon(s),s.on(this._childMarkerEventHandlers,this);a>=p;a--){g=this._map.project(s.getLatLng(),a);var v=c[a].getNearObject(g);if(v){v._addChild(s),s.__parent=v;return}if(v=d[a].getNearObject(g),v){var w=v.__parent;w&&this._removeLayer(v,!1);var x=new this._markerCluster(this,a,v,s);c[a].addObject(x,this._map.project(x._cLatLng,a)),v.__parent=x,s.__parent=x;var P=x;for(_=a-1;_>w._zoom;_--)P=new this._markerCluster(this,_,P),c[_].addObject(P,this._map.project(v.getLatLng(),_));w._addChild(P),this._removeFromGridUnclustered(v,a);return}d[a].addObject(s,g)}this._topClusterLevel._addChild(s),s.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(s){s instanceof L.MarkerCluster&&s._iconNeedsUpdate&&s._updateIcon()})},_enqueue:function(s){this._queue.push(s),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var s=0;s<this._queue.length;s++)this._queue[s].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var s=Math.round(this._map._zoom);this._processQueue(),this._zoom<s&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,s)):this._zoom>s?(this._animationStart(),this._animationZoomOut(this._zoom,s)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(this.options.removeOutsideVisibleBounds){if(L.Browser.mobile)return this._checkBoundsMaxLat(this._map.getBounds())}else return this._mapBoundsInfinite;return this._checkBoundsMaxLat(this._map.getBounds().pad(1))},_checkBoundsMaxLat:function(s){var a=this._maxLat;return a!==void 0&&(s.getNorth()>=a&&(s._northEast.lat=1/0),s.getSouth()<=-a&&(s._southWest.lat=-1/0)),s},_animationAddLayerNonAnimated:function(s,a){if(a===s)this._featureGroup.addLayer(s);else if(a._childCount===2){a._addToMap();var c=a.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else a._updateIcon()},_extractNonGroupLayers:function(s,a){var c=s.getLayers(),d=0,p;for(a=a||[];d<c.length;d++){if(p=c[d],p instanceof L.LayerGroup){this._extractNonGroupLayers(p,a);continue}a.push(p)}return a},_overrideMarkerIcon:function(s){var a=s.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[s]}});return a}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(s,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(s,a){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(s,a){this._animationAddLayerNonAnimated(s,a)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(s,a){var c=this._getExpandedVisibleBounds(),d=this._featureGroup,p=Math.floor(this._map.getMinZoom()),g;this._ignoreMove=!0,this._topClusterLevel._recursively(c,s,p,function(_){var v=_._latlng,w=_._markers,x;for(c.contains(v)||(v=null),_._isSingleParent()&&s+1===a?(d.removeLayer(_),_._recursivelyAddChildrenToMap(null,a,c)):(_.clusterHide(),_._recursivelyAddChildrenToMap(v,a,c)),g=w.length-1;g>=0;g--)x=w[g],c.contains(x._latlng)||d.removeLayer(x)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(c,a),d.eachLayer(function(_){!(_ instanceof L.MarkerCluster)&&_._icon&&_.clusterShow()}),this._topClusterLevel._recursively(c,s,a,function(_){_._recursivelyRestoreChildPositions(a)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(c,s,p,function(_){d.removeLayer(_),_.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(s,a){this._animationZoomOutSingle(this._topClusterLevel,s-1,a),this._topClusterLevel._recursivelyAddChildrenToMap(null,a,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),s,this._getExpandedVisibleBounds())},_animationAddLayer:function(s,a){var c=this,d=this._featureGroup;d.addLayer(s),a!==s&&(a._childCount>2?(a._updateIcon(),this._forceLayout(),this._animationStart(),s._setPos(this._map.latLngToLayerPoint(a.getLatLng())),s.clusterHide(),this._enqueue(function(){d.removeLayer(s),s.clusterShow(),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(a,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(s,a,c){var d=this._getExpandedVisibleBounds(),p=Math.floor(this._map.getMinZoom());s._recursivelyAnimateChildrenInAndAddSelfToMap(d,p,a+1,c);var g=this;this._forceLayout(),s._recursivelyBecomeVisible(d,c),this._enqueue(function(){if(s._childCount===1){var _=s._markers[0];this._ignoreMove=!0,_.setLatLng(_.getLatLng()),this._ignoreMove=!1,_.clusterShow&&_.clusterShow()}else s._recursively(d,c,p,function(v){v._recursivelyRemoveChildrenFromMap(d,p,a+1)});g._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(s){return new L.MarkerClusterGroup(s)};var u=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(s,a,c,d){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this,pane:s.options.clusterPane}),this._group=s,this._zoom=a,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),d&&this._addChild(d)},getAllChildMarkers:function(s,a){s=s||[];for(var c=this._childClusters.length-1;c>=0;c--)this._childClusters[c].getAllChildMarkers(s,a);for(var d=this._markers.length-1;d>=0;d--)a&&this._markers[d].__dragStart||s.push(this._markers[d]);return s},getChildCount:function(){return this._childCount},zoomToBounds:function(s){for(var a=this._childClusters.slice(),c=this._group._map,d=c.getBoundsZoom(this._bounds),p=this._zoom+1,g=c.getZoom(),_;a.length>0&&d>p;){p++;var v=[];for(_=0;_<a.length;_++)v=v.concat(a[_]._childClusters);a=v}d>p?this._group._map.setView(this._latlng,p):d<=g?this._group._map.setView(this._latlng,g+1):this._group._map.fitBounds(this._bounds,s)},getBounds:function(){var s=new L.LatLngBounds;return s.extend(this._bounds),s},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(s,a){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(s),s instanceof L.MarkerCluster?(a||(this._childClusters.push(s),s.__parent=this),this._childCount+=s._childCount):(a||this._markers.push(s),this._childCount++),this.__parent&&this.__parent._addChild(s,!0)},_setClusterCenter:function(s){this._cLatLng||(this._cLatLng=s._cLatLng||s._latlng)},_resetBounds:function(){var s=this._bounds;s._southWest&&(s._southWest.lat=1/0,s._southWest.lng=1/0),s._northEast&&(s._northEast.lat=-1/0,s._northEast.lng=-1/0)},_recalculateBounds:function(){var s=this._markers,a=this._childClusters,c=0,d=0,p=this._childCount,g,_,v,w;if(p!==0){for(this._resetBounds(),g=0;g<s.length;g++)v=s[g]._latlng,this._bounds.extend(v),c+=v.lat,d+=v.lng;for(g=0;g<a.length;g++)_=a[g],_._boundsNeedUpdate&&_._recalculateBounds(),this._bounds.extend(_._bounds),v=_._wLatLng,w=_._childCount,c+=v.lat*w,d+=v.lng*w;this._latlng=this._wLatLng=new L.LatLng(c/p,d/p),this._boundsNeedUpdate=!1}},_addToMap:function(s){s&&(this._backupLatlng=this._latlng,this.setLatLng(s)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(s,a,c){this._recursively(s,this._group._map.getMinZoom(),c-1,function(d){var p=d._markers,g,_;for(g=p.length-1;g>=0;g--)_=p[g],_._icon&&(_._setPos(a),_.clusterHide())},function(d){var p=d._childClusters,g,_;for(g=p.length-1;g>=0;g--)_=p[g],_._icon&&(_._setPos(a),_.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(s,a,c,d){this._recursively(s,d,a,function(p){p._recursivelyAnimateChildrenIn(s,p._group._map.latLngToLayerPoint(p.getLatLng()).round(),c),p._isSingleParent()&&c-1===d?(p.clusterShow(),p._recursivelyRemoveChildrenFromMap(s,a,c)):p.clusterHide(),p._addToMap()})},_recursivelyBecomeVisible:function(s,a){this._recursively(s,this._group._map.getMinZoom(),a,null,function(c){c.clusterShow()})},_recursivelyAddChildrenToMap:function(s,a,c){this._recursively(c,this._group._map.getMinZoom()-1,a,function(d){if(a!==d._zoom)for(var p=d._markers.length-1;p>=0;p--){var g=d._markers[p];c.contains(g._latlng)&&(s&&(g._backupLatlng=g.getLatLng(),g.setLatLng(s),g.clusterHide&&g.clusterHide()),d._group._featureGroup.addLayer(g))}},function(d){d._addToMap(s)})},_recursivelyRestoreChildPositions:function(s){for(var a=this._markers.length-1;a>=0;a--){var c=this._markers[a];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(s-1===this._zoom)for(var d=this._childClusters.length-1;d>=0;d--)this._childClusters[d]._restorePosition();else for(var p=this._childClusters.length-1;p>=0;p--)this._childClusters[p]._recursivelyRestoreChildPositions(s)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(s,a,c,d){var p,g;this._recursively(s,a-1,c-1,function(_){for(g=_._markers.length-1;g>=0;g--)p=_._markers[g],(!d||!d.contains(p._latlng))&&(_._group._featureGroup.removeLayer(p),p.clusterShow&&p.clusterShow())},function(_){for(g=_._childClusters.length-1;g>=0;g--)p=_._childClusters[g],(!d||!d.contains(p._latlng))&&(_._group._featureGroup.removeLayer(p),p.clusterShow&&p.clusterShow())})},_recursively:function(s,a,c,d,p){var g=this._childClusters,_=this._zoom,v,w;if(a<=_&&(d&&d(this),p&&_===c&&p(this)),_<a||_<c)for(v=g.length-1;v>=0;v--)w=g[v],w._boundsNeedUpdate&&w._recalculateBounds(),s.intersects(w._bounds)&&w._recursively(s,a,c,d,p)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){var s=this.options.opacity;return this.setOpacity(0),this.options.opacity=s,this},clusterShow:function(){return this.setOpacity(this.options.opacity)}}),L.DistanceGrid=function(s){this._cellSize=s,this._sqCellSize=s*s,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(s,a){var c=this._getCoord(a.x),d=this._getCoord(a.y),p=this._grid,g=p[d]=p[d]||{},_=g[c]=g[c]||[],v=L.Util.stamp(s);this._objectPoint[v]=a,_.push(s)},updateObject:function(s,a){this.removeObject(s),this.addObject(s,a)},removeObject:function(s,a){var c=this._getCoord(a.x),d=this._getCoord(a.y),p=this._grid,g=p[d]=p[d]||{},_=g[c]=g[c]||[],v,w;for(delete this._objectPoint[L.Util.stamp(s)],v=0,w=_.length;v<w;v++)if(_[v]===s)return _.splice(v,1),w===1&&delete g[c],!0},eachObject:function(s,a){var c,d,p,g,_,v,w,x=this._grid;for(c in x){_=x[c];for(d in _)for(v=_[d],p=0,g=v.length;p<g;p++)w=s.call(a,v[p]),w&&(p--,g--)}},getNearObject:function(s){var a=this._getCoord(s.x),c=this._getCoord(s.y),d,p,g,_,v,w,x,P,O=this._objectPoint,M=this._sqCellSize,E=null;for(d=c-1;d<=c+1;d++)if(_=this._grid[d],_){for(p=a-1;p<=a+1;p++)if(v=_[p],v)for(g=0,w=v.length;g<w;g++)x=v[g],P=this._sqDist(O[L.Util.stamp(x)],s),(P<M||P<=M&&E===null)&&(M=P,E=x)}return E},_getCoord:function(s){var a=Math.floor(s/this._cellSize);return isFinite(a)?a:s},_sqDist:function(s,a){var c=a.x-s.x,d=a.y-s.y;return c*c+d*d}},function(){L.QuickHull={getDistant:function(s,a){var c=a[1].lat-a[0].lat,d=a[0].lng-a[1].lng;return d*(s.lat-a[0].lat)+c*(s.lng-a[0].lng)},findMostDistantPointFromBaseLine:function(s,a){var c=0,d=null,p=[],g,_,v;for(g=a.length-1;g>=0;g--){if(_=a[g],v=this.getDistant(_,s),v>0)p.push(_);else continue;v>c&&(c=v,d=_)}return{maxPoint:d,newPoints:p}},buildConvexHull:function(s,a){var c=[],d=this.findMostDistantPointFromBaseLine(s,a);return d.maxPoint?(c=c.concat(this.buildConvexHull([s[0],d.maxPoint],d.newPoints)),c=c.concat(this.buildConvexHull([d.maxPoint,s[1]],d.newPoints)),c):[s[0]]},getConvexHull:function(s){var a=!1,c=!1,d=!1,p=!1,g=null,_=null,v=null,w=null,x=null,P=null,O;for(O=s.length-1;O>=0;O--){var M=s[O];(a===!1||M.lat>a)&&(g=M,a=M.lat),(c===!1||M.lat<c)&&(_=M,c=M.lat),(d===!1||M.lng>d)&&(v=M,d=M.lng),(p===!1||M.lng<p)&&(w=M,p=M.lng)}c!==a?(P=_,x=g):(P=w,x=v);var E=[].concat(this.buildConvexHull([P,x],s),this.buildConvexHull([x,P],s));return E}}}(),L.MarkerCluster.include({getConvexHull:function(){var s=this.getAllChildMarkers(),a=[],c,d;for(d=s.length-1;d>=0;d--)c=s[d].getLatLng(),a.push(c);return L.QuickHull.getConvexHull(a)}}),L.MarkerCluster.include({_2PI:Math.PI*2,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(!(this._group._spiderfied===this||this._group._inZoomAnimation)){var s=this.getAllChildMarkers(null,!0),a=this._group,c=a._map,d=c.latLngToLayerPoint(this._latlng),p;this._group._unspiderfy(),this._group._spiderfied=this,this._group.options.spiderfyShapePositions?p=this._group.options.spiderfyShapePositions(s.length,d):s.length>=this._circleSpiralSwitchover?p=this._generatePointsSpiral(s.length,d):(d.y+=10,p=this._generatePointsCircle(s.length,d)),this._animationSpiderfy(s,p)}},unspiderfy:function(s){this._group._inZoomAnimation||(this._animationUnspiderfy(s),this._group._spiderfied=null)},_generatePointsCircle:function(s,a){var c=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+s),d=c/this._2PI,p=this._2PI/s,g=[],_,v;for(d=Math.max(d,35),g.length=s,_=0;_<s;_++)v=this._circleStartAngle+_*p,g[_]=new L.Point(a.x+d*Math.cos(v),a.y+d*Math.sin(v))._round();return g},_generatePointsSpiral:function(s,a){var c=this._group.options.spiderfyDistanceMultiplier,d=c*this._spiralLengthStart,p=c*this._spiralFootSeparation,g=c*this._spiralLengthFactor*this._2PI,_=0,v=[],w;for(v.length=s,w=s;w>=0;w--)w<s&&(v[w]=new L.Point(a.x+d*Math.cos(_),a.y+d*Math.sin(_))._round()),_+=p/d+w*5e-4,d+=g/_;return v},_noanimationUnspiderfy:function(){var s=this._group,a=s._map,c=s._featureGroup,d=this.getAllChildMarkers(null,!0),p,g;for(s._ignoreMove=!0,this.setOpacity(1),g=d.length-1;g>=0;g--)p=d[g],c.removeLayer(p),p._preSpiderfyLatlng&&(p.setLatLng(p._preSpiderfyLatlng),delete p._preSpiderfyLatlng),p.setZIndexOffset&&p.setZIndexOffset(0),p._spiderLeg&&(a.removeLayer(p._spiderLeg),delete p._spiderLeg);s.fire("unspiderfied",{cluster:this,markers:d}),s._ignoreMove=!1,s._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(s,a){var c=this._group,d=c._map,p=c._featureGroup,g=this._group.options.spiderLegPolylineOptions,_,v,w,x;for(c._ignoreMove=!0,_=0;_<s.length;_++)x=d.layerPointToLatLng(a[_]),v=s[_],w=new L.Polyline([this._latlng,x],g),d.addLayer(w),v._spiderLeg=w,v._preSpiderfyLatlng=v._latlng,v.setLatLng(x),v.setZIndexOffset&&v.setZIndexOffset(1e6),p.addLayer(v);this.setOpacity(.3),c._ignoreMove=!1,c.fire("spiderfied",{cluster:this,markers:s})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(s,a){var c=this,d=this._group,p=d._map,g=d._featureGroup,_=this._latlng,v=p.latLngToLayerPoint(_),w=L.Path.SVG,x=L.extend({},this._group.options.spiderLegPolylineOptions),P=x.opacity,O,M,E,I,W,F;for(P===void 0&&(P=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),w?(x.opacity=0,x.className=(x.className||"")+" leaflet-cluster-spider-leg"):x.opacity=P,d._ignoreMove=!0,O=0;O<s.length;O++)M=s[O],F=p.layerPointToLatLng(a[O]),E=new L.Polyline([_,F],x),p.addLayer(E),M._spiderLeg=E,w&&(I=E._path,W=I.getTotalLength()+.1,I.style.strokeDasharray=W,I.style.strokeDashoffset=W),M.setZIndexOffset&&M.setZIndexOffset(1e6),M.clusterHide&&M.clusterHide(),g.addLayer(M),M._setPos&&M._setPos(v);for(d._forceLayout(),d._animationStart(),O=s.length-1;O>=0;O--)F=p.layerPointToLatLng(a[O]),M=s[O],M._preSpiderfyLatlng=M._latlng,M.setLatLng(F),M.clusterShow&&M.clusterShow(),w&&(E=M._spiderLeg,I=E._path,I.style.strokeDashoffset=0,E.setStyle({opacity:P}));this.setOpacity(.3),d._ignoreMove=!1,setTimeout(function(){d._animationEnd(),d.fire("spiderfied",{cluster:c,markers:s})},200)},_animationUnspiderfy:function(s){var a=this,c=this._group,d=c._map,p=c._featureGroup,g=s?d._latLngToNewLayerPoint(this._latlng,s.zoom,s.center):d.latLngToLayerPoint(this._latlng),_=this.getAllChildMarkers(null,!0),v=L.Path.SVG,w,x,P,O,M,E;for(c._ignoreMove=!0,c._animationStart(),this.setOpacity(1),x=_.length-1;x>=0;x--)w=_[x],w._preSpiderfyLatlng&&(w.closePopup(),w.setLatLng(w._preSpiderfyLatlng),delete w._preSpiderfyLatlng,E=!0,w._setPos&&(w._setPos(g),E=!1),w.clusterHide&&(w.clusterHide(),E=!1),E&&p.removeLayer(w),v&&(P=w._spiderLeg,O=P._path,M=O.getTotalLength()+.1,O.style.strokeDashoffset=M,P.setStyle({opacity:0})));c._ignoreMove=!1,setTimeout(function(){var I=0;for(x=_.length-1;x>=0;x--)w=_[x],w._spiderLeg&&I++;for(x=_.length-1;x>=0;x--)w=_[x],w._spiderLeg&&(w.clusterShow&&w.clusterShow(),w.setZIndexOffset&&w.setZIndexOffset(0),I>1&&p.removeLayer(w),d.removeLayer(w._spiderLeg),delete w._spiderLeg);c._animationEnd(),c.fire("unspiderfied",{cluster:a,markers:_})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(s){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(s))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(s){this._spiderfied&&this._spiderfied.unspiderfy(s)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(s){s._spiderLeg&&(this._featureGroup.removeLayer(s),s.clusterShow&&s.clusterShow(),s.setZIndexOffset&&s.setZIndexOffset(0),this._map.removeLayer(s._spiderLeg),delete s._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(s){return s?s instanceof L.MarkerClusterGroup?s=s._topClusterLevel.getAllChildMarkers():s instanceof L.LayerGroup?s=s._layers:s instanceof L.MarkerCluster?s=s.getAllChildMarkers():s instanceof L.Marker&&(s=[s]):s=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(s),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(s),this},_flagParentsIconsNeedUpdate:function(s){var a,c;for(a in s)for(c=s[a].__parent;c;)c._iconNeedsUpdate=!0,c=c.__parent},_refreshSingleMarkerModeMarkers:function(s){var a,c;for(a in s)c=s[a],this.hasLayer(c)&&c.setIcon(this._overrideMarkerIcon(c))}}),L.Marker.include({refreshIconOptions:function(s,a){var c=this.options.icon;return L.setOptions(c,s),this.setIcon(c),a&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),n.MarkerClusterGroup=r,n.MarkerCluster=u,Object.defineProperty(n,"__esModule",{value:!0})})}(Be,Be.exports)),Be.exports}Ba();var fi={exports:{}};/*!
 Leaflet.MarkerCluster.LayerSupport 2.0.1+649b3a9
 (c) 2015-2018 Boris Seang
 License MIT
 */var Ra=fi.exports,Uo;function za(){return Uo||(Uo=1,function(h){(function(i,n){n(h.exports?Ps():i.L)})(Ra,function(i,n){i.MarkerClusterGroup.LayerSupport=i.MarkerClusterGroup.extend({options:{singleAddRemoveBufferDuration:0},initialize:function(a){i.MarkerClusterGroup.prototype.initialize.call(this,a),this._featureGroup=new r,this._featureGroup.addEventParent(this),this._nonPointGroup=new r,this._nonPointGroup.addEventParent(this),this._layers={},this._proxyLayerGroups={},this._proxyLayerGroupsNeedRemoving={},this._singleAddRemoveBuffer=[]},checkIn:function(a){var c=this._toArray(a);return this._checkInGetSeparated(c),this},checkOut:function(a){var c,d,p=this._toArray(a),g=this._separateSingleFromGroupLayers(p,{groups:[],singles:[]}),_=g.groups,v=g.singles;for(c=0;c<v.length;c++)d=v[c],delete this._layers[i.stamp(d)],delete d._mcgLayerSupportGroup;for(this._originalRemoveLayers(v),c=0;c<_.length;c++)d=_[c],this._dismissProxyLayerGroup(d);return this},addLayers:function(a){var c,d,p,g=this._toArray(a),_=this._checkInGetSeparated(g),v=_.groups;for(this._originalAddLayers(_.singles),c=0;c<v.length;c++)d=v[c],p=i.stamp(d),this._proxyLayerGroups[p]=d,delete this._proxyLayerGroupsNeedRemoving[p],this._map&&this._map._originalAddLayer(d)},addLayer:function(a){return this._bufferSingleAddRemove(a,"addLayers"),this},_originalAddLayer:i.MarkerClusterGroup.prototype.addLayer,_originalAddLayers:i.MarkerClusterGroup.prototype.addLayers,removeLayers:function(a){var c,d,p=this._toArray(a),g=this._separateSingleFromGroupLayers(p,{groups:[],singles:[]}),_=g.groups,v=g.singles,w=0;for(this._originalRemoveLayers(v);w<_.length;w++)c=_[w],d=i.stamp(c),delete this._proxyLayerGroups[d],this._map?this._map._originalRemoveLayer(c):this._proxyLayerGroupsNeedRemoving[d]=c;return this},removeLayer:function(a){return this._bufferSingleAddRemove(a,"removeLayers"),this},_originalRemoveLayer:i.MarkerClusterGroup.prototype.removeLayer,_originalRemoveLayers:i.MarkerClusterGroup.prototype.removeLayers,onAdd:function(a){a._originalAddLayer=a._originalAddLayer||a.addLayer,a._originalRemoveLayer=a._originalRemoveLayer||a.removeLayer,i.extend(a,s);var c,d,p,g=this._removePreAddedLayers(a);this._originalOnAdd.call(this,a);for(c in this._proxyLayerGroups)d=this._proxyLayerGroups[c],a._originalAddLayer(d);for(c in this._proxyLayerGroupsNeedRemoving)d=this._proxyLayerGroupsNeedRemoving[c],a._originalRemoveLayer(d),delete this._proxyLayerGroupsNeedRemoving[c];for(p=0;p<g.length;p++)a.addLayer(g[p])},_originalOnAdd:i.MarkerClusterGroup.prototype.onAdd,_bufferSingleAddRemove:function(a,c){var d,p=this.options.singleAddRemoveBufferDuration;p>0?(this._singleAddRemoveBuffer.push({type:c,layer:a}),this._singleAddRemoveBufferTimeout||(d=i.bind(this._processSingleAddRemoveBuffer,this),this._singleAddRemoveBufferTimeout=setTimeout(d,p))):this[c](a)},_processSingleAddRemoveBuffer:function(){for(var a,c,d=this._singleAddRemoveBuffer,p=0,g=[];p<d.length;p++)a=d[p],c||(c=a.type),a.type===c?g.push(a.layer):(this[c](g),c=a.type,g=[a.layer]);this[c](g),d.length=0,clearTimeout(this._singleAddRemoveBufferTimeout),this._singleAddRemoveBufferTimeout=null},_checkInGetSeparated:function(a){var c,d,p=this._separateSingleFromGroupLayers(a,{groups:[],singles:[]}),g=p.groups,_=p.singles;for(c=0;c<g.length;c++)d=g[c],this._recruitLayerGroupAsProxy(d);for(c=0;c<_.length;c++)d=_[c],this._removeFromOtherGroupsOrMap(d),this._layers[i.stamp(d)]=d,d._mcgLayerSupportGroup=this;return p},_separateSingleFromGroupLayers:function(a,c){for(var d,p=c.groups,g=c.singles,_=i.Util.isArray,v=0;v<a.length;v++)d=a[v],d instanceof i.LayerGroup?(p.push(d),this._separateSingleFromGroupLayers(d.getLayers(),c)):_(d)?this._separateSingleFromGroupLayers(d,c):g.push(d);return c},_recruitLayerGroupAsProxy:function(a){var c=a._proxyMcgLayerSupportGroup;if(c){if(c===this)return;c.checkOut(a)}else this._removeFromOwnMap(a);a._proxyMcgLayerSupportGroup=this,a._originalAddLayer=a._originalAddLayer||a.addLayer,a._originalRemoveLayer=a._originalRemoveLayer||a.removeLayer,a._originalOnAdd=a._originalOnAdd||a.onAdd,a._originalOnRemove=a._originalOnRemove||a.onRemove,i.extend(a,u)},_dismissProxyLayerGroup:function(a){if(a._proxyMcgLayerSupportGroup!==n&&a._proxyMcgLayerSupportGroup===this){delete a._proxyMcgLayerSupportGroup,a.addLayer=a._originalAddLayer,a.removeLayer=a._originalRemoveLayer,a.onAdd=a._originalOnAdd,a.onRemove=a._originalOnRemove;var c=i.stamp(a);delete this._proxyLayerGroups[c],delete this._proxyLayerGroupsNeedRemoving[c],this._removeFromOwnMap(a)}},_removeFromOtherGroupsOrMap:function(a){var c=a._mcgLayerSupportGroup;if(c){if(c===this)return;c.checkOut(a)}else a.__parent?a.__parent._group.removeLayer(a):this._removeFromOwnMap(a)},_removeFromOwnMap:function(a){a._map&&a._map.removeLayer(a)},_removePreAddedLayers:function(a){var c,d=this._layers,p=[];for(var g in d)c=d[g],c._map&&(p.push(c),a._originalRemoveLayer(c));return p},_toArray:function(a){return i.Util.isArray(a)?a:[a]}});var r=i.FeatureGroup.extend({addLayer:function(a){if(this.hasLayer(a))return this;a.addEventParent(this);var c=i.stamp(a);return this._layers[c]=a,this._map&&this._map._originalAddLayer(a),this.fire("layeradd",{layer:a})},removeLayer:function(a){if(!this.hasLayer(a))return this;a in this._layers&&(a=this._layers[a]),a.removeEventParent(this);var c=i.stamp(a);return this._map&&this._layers[c]&&this._map._originalRemoveLayer(this._layers[c]),delete this._layers[c],this.fire("layerremove",{layer:a})},onAdd:function(a){this._map=a,this.eachLayer(a._originalAddLayer,a)},onRemove:function(a){this.eachLayer(a._originalRemoveLayer,a),this._map=null}}),u={addLayer:function(a){var c=this.getLayerId(a);return this._layers[c]=a,this._map?this._proxyMcgLayerSupportGroup.addLayer(a):this._proxyMcgLayerSupportGroup.checkIn(a),this},removeLayer:function(a){var c=a in this._layers?a:this.getLayerId(a);return this._proxyMcgLayerSupportGroup.removeLayer(a),delete this._layers[c],this},onAdd:function(){this._proxyMcgLayerSupportGroup.addLayers(this.getLayers())},onRemove:function(){this._proxyMcgLayerSupportGroup.removeLayers(this.getLayers())}},s={addLayer:function(a){return a._mcgLayerSupportGroup?a._mcgLayerSupportGroup._originalAddLayer(a):this._originalAddLayer(a)},removeLayer:function(a){return a._mcgLayerSupportGroup?a._mcgLayerSupportGroup._originalRemoveLayer(a):this._originalRemoveLayer(a)}};i.markerClusterGroup.layerSupport=function(a){return new i.MarkerClusterGroup.LayerSupport(a)}})}(fi)),fi.exports}za();(function(){L.Control.EasyBar=L.Control.extend({options:{position:"topleft",id:null,leafletClasses:!0},initialize:function(n,r){r&&L.Util.setOptions(this,r),this._buildContainer(),this._buttons=[];for(var u=0;u<n.length;u++)n[u]._bar=this,n[u]._container=n[u].button,this._buttons.push(n[u]),this.container.appendChild(n[u].button)},_buildContainer:function(){this._container=this.container=L.DomUtil.create("div",""),this.options.leafletClasses&&L.DomUtil.addClass(this.container,"leaflet-bar easy-button-container leaflet-control"),this.options.id&&(this.container.id=this.options.id)},enable:function(){return L.DomUtil.addClass(this.container,"enabled"),L.DomUtil.removeClass(this.container,"disabled"),this.container.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.container,"disabled"),L.DomUtil.removeClass(this.container,"enabled"),this.container.setAttribute("aria-hidden","true"),this},onAdd:function(){return this.container},addTo:function(n){this._map=n;for(var r=0;r<this._buttons.length;r++)this._buttons[r]._map=n;var u=this._container=this.onAdd(n),s=this.getPosition(),a=n._controlCorners[s];return L.DomUtil.addClass(u,"leaflet-control"),s.indexOf("bottom")!==-1?a.insertBefore(u,a.firstChild):a.appendChild(u),this}}),L.easyBar=function(){for(var n=[L.Control.EasyBar],r=0;r<arguments.length;r++)n.push(arguments[r]);return new(Function.prototype.bind.apply(L.Control.EasyBar,n))},L.Control.EasyButton=L.Control.extend({options:{position:"topleft",id:null,type:"replace",states:[],leafletClasses:!0,tagName:"button"},initialize:function(n,r,u,s){this.options.states=[],s!=null&&(this.options.id=s),this.storage={},typeof arguments[arguments.length-1]=="object"&&L.Util.setOptions(this,arguments[arguments.length-1]),this.options.states.length===0&&typeof n=="string"&&typeof r=="function"&&this.options.states.push({icon:n,onClick:r,title:typeof u=="string"?u:""}),this._states=[];for(var a=0;a<this.options.states.length;a++)this._states.push(new h(this.options.states[a],this));this._buildButton(),this._activateState(this._states[0])},_buildButton:function(){if(this.button=L.DomUtil.create(this.options.tagName,""),this.options.tagName==="button"&&this.button.setAttribute("type","button"),this.options.id&&(this.button.id=this.options.id),this.options.leafletClasses&&L.DomUtil.addClass(this.button,"easy-button-button leaflet-bar-part leaflet-interactive"),L.DomEvent.addListener(this.button,"dblclick",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mousedown",L.DomEvent.stop),L.DomEvent.addListener(this.button,"mouseup",L.DomEvent.stop),L.DomEvent.addListener(this.button,"click",function(r){L.DomEvent.stop(r),this._currentState.onClick(this,this._map?this._map:null),this._map&&this._map.getContainer().focus()},this),this.options.type=="replace")this.button.appendChild(this._currentState.icon);else for(var n=0;n<this._states.length;n++)this.button.appendChild(this._states[n].icon)},_currentState:{stateName:"unnamed",icon:function(){return document.createElement("span")}()},_states:null,state:function(n){return arguments.length===0?this._currentState.stateName:(typeof n=="string"?this._activateStateNamed(n):typeof n=="number"&&this._activateState(this._states[n]),this)},_activateStateNamed:function(n){for(var r=0;r<this._states.length;r++)this._states[r].stateName==n&&this._activateState(this._states[r])},_activateState:function(n){if(n!==this._currentState){this.options.type=="replace"&&(this.button.appendChild(n.icon),this.button.removeChild(this._currentState.icon)),n.title?this.button.title=n.title:this.button.removeAttribute("title");for(var r=0;r<this._states.length;r++)L.DomUtil.removeClass(this._states[r].icon,this._currentState.stateName+"-active"),L.DomUtil.addClass(this._states[r].icon,n.stateName+"-active");L.DomUtil.removeClass(this.button,this._currentState.stateName+"-active"),L.DomUtil.addClass(this.button,n.stateName+"-active"),this._currentState=n}},enable:function(){return L.DomUtil.addClass(this.button,"enabled"),L.DomUtil.removeClass(this.button,"disabled"),this.button.setAttribute("aria-hidden","false"),this},disable:function(){return L.DomUtil.addClass(this.button,"disabled"),L.DomUtil.removeClass(this.button,"enabled"),this.button.setAttribute("aria-hidden","true"),this},onAdd:function(n){var r=L.easyBar([this],{position:this.options.position,leafletClasses:this.options.leafletClasses});return this._anonymousBar=r,this._container=r.container,this._anonymousBar.container},removeFrom:function(n){return this._map===n&&this.remove(),this}}),L.easyButton=function(){var n=Array.prototype.concat.apply([L.Control.EasyButton],arguments);return new(Function.prototype.bind.apply(L.Control.EasyButton,n))};function h(n,r){this.title=n.title,this.stateName=n.stateName?n.stateName:"unnamed-state",this.icon=L.DomUtil.create("span",""),L.DomUtil.addClass(this.icon,"button-state state-"+this.stateName.replace(/(^\s*|\s*$)/g,"")),this.icon.innerHTML=i(n.icon),this.onClick=L.Util.bind(n.onClick?n.onClick:function(){},r)}function i(n){var r;return n.match(/[&;=<>"']/)?r=n:(n=n.replace(/(^\s*|\s*$)/g,""),r=L.DomUtil.create("span",""),n.indexOf("fa-")===0?L.DomUtil.addClass(r,"fa "+n):n.indexOf("glyphicon-")===0?L.DomUtil.addClass(r,"glyphicon "+n):L.DomUtil.addClass(r,n),r=r.outerHTML),r}})();function Jt(){return Jt=Object.assign?Object.assign.bind():function(h){for(var i=1;i<arguments.length;i++){var n=arguments[i];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(h[r]=n[r])}return h},Jt.apply(this,arguments)}function Na(h,i){h.prototype=Object.create(i.prototype),h.prototype.constructor=h,_i(h,i)}function _i(h,i){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},_i(h,i)}function Za(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function pn(h,i,n){return pn=Za()?Reflect.construct.bind():function(r,u,s){var a=[null];a.push.apply(a,u);var c=new(Function.bind.apply(r,a));return s&&_i(c,s.prototype),c},pn.apply(null,arguments)}function Ft(h,i,n,r){i===void 0&&(i=""),r===void 0&&(r={});var u=document.createElement(h);return i&&(u.className=i),Object.keys(r).forEach(function(s){if(typeof r[s]=="function"){var a=s.indexOf("on")===0?s.substr(2).toLowerCase():s;u.addEventListener(a,r[s])}else s==="html"?u.innerHTML=r[s]:s==="text"?u.innerText=r[s]:u.setAttribute(s,r[s])}),n&&n.appendChild(u),u}function ke(h){h.preventDefault(),h.stopPropagation()}var di=function(){return[].slice.call(arguments).filter(Boolean).join(" ").trim()};function Xt(h,i){h&&h.classList&&(Array.isArray(i)?i:[i]).forEach(function(n){h.classList.contains(n)||h.classList.add(n)})}function kt(h,i){h&&h.classList&&(Array.isArray(i)?i:[i]).forEach(function(n){h.classList.contains(n)&&h.classList.remove(n)})}var gi,vi=13,mn=40,Ss=38,Da=[vi,27,mn,Ss,37,39],Fa=function(){function h(n){var r=this,u=n.handleSubmit,s=n.searchLabel,a=n.classNames,c=a===void 0?{}:a;this.container=void 0,this.form=void 0,this.input=void 0,this.handleSubmit=void 0,this.hasError=!1,this.container=Ft("div",di("geosearch",c.container)),this.form=Ft("form",["",c.form].join(" "),this.container,{autocomplete:"none",onClick:ke,onDblClick:ke,touchStart:ke,touchEnd:ke}),this.input=Ft("input",["glass",c.input].join(" "),this.form,{type:"text",placeholder:s||"search",onInput:this.onInput,onKeyUp:function(d){return r.onKeyUp(d)},onKeyPress:function(d){return r.onKeyPress(d)},onFocus:this.onFocus,onBlur:this.onBlur,onClick:function(){r.input.focus(),r.input.dispatchEvent(new Event("focus"))}}),this.handleSubmit=u}var i=h.prototype;return i.onFocus=function(){Xt(this.form,"active")},i.onBlur=function(){kt(this.form,"active")},i.onSubmit=function(n){try{var r=this;return ke(n),kt(u=r.container,"error"),Xt(u,"pending"),Promise.resolve(r.handleSubmit({query:r.input.value})).then(function(){kt(r.container,"pending")})}catch(s){return Promise.reject(s)}var u},i.onInput=function(){this.hasError&&(kt(this.container,"error"),this.hasError=!1)},i.onKeyUp=function(n){n.keyCode===27&&(kt(this.container,["pending","active"]),this.input.value="",document.body.focus(),document.body.blur())},i.onKeyPress=function(n){n.keyCode===vi&&this.onSubmit(n)},i.setQuery=function(n){this.input.value=n},h}(),Ua=function(){function h(n){var r=this,u=n.handleClick,s=n.classNames,a=s===void 0?{}:s,c=n.notFoundMessage;this.handleClick=void 0,this.selected=-1,this.results=[],this.container=void 0,this.resultItem=void 0,this.notFoundMessage=void 0,this.onClick=function(d){if(typeof r.handleClick=="function"){var p=d.target;if(p&&r.container.contains(p)&&p.hasAttribute("data-key")){var g=Number(p.getAttribute("data-key"));r.handleClick({result:r.results[g]})}}},this.handleClick=u,this.notFoundMessage=c?Ft("div",di(a.notfound),void 0,{html:c}):void 0,this.container=Ft("div",di("results",a.resultlist)),this.container.addEventListener("click",this.onClick,!0),this.resultItem=Ft("div",di(a.item))}var i=h.prototype;return i.render=function(n,r){var u=this;n===void 0&&(n=[]),this.clear(),n.forEach(function(s,a){var c=u.resultItem.cloneNode(!0);c.setAttribute("data-key",""+a),c.innerHTML=r({result:s}),u.container.appendChild(c)}),n.length>0?(Xt(this.container.parentElement,"open"),Xt(this.container,"active")):this.notFoundMessage&&(this.container.appendChild(this.notFoundMessage),Xt(this.container.parentElement,"open")),this.results=n},i.select=function(n){return Array.from(this.container.children).forEach(function(r,u){return u===n?Xt(r,"active"):kt(r,"active")}),this.selected=n,this.results[n]},i.count=function(){return this.results?this.results.length:0},i.clear=function(){for(this.selected=-1;this.container.lastChild;)this.container.removeChild(this.container.lastChild);kt(this.container.parentElement,"open"),kt(this.container,"active")},h}(),rn={position:"topleft",style:"button",showMarker:!0,showPopup:!1,popupFormat:function(h){return""+h.result.label},resultFormat:function(h){return""+h.result.label},marker:{icon:Pn&&wt.Icon?new wt.Icon.Default:void 0,draggable:!1},maxMarkers:1,maxSuggestions:5,retainZoomLevel:!1,animateZoom:!0,searchLabel:"Enter address",clearSearchLabel:"Clear search",notFoundMessage:"",messageHideDelay:3e3,zoomLevel:18,classNames:{container:"leaflet-bar leaflet-control leaflet-control-geosearch",button:"leaflet-bar-part leaflet-bar-part-single",resetButton:"reset",msgbox:"leaflet-bar message",form:"",input:"",resultlist:"",item:"",notfound:"leaflet-bar-notfound"},autoComplete:!0,autoCompleteDelay:250,autoClose:!1,keepResult:!1,updateMap:!0,resetButton:""},Os="Leaflet must be loaded before instantiating the GeoSearch control",ja={options:Jt({},rn),classNames:Jt({},rn.classNames),initialize:function(h){var i,n,r,u,s=this;if(!Pn)throw new Error(Os);if(!h.provider)throw new Error("Provider is missing from options");this.options=Jt({},rn,h),this.classNames=Jt({},this.classNames,h.classNames),this.markers=new wt.FeatureGroup,this.classNames.container+=" leaflet-geosearch-"+this.options.style,this.searchElement=new Fa({searchLabel:this.options.searchLabel,classNames:{container:this.classNames.container,form:this.classNames.form,input:this.classNames.input},handleSubmit:function(a){return s.onSubmit(a)}}),this.button=Ft("a",this.classNames.button,this.searchElement.container,{title:this.options.searchLabel,href:"#",onClick:function(a){return s.onClick(a)}}),wt.DomEvent.disableClickPropagation(this.button),this.resetButton=Ft("button",this.classNames.resetButton,this.searchElement.form,{text:this.options.resetButton,"aria-label":this.options.clearSearchLabel,onClick:function(){s.searchElement.input.value===""?s.close():s.clearResults(null,!0)}}),wt.DomEvent.disableClickPropagation(this.resetButton),this.options.autoComplete&&(this.resultList=new Ua({handleClick:function(a){var c=a.result;s.searchElement.input.value=c.label,s.onSubmit({query:c.label,data:c})},classNames:{resultlist:this.classNames.resultlist,item:this.classNames.item,notfound:this.classNames.notfound},notFoundMessage:this.options.notFoundMessage}),this.searchElement.form.appendChild(this.resultList.container),this.searchElement.input.addEventListener("keyup",(i=function(a){return s.autoSearch(a)},(n=this.options.autoCompleteDelay)===void 0&&(n=250),r===void 0&&(r=!1),function(){var a=[].slice.call(arguments);u&&clearTimeout(u),u=setTimeout(function(){u=null,r||i.apply(void 0,a)},n),r&&!u&&i.apply(void 0,a)}),!0),this.searchElement.input.addEventListener("keydown",function(a){return s.selectResult(a)},!0),this.searchElement.input.addEventListener("keydown",function(a){return s.clearResults(a,!0)},!0)),this.searchElement.form.addEventListener("click",function(a){a.preventDefault()},!1)},onAdd:function(h){var i=this.options,n=i.showMarker,r=i.style;if(this.map=h,n&&this.markers.addTo(h),r==="bar"){var u=h.getContainer().querySelector(".leaflet-control-container");this.container=Ft("div","leaflet-control-geosearch leaflet-geosearch-bar"),this.container.appendChild(this.searchElement.form),u.appendChild(this.container)}return wt.DomEvent.disableClickPropagation(this.searchElement.form),this.searchElement.container},onRemove:function(){var h;return(h=this.container)==null||h.remove(),this},open:function(){var h=this.searchElement,i=h.input;Xt(h.container,"active"),i.focus()},close:function(){kt(this.searchElement.container,"active"),this.clearResults()},onClick:function(h){h.preventDefault(),h.stopPropagation(),this.searchElement.container.classList.contains("active")?this.close():this.open()},selectResult:function(h){if([vi,mn,Ss].indexOf(h.keyCode)!==-1)if(h.preventDefault(),h.keyCode!==vi){var i=this.resultList.count()-1;if(!(i<0)){var n=this.resultList.selected,r=h.keyCode===mn?n+1:n-1,u=this.resultList.select(r<0?i:r>i?0:r);this.searchElement.input.value=u.label}}else{var s=this.resultList.select(this.resultList.selected);this.onSubmit({query:this.searchElement.input.value,data:s})}},clearResults:function(h,i){if(i===void 0&&(i=!1),!h||h.keyCode===27){var n=this.options,r=n.autoComplete;!i&&n.keepResult||(this.searchElement.input.value="",this.markers.clearLayers()),r&&this.resultList.clear()}},autoSearch:function(h){try{var i=this;if(Da.indexOf(h.keyCode)>-1)return Promise.resolve();var n=h.target.value,r=i.options.provider,u=function(){if(n.length)return Promise.resolve(r.search({query:n})).then(function(s){s=s.slice(0,i.options.maxSuggestions),i.resultList.render(s,i.options.resultFormat)});i.resultList.clear()}();return Promise.resolve(u&&u.then?u.then(function(){}):void 0)}catch(s){return Promise.reject(s)}},onSubmit:function(h){try{var i=this;return i.resultList.clear(),Promise.resolve(i.options.provider.search(h)).then(function(n){n&&n.length>0&&i.showResult(n[0],h)})}catch(n){return Promise.reject(n)}},showResult:function(h,i){var n=this.options,r=n.autoClose,u=n.updateMap,s=this.markers.getLayers();s.length>=this.options.maxMarkers&&this.markers.removeLayer(s[0]);var a=this.addMarker(h,i);u&&this.centerMap(h),this.map.fireEvent("geosearch/showlocation",{location:h,marker:a}),r&&this.closeResults()},closeResults:function(){var h=this.searchElement.container;h.classList.contains("active")&&kt(h,"active"),this.clearResults()},addMarker:function(h,i){var n=this,r=this.options,u=r.marker,s=r.showPopup,a=r.popupFormat,c=new wt.Marker([h.y,h.x],u),d=h.label;return typeof a=="function"&&(d=a({query:i,result:h})),c.bindPopup(d),this.markers.addLayer(c),s&&c.openPopup(),u.draggable&&c.on("dragend",function(p){n.map.fireEvent("geosearch/marker/dragend",{location:c.getLatLng(),event:p})}),c},centerMap:function(h){var i=this.options,n=i.retainZoomLevel,r=i.animateZoom,u=h.bounds?new wt.LatLngBounds(h.bounds):new wt.LatLng(h.y,h.x).toBounds(10),s=u.isValid()?u:this.markers.getBounds();!n&&u.isValid()&&!h.bounds||n||!u.isValid()?this.map.setView(s.getCenter(),this.getZoom(),{animate:r}):this.map.fitBounds(s,{animate:r})},getZoom:function(){var h=this.options,i=h.zoomLevel;return h.retainZoomLevel?this.map.getZoom():i}};function Ga(){if(!Pn)throw new Error(Os);var h=wt.Control.extend(ja);return pn(h,[].slice.call(arguments))}(function(h){h[h.SEARCH=0]="SEARCH",h[h.REVERSE=1]="REVERSE"})(gi||(gi={}));var Ha=function(){function h(n){n===void 0&&(n={}),this.options=void 0,this.options=n}var i=h.prototype;return i.getParamString=function(n){n===void 0&&(n={});var r=Jt({},this.options.params,n);return Object.keys(r).map(function(u){return encodeURIComponent(u)+"="+encodeURIComponent(r[u])}).join("&")},i.getUrl=function(n,r){return n+"?"+this.getParamString(r)},i.search=function(n){try{var r=this,u=r.endpoint({query:n.query,type:gi.SEARCH});return Promise.resolve(fetch(u)).then(function(s){return Promise.resolve(s.json()).then(function(a){return r.parse({data:a})})})}catch(s){return Promise.reject(s)}},h}();var jo;(function(h){h[h.INITIALIZED=0]="INITIALIZED",h[h.LOADING=1]="LOADING",h[h.SUCCESS=2]="SUCCESS",h[h.FAILURE=3]="FAILURE"})(jo||(jo={}));var Wa=function(h){function i(r){var u;r===void 0&&(r={}),(u=h.call(this,r)||this).searchUrl=void 0,u.reverseUrl=void 0;var s="https://nominatim.openstreetmap.org";return u.searchUrl=r.searchUrl||s+"/search",u.reverseUrl=r.reverseUrl||s+"/reverse",u}Na(i,h);var n=i.prototype;return n.endpoint=function(r){var u=r.query,s=r.type,a=typeof u=="string"?{q:u}:u;return a.format="json",this.getUrl(s===gi.REVERSE?this.reverseUrl:this.searchUrl,a)},n.parse=function(r){return(Array.isArray(r.data)?r.data:[r.data]).map(function(u){return{x:Number(u.lon),y:Number(u.lat),label:u.display_name,bounds:[[parseFloat(u.boundingbox[0]),parseFloat(u.boundingbox[2])],[parseFloat(u.boundingbox[1]),parseFloat(u.boundingbox[3])]],raw:u}})},i}(Ha);const $a=()=>{const h=new Worker(new URL("/assets/trackparser.worker-C7mRZss_.js",import.meta.url),{type:"module"});return{parseGpxTrackInWorker(i){return new Promise((n,r)=>{const u=crypto.randomUUID(),s=a=>{a.data.id===u&&(h.removeEventListener("message",s),n(a.data))};h.addEventListener("message",s),h.postMessage({file:i,id:u})})}}};class X{constructor(i,n){this.lat=n,this.lng=i}}class Et{constructor(i,n,r,u,s){this.northEastCoord=i,this.northWestCoord=n,this.southEastCoord=r,this.southWestCoord=u,this.northEastChild=void 0,this.northWestChild=void 0,this.southEastChild=void 0,this.southWestChild=void 0,this.values=[],this.maxCapacity=s,this.verbose=!1}json(){return JSON.stringify({ne:this.northEastCoord,nw:this.northWestCoord,se:this.southEastCoord,sw:this.southWestCoord})}static empty(i=100){return new Et(new X(180,90),new X(-180,90),new X(180,-90),new X(-180,-90),i)}belongs(i){return this.belongsLatLng(i.lat,i.lng)}belongsLatLng(i,n){return n<=this.northEastCoord.lng&&n>this.northWestCoord.lng&&i<=this.northWestCoord.lat&&i>this.southWestCoord.lat}insertLatLng(i,n){return this.insert(new X(n,i))}insert(i){if(!this.belongs(i))return!1;if(this.hasChildNodes()){const n=this.northEastChild.insert(i),r=this.northWestChild.insert(i),u=this.southEastChild.insert(i),s=this.southWestChild.insert(i);return this.verbose&&console.log(`Item ${JSON.stringify(i)} inserted in NE:${n}, NW:${r}, SE:${u}, SW:${s}`),n||r||u||s}else{if(this.verbose&&console.log(`Insert ${JSON.stringify(i)} into ${this.json()}`),this.values.push(i),this.values.length>=this.maxCapacity){this.verbose&&console.log("Splitting into four nodes more ...."),this.northEastChild=new Et(this.northEastCoord,new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,this.northEastCoord.lat),new X(this.southEastCoord.lng,(this.northEastCoord.lat+this.southEastCoord.lat)/2),new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,(this.northEastCoord.lat+this.southEastCoord.lat)/2),this.maxCapacity),this.northWestChild=new Et(new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,this.northEastCoord.lat),this.northWestCoord,new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,(this.northEastCoord.lat+this.southEastCoord.lat)/2),new X(this.northWestCoord.lng,(this.northWestCoord.lat+this.southWestCoord.lat)/2),this.maxCapacity),this.southEastChild=new Et(new X(this.northEastCoord.lng,(this.northEastCoord.lat+this.southEastCoord.lat)/2),new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,(this.northEastCoord.lat+this.southEastCoord.lat)/2),this.southEastCoord,new X((this.southEastCoord.lng+this.southWestCoord.lng)/2,this.southEastCoord.lat),this.maxCapacity),this.southWestChild=new Et(new X((this.northEastCoord.lng+this.northWestCoord.lng)/2,(this.northEastCoord.lat+this.southEastCoord.lat)/2),new X(this.northWestCoord.lng,(this.northWestCoord.lat+this.southWestCoord.lat)/2),new X((this.southEastCoord.lng+this.southWestCoord.lng)/2,this.southWestCoord.lat),this.southWestCoord,this.maxCapacity);for(let n of this.values){const r=this.northEastChild.insert(n),u=this.northWestChild.insert(n),s=this.southEastChild.insert(n),a=this.southWestChild.insert(n);this.verbose&&console.log(`Item ${JSON.stringify(n)} inserted in NE:${r}, NW:${u}, SE:${s}, SW:${a}`)}this.verbose&&console.log(`Reset items in ${JSON.stringify(this.json())}`),this.values=[]}return!0}}hasChildNodes(){return this.northEastChild!=null&&this.northWestChild!=null&&this.southEastChild!=null&&this.southWestChild!=null}locationIsOnTree(i,n,r){return this.lngLatIsOnTree(new X(n,i),r)}lngLatIsOnTree(i,n=10){if(!this.belongs(i))return!1;if(this.hasChildNodes())return this.northEastChild.lngLatIsOnTree(i,n)||this.southEastChild.lngLatIsOnTree(i,n)||this.northWestChild.lngLatIsOnTree(i,n)||this.southWestChild.lngLatIsOnTree(i,n);for(let r of this.values)if(this.equalsWithTolerance(i,r,n))return!0;return!1}equalsWithTolerance(i,n,r){const{lat_drift_allowed:u,lng_drift_allowed:s}=this.latLngTolerance(i.lat,i.lng,r),a=Math.abs(i.lat-n.lat),c=Math.abs(i.lng-n.lng);return a<=u&&c<=s}latLngTolerance(i,n,r){const u=r/111320,s=u,a=u/Math.cos(i*.01745);return{lat_drift_allowed:s,lng_drift_allowed:a}}points(){let i=[];for(let n of this.values)i.push([n.lat,n.lng]);return this._addPoints(this.northEastChild,i),this._addPoints(this.northWestChild,i),this._addPoints(this.southEastChild,i),this._addPoints(this.southWestChild,i),i}_addPoints(i,n){if(i)for(let r of i.points())n.push(r)}serialize(){return JSON.stringify(this.toObject())}toObject(){return{northEastCoord:this.northEastCoord,northWestCoord:this.northWestCoord,southEastCoord:this.southEastCoord,southWestCoord:this.southWestCoord,values:this.values,maxCapacity:this.maxCapacity,hasChildren:this.hasChildNodes(),northEastChild:this.northEastChild?this.northEastChild.toObject():null,northWestChild:this.northWestChild?this.northWestChild.toObject():null,southEastChild:this.southEastChild?this.southEastChild.toObject():null,southWestChild:this.southWestChild?this.southWestChild.toObject():null}}static deserialize(i){const n=JSON.parse(i);return this.fromObject(n)}static fromObject(i){const n=new Et(new X(i.northEastCoord.lng,i.northEastCoord.lat),new X(i.northWestCoord.lng,i.northWestCoord.lat),new X(i.southEastCoord.lng,i.southEastCoord.lat),new X(i.southWestCoord.lng,i.southWestCoord.lat),i.maxCapacity);return n.values=i.values.map(r=>new X(r.lng,r.lat)),i.northEastChild&&(n.northEastChild=this.fromObject(i.northEastChild)),i.northWestChild&&(n.northWestChild=this.fromObject(i.northWestChild)),i.southEastChild&&(n.southEastChild=this.fromObject(i.southEastChild)),i.southWestChild&&(n.southWestChild=this.fromObject(i.southWestChild)),n}clear(){this.verbose&&console.log("Clearing quadtree"),this.northEastCoord=new X(180,90),this.northWestCoord=new X(-180,90),this.southEastCoord=new X(180,-90),this.southWestCoord=new X(-180,-90),this.northEastChild=void 0,this.northWestChild=void 0,this.southEastChild=void 0,this.southWestChild=void 0,this.values=[]}}const Ms="3.7.7",qa=Ms,_e=typeof Buffer=="function",Go=typeof TextDecoder=="function"?new TextDecoder:void 0,Ho=typeof TextEncoder=="function"?new TextEncoder:void 0,Va="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Re=Array.prototype.slice.call(Va),li=(h=>{let i={};return h.forEach((n,r)=>i[n]=r),i})(Re),Ka=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ft=String.fromCharCode.bind(String),Wo=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):h=>new Uint8Array(Array.prototype.slice.call(h,0)),Ts=h=>h.replace(/=/g,"").replace(/[+\/]/g,i=>i=="+"?"-":"_"),Es=h=>h.replace(/[^A-Za-z0-9\+\/]/g,""),ks=h=>{let i,n,r,u,s="";const a=h.length%3;for(let c=0;c<h.length;){if((n=h.charCodeAt(c++))>255||(r=h.charCodeAt(c++))>255||(u=h.charCodeAt(c++))>255)throw new TypeError("invalid character found");i=n<<16|r<<8|u,s+=Re[i>>18&63]+Re[i>>12&63]+Re[i>>6&63]+Re[i&63]}return a?s.slice(0,a-3)+"===".substring(a):s},Sn=typeof btoa=="function"?h=>btoa(h):_e?h=>Buffer.from(h,"binary").toString("base64"):ks,_n=_e?h=>Buffer.from(h).toString("base64"):h=>{let n=[];for(let r=0,u=h.length;r<u;r+=4096)n.push(ft.apply(null,h.subarray(r,r+4096)));return Sn(n.join(""))},pi=(h,i=!1)=>i?Ts(_n(h)):_n(h),Ja=h=>{if(h.length<2){var i=h.charCodeAt(0);return i<128?h:i<2048?ft(192|i>>>6)+ft(128|i&63):ft(224|i>>>12&15)+ft(128|i>>>6&63)+ft(128|i&63)}else{var i=65536+(h.charCodeAt(0)-55296)*1024+(h.charCodeAt(1)-56320);return ft(240|i>>>18&7)+ft(128|i>>>12&63)+ft(128|i>>>6&63)+ft(128|i&63)}},Xa=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,As=h=>h.replace(Xa,Ja),$o=_e?h=>Buffer.from(h,"utf8").toString("base64"):Ho?h=>_n(Ho.encode(h)):h=>Sn(As(h)),de=(h,i=!1)=>i?Ts($o(h)):$o(h),qo=h=>de(h,!0),Ya=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Qa=h=>{switch(h.length){case 4:var i=(7&h.charCodeAt(0))<<18|(63&h.charCodeAt(1))<<12|(63&h.charCodeAt(2))<<6|63&h.charCodeAt(3),n=i-65536;return ft((n>>>10)+55296)+ft((n&1023)+56320);case 3:return ft((15&h.charCodeAt(0))<<12|(63&h.charCodeAt(1))<<6|63&h.charCodeAt(2));default:return ft((31&h.charCodeAt(0))<<6|63&h.charCodeAt(1))}},Is=h=>h.replace(Ya,Qa),Bs=h=>{if(h=h.replace(/\s+/g,""),!Ka.test(h))throw new TypeError("malformed base64.");h+="==".slice(2-(h.length&3));let i,n="",r,u;for(let s=0;s<h.length;)i=li[h.charAt(s++)]<<18|li[h.charAt(s++)]<<12|(r=li[h.charAt(s++)])<<6|(u=li[h.charAt(s++)]),n+=r===64?ft(i>>16&255):u===64?ft(i>>16&255,i>>8&255):ft(i>>16&255,i>>8&255,i&255);return n},On=typeof atob=="function"?h=>atob(Es(h)):_e?h=>Buffer.from(h,"base64").toString("binary"):Bs,Rs=_e?h=>Wo(Buffer.from(h,"base64")):h=>Wo(On(h).split("").map(i=>i.charCodeAt(0))),zs=h=>Rs(Ns(h)),th=_e?h=>Buffer.from(h,"base64").toString("utf8"):Go?h=>Go.decode(Rs(h)):h=>Is(On(h)),Ns=h=>Es(h.replace(/[-_]/g,i=>i=="-"?"+":"/")),gn=h=>th(Ns(h)),eh=h=>{if(typeof h!="string")return!1;const i=h.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(i)||!/[^\s0-9a-zA-Z\-_]/.test(i)},Zs=h=>({value:h,enumerable:!1,writable:!0,configurable:!0}),Ds=function(){const h=(i,n)=>Object.defineProperty(String.prototype,i,Zs(n));h("fromBase64",function(){return gn(this)}),h("toBase64",function(i){return de(this,i)}),h("toBase64URI",function(){return de(this,!0)}),h("toBase64URL",function(){return de(this,!0)}),h("toUint8Array",function(){return zs(this)})},Fs=function(){const h=(i,n)=>Object.defineProperty(Uint8Array.prototype,i,Zs(n));h("toBase64",function(i){return pi(this,i)}),h("toBase64URI",function(){return pi(this,!0)}),h("toBase64URL",function(){return pi(this,!0)})},ih=()=>{Ds(),Fs()},Us={version:Ms,VERSION:qa,atob:On,atobPolyfill:Bs,btoa:Sn,btoaPolyfill:ks,fromBase64:gn,toBase64:de,encode:de,encodeURI:qo,encodeURL:qo,utob:As,btou:Is,decode:gn,isValid:eh,fromUint8Array:pi,toUint8Array:zs,extendString:Ds,extendUint8Array:Fs,extendBuiltins:ih},nh=10,oh=50,js="fa-upload",sh=(h,i,n,r)=>{const{qt:u,fileLoadedCache:s,qtStorage:a}=r,c=u,d=(v,w)=>{a.save(v);const x={qt:v};w&&(x.extraLayers=w),document.dispatchEvent(new CustomEvent("mapUpdate",{detail:x}))},p=v=>v.split(".").pop(),g=async v=>{const w=$a(),x=v.target.files;if(!x.length)return;i.loadWithCurrentTotal(0,x.length);const P=new Set(Array.from(x).map(M=>p(M.name)));if(P.size>1){alert(n.t("upload.alert"));return}const O=P.values().next().value;if(O==="gpx"){let M=0;for(let E of x)if(!s.isAlreadyLoaded(E)){const W=(await w.parseGpxTrackInWorker(E)).data;for(let F of W){const $=F.lat,U=F.lon;c.locationIsOnTree($,U,nh)||c.insertLatLng($,U)}M+=1,M%oh==0&&(i.loadWithCurrentTotal(M,x.length),d(c)),s.saveUploadedFile(E)}d(c)}else if(O==="bin"&&x.length==1){const M=new FileReader;M.onload=()=>{const E=Us.decode(M.result),I=JSON.parse(E),W=I.qt,F=I.filesLoaded,$=I.layers;r.layers.putAll($),r.fileLoadedCache.putAll(F);const U=Et.deserialize(W);d(U,$)},M.onerror=()=>{const E=`${n.t("upload.error")} ${x[0].name}`;alert(E)},M.readAsText(x[0])}i.stop()},_=document.getElementById("gpxFileInput");_.addEventListener("change",g),L.easyButton(js,()=>_.click(),n.t("upload.button")).addTo(h)},Gs="fa-download",rh=h=>{const i={qt:h.qt.serialize(),filesLoaded:h.fileLoadedCache.getAll(),layers:h.layers.getAll()},r="data:text;charset=utf-8,"+Us.encode(JSON.stringify(i)),u=document.createElement("a");u.setAttribute("href",r),u.setAttribute("download","estuve.bin"),document.body.appendChild(u),u.click(),document.body.removeChild(u)},ah=(h,i,n)=>{L.easyButton(Gs,()=>rh(i),n.t("download.button")).addTo(h)},Hs="fa-trash",hh=(h,i)=>{const n=h.fileLoadedCache,r=h.qtStorage,u=h.qt,s=h.layers,a=i.t("clear.message");confirm(a)&&(n.clear(),r.clear(),u.clear(),s.clear(),document.dispatchEvent(new CustomEvent("mapUpdate",{detail:{qt:u,removedLayerName:"ALL"}})))},lh=(h,i,n)=>L.easyButton(Hs,function(r,u){hh(i,n)},n.t("clear.button")).addTo(h),Ws="fa-plus",uh=(h,i)=>{const n=document.getElementById("geojson-layer-form");n&&n.addEventListener("submit",function(r){r.preventDefault();const u=new FormData(n),s=Object.fromEntries(u.entries());i.layers.putLayer(s),h.closePopup(),document.dispatchEvent(new CustomEvent("mapUpdate",{detail:{extraLayer:s}}))})},ch=(h,i)=>{const n=`
        <form id="geojson-layer-form">
            <p>${i.t("addlayer.text1")}</p>

            <label for="new-layer-name">${i.t("addlayer.name.field")}</label>
            <input required type="text" id="new-layer-name" name="name" required placeholder="${i.t("addlayer.name.placeholder")}">

            <label for="new-layer-url">${i.t("addlayer.url.field")}</label>
            <input required type="url" id="new-layer-url" name="url" required placeholder="${i.t("addlayer.name.placeholder")}">
            <small class="help-text">
            ${i.t("addlayer.url.explanation")}
            </small>

            <label for="new-layer-color">${i.t("addlayer.color.field")}</label>
            <input required type="color" id="new-layer-color" name="color">

            <button type="submit">${i.t("addlayer.button")}</button>
        </form>
     `;L.popup({id:"add-layer-form"}).setLatLng(h.getCenter()).setContent(n).openOn(h)},fh=(h,i,n)=>(h.on("popupopen",function(r){var s;((s=r.popup.options)==null?void 0:s.id)==="add-layer-form"&&uh(r.target,i)}),L.easyButton(Ws,function(r,u){ch(u,n)},n.t("addlayer.button")).addTo(h)),$s="fa-layer-group",dh=h=>{document.querySelectorAll(".remove-layer-btn").forEach(i=>{i.addEventListener("click",n=>{const r=i.getAttribute("data-layer-name");h.layers.removeLayer(r),n.target.closest("li").remove(),document.dispatchEvent(new CustomEvent("mapUpdate",{detail:{removedLayerName:r}}))})})},ph=(h,i,n)=>{const r=`
    <section id="existing-layers-section">
      <p>${n.t("layer.text")}</p>
      <ul id="existing-layers-list">
        ${i.layers.getAll().map(u=>`
              <li>
                <span>${u.name}</span>
                <button data-layer-name="${u.name}" class="remove-layer-btn" title="Remove layer">
                  <i class="fas fa-trash-alt"></i>
                </button>
              </li>
            `).join("")}
      </ul>
    </section>
  `;L.popup({id:"layer-form"}).setLatLng(h.getCenter()).setContent(r).openOn(h)},mh=(h,i,n)=>(h.on("popupopen",function(r){var s;((s=r.popup.options)==null?void 0:s.id)==="layer-form"&&dh(i)}),L.easyButton($s,function(r,u){ph(u,i,n)},n.t("layer.button")).addTo(h)),_h=(h,i)=>{const n=`
     <b><span id="info-title">${i.t("info.title")}</span></b>
     <br>
     <span id="info-content">${i.t("info.content")}</span>
     <p>
          <span><i class="fa ${js}"></i><b>&nbsp;${i.t("upload.button")}</b></span><br/>
          <span>${i.t("upload.help")}</span>
     </p>
     <p><span><i class="fa ${Gs}"></i><b>&nbsp;${i.t("download.button")}</b></span><br/>
          <span>${i.t("download.help")}</span>
     </p>
     <p><span><i class="fa ${Hs}"></i><b>&nbsp;${i.t("clear.button")}</b><br/>
          <span>${i.t("clear.help")}</span>
     </p>
     <p><span><i class="fa ${Ws}"></i><b>&nbsp;${i.t("addlayer.button")}</b><br/>
          <span>${i.t("addlayer.help")}</span>
     </p>
          <p><span><i class="fa ${$s}"></i><b>&nbsp;${i.t("layer.button")}</b><br/>
          <span>${i.t("layer.help")}</span>
     </p>
     `;L.popup().setLatLng(h.getCenter()).setContent(n).openOn(h)},gh=(h,i)=>{L.easyButton("fa-info-circle",function(n,r){_h(r,i)},i.t("info.button")).addTo(h)},z=h=>typeof h=="string",Ae=()=>{let h,i;const n=new Promise((r,u)=>{h=r,i=u});return n.resolve=h,n.reject=i,n},Vo=h=>h==null?"":""+h,vh=(h,i,n)=>{h.forEach(r=>{i[r]&&(n[r]=i[r])})},yh=/###/g,Ko=h=>h&&h.indexOf("###")>-1?h.replace(yh,"."):h,Jo=h=>!h||z(h),Ne=(h,i,n)=>{const r=z(i)?i.split("."):i;let u=0;for(;u<r.length-1;){if(Jo(h))return{};const s=Ko(r[u]);!h[s]&&n&&(h[s]=new n),Object.prototype.hasOwnProperty.call(h,s)?h=h[s]:h={},++u}return Jo(h)?{}:{obj:h,k:Ko(r[u])}},Xo=(h,i,n)=>{const{obj:r,k:u}=Ne(h,i,Object);if(r!==void 0||i.length===1){r[u]=n;return}let s=i[i.length-1],a=i.slice(0,i.length-1),c=Ne(h,a,Object);for(;c.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),c=Ne(h,a,Object),c!=null&&c.obj&&typeof c.obj[`${c.k}.${s}`]<"u"&&(c.obj=void 0);c.obj[`${c.k}.${s}`]=n},Lh=(h,i,n,r)=>{const{obj:u,k:s}=Ne(h,i,Object);u[s]=u[s]||[],u[s].push(n)},yi=(h,i)=>{const{obj:n,k:r}=Ne(h,i);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},wh=(h,i,n)=>{const r=yi(h,n);return r!==void 0?r:yi(i,n)},qs=(h,i,n)=>{for(const r in i)r!=="__proto__"&&r!=="constructor"&&(r in h?z(h[r])||h[r]instanceof String||z(i[r])||i[r]instanceof String?n&&(h[r]=i[r]):qs(h[r],i[r],n):h[r]=i[r]);return h},he=h=>h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var bh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const xh=h=>z(h)?h.replace(/[&<>"'\/]/g,i=>bh[i]):h;class Ch{constructor(i){this.capacity=i,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(i){const n=this.regExpMap.get(i);if(n!==void 0)return n;const r=new RegExp(i);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(i,r),this.regExpQueue.push(i),r}}const Ph=[" ",",","?","!",";"],Sh=new Ch(20),Oh=(h,i,n)=>{i=i||"",n=n||"";const r=Ph.filter(a=>i.indexOf(a)<0&&n.indexOf(a)<0);if(r.length===0)return!0;const u=Sh.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!u.test(h);if(!s){const a=h.indexOf(n);a>0&&!u.test(h.substring(0,a))&&(s=!0)}return s},vn=function(h,i){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!h)return;if(h[i])return Object.prototype.hasOwnProperty.call(h,i)?h[i]:void 0;const r=i.split(n);let u=h;for(let s=0;s<r.length;){if(!u||typeof u!="object")return;let a,c="";for(let d=s;d<r.length;++d)if(d!==s&&(c+=n),c+=r[d],a=u[c],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&d<r.length-1)continue;s+=d-s+1;break}u=a}return u},Li=h=>h==null?void 0:h.replace("_","-"),Mh={type:"logger",log(h){this.output("log",h)},warn(h){this.output("warn",h)},error(h){this.output("error",h)},output(h,i){var n,r;(r=(n=console==null?void 0:console[h])==null?void 0:n.apply)==null||r.call(n,console,i)}};class wi{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(i,n)}init(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=i||Mh,this.options=n,this.debug=n.debug}log(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(i,n,r,u){return u&&!this.debug?null:(z(i[0])&&(i[0]=`${r}${this.prefix} ${i[0]}`),this.logger[n](i))}create(i){return new wi(this.logger,{prefix:`${this.prefix}:${i}:`,...this.options})}clone(i){return i=i||this.options,i.prefix=i.prefix||this.prefix,new wi(this.logger,i)}}var At=new wi;class Ci{constructor(){this.observers={}}on(i,n){return i.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const u=this.observers[r].get(n)||0;this.observers[r].set(n,u+1)}),this}off(i,n){if(this.observers[i]){if(!n){delete this.observers[i];return}this.observers[i].delete(n)}}emit(i){for(var n=arguments.length,r=new Array(n>1?n-1:0),u=1;u<n;u++)r[u-1]=arguments[u];this.observers[i]&&Array.from(this.observers[i].entries()).forEach(a=>{let[c,d]=a;for(let p=0;p<d;p++)c(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[c,d]=a;for(let p=0;p<d;p++)c.apply(c,[i,...r])})}}class Yo extends Ci{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=i||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}removeNamespaces(i){const n=this.options.ns.indexOf(i);n>-1&&this.options.ns.splice(n,1)}getResource(i,n,r){var p,g;let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=u.keySeparator!==void 0?u.keySeparator:this.options.keySeparator,a=u.ignoreJSONStructure!==void 0?u.ignoreJSONStructure:this.options.ignoreJSONStructure;let c;i.indexOf(".")>-1?c=i.split("."):(c=[i,n],r&&(Array.isArray(r)?c.push(...r):z(r)&&s?c.push(...r.split(s)):c.push(r)));const d=yi(this.data,c);return!d&&!n&&!r&&i.indexOf(".")>-1&&(i=c[0],n=c[1],r=c.slice(2).join(".")),d||!a||!z(r)?d:vn((g=(p=this.data)==null?void 0:p[i])==null?void 0:g[n],r,s)}addResource(i,n,r,u){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let c=[i,n];r&&(c=c.concat(a?r.split(a):r)),i.indexOf(".")>-1&&(c=i.split("."),u=n,n=c[1]),this.addNamespaces(n),Xo(this.data,c,u),s.silent||this.emit("added",i,n,r,u)}addResources(i,n,r){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const s in r)(z(r[s])||Array.isArray(r[s]))&&this.addResource(i,n,s,r[s],{silent:!0});u.silent||this.emit("added",i,n,r)}addResourceBundle(i,n,r,u,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},c=[i,n];i.indexOf(".")>-1&&(c=i.split("."),u=r,r=n,n=c[1]),this.addNamespaces(n);let d=yi(this.data,c)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),u?qs(d,r,s):d={...d,...r},Xo(this.data,c,d),a.silent||this.emit("added",i,n,r)}removeResourceBundle(i,n){this.hasResourceBundle(i,n)&&delete this.data[i][n],this.removeNamespaces(n),this.emit("removed",i,n)}hasResourceBundle(i,n){return this.getResource(i,n)!==void 0}getResourceBundle(i,n){return n||(n=this.options.defaultNS),this.getResource(i,n)}getDataByLanguage(i){return this.data[i]}hasLanguageSomeTranslations(i){const n=this.getDataByLanguage(i);return!!(n&&Object.keys(n)||[]).find(u=>n[u]&&Object.keys(n[u]).length>0)}toJSON(){return this.data}}var Vs={processors:{},addPostProcessor(h){this.processors[h.name]=h},handle(h,i,n,r,u){return h.forEach(s=>{var a;i=((a=this.processors[s])==null?void 0:a.process(i,n,r,u))??i}),i}};const Qo={},ts=h=>!z(h)&&typeof h!="boolean"&&typeof h!="number";class bi extends Ci{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),vh(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],i,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=At.create("translator")}changeLanguage(i){i&&(this.language=i)}exists(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;const r=this.resolve(i,n);return(r==null?void 0:r.res)!==void 0}extractFromKey(i,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const u=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let s=n.ns||this.options.defaultNS||[];const a=r&&i.indexOf(r)>-1,c=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Oh(i,r,u);if(a&&!c){const d=i.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:i,namespaces:z(s)?[s]:s};const p=i.split(r);(r!==u||r===u&&this.options.ns.indexOf(p[0])>-1)&&(s=p.shift()),i=p.join(u)}return{key:i,namespaces:z(s)?[s]:s}}translate(i,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);const u=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,s=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(i[i.length-1],n),d=c[c.length-1],p=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((p==null?void 0:p.toLowerCase())==="cimode"){if(g){const V=n.nsSeparator||this.options.nsSeparator;return u?{res:`${d}${V}${a}`,usedKey:a,exactUsedKey:a,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:`${d}${V}${a}`}return u?{res:a,usedKey:a,exactUsedKey:a,usedLng:p,usedNS:d,usedParams:this.getUsedParamsDetails(n)}:a}const _=this.resolve(i,n);let v=_==null?void 0:_.res;const w=(_==null?void 0:_.usedKey)||a,x=(_==null?void 0:_.exactUsedKey)||a,P=["[object Number]","[object Function]","[object RegExp]"],O=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,M=!this.i18nFormat||this.i18nFormat.handleAsObject,E=n.count!==void 0&&!z(n.count),I=bi.hasDefaultValue(n),W=E?this.pluralResolver.getSuffix(p,n.count,n):"",F=n.ordinal&&E?this.pluralResolver.getSuffix(p,n.count,{ordinal:!1}):"",$=E&&!n.ordinal&&n.count===0,U=$&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${W}`]||n[`defaultValue${F}`]||n.defaultValue;let J=v;M&&!v&&I&&(J=U);const _t=ts(J),It=Object.prototype.toString.apply(J);if(M&&J&&_t&&P.indexOf(It)<0&&!(z(O)&&Array.isArray(J))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const V=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,J,{...n,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return u?(_.res=V,_.usedParams=this.getUsedParamsDetails(n),_):V}if(s){const V=Array.isArray(J),Q=V?[]:{},Ge=V?x:w;for(const nt in J)if(Object.prototype.hasOwnProperty.call(J,nt)){const bt=`${Ge}${s}${nt}`;I&&!v?Q[nt]=this.translate(bt,{...n,defaultValue:ts(U)?U[nt]:void 0,joinArrays:!1,ns:c}):Q[nt]=this.translate(bt,{...n,joinArrays:!1,ns:c}),Q[nt]===bt&&(Q[nt]=J[nt])}v=Q}}else if(M&&z(O)&&Array.isArray(v))v=v.join(O),v&&(v=this.extendTranslation(v,i,n,r));else{let V=!1,Q=!1;!this.isValidLookup(v)&&I&&(V=!0,v=U),this.isValidLookup(v)||(Q=!0,v=a);const nt=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Q?void 0:v,bt=I&&U!==v&&this.options.updateMissing;if(Q||V||bt){if(this.logger.log(bt?"updateKey":"missingKey",p,d,a,bt?U:v),s){const dt=this.resolve(a,{...n,keySeparator:!1});dt&&dt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let at=[];const Pt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Pt&&Pt[0])for(let dt=0;dt<Pt.length;dt++)at.push(Pt[dt]);else this.options.saveMissingTo==="all"?at=this.languageUtils.toResolveHierarchy(n.lng||this.language):at.push(n.lng||this.language);const R=(dt,A,q)=>{var ut;const lt=I&&q!==v?q:nt;this.options.missingKeyHandler?this.options.missingKeyHandler(dt,d,A,lt,bt,n):(ut=this.backendConnector)!=null&&ut.saveMissing&&this.backendConnector.saveMissing(dt,d,A,lt,bt,n),this.emit("missingKey",dt,d,A,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?at.forEach(dt=>{const A=this.pluralResolver.getSuffixes(dt,n);$&&n[`defaultValue${this.options.pluralSeparator}zero`]&&A.indexOf(`${this.options.pluralSeparator}zero`)<0&&A.push(`${this.options.pluralSeparator}zero`),A.forEach(q=>{R([dt],a+q,n[`defaultValue${q}`]||U)})}):R(at,a,U))}v=this.extendTranslation(v,i,n,_,r),Q&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${d}:${a}`),(Q||V)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${a}`:a,V?v:void 0))}return u?(_.res=v,_.usedParams=this.getUsedParamsDetails(n),_):v}extendTranslation(i,n,r,u,s){var p,g;var a=this;if((p=this.i18nFormat)!=null&&p.parse)i=this.i18nFormat.parse(i,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||u.usedLng,u.usedNS,u.usedKey,{resolved:u});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const _=z(i)&&(((g=r==null?void 0:r.interpolation)==null?void 0:g.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let v;if(_){const x=i.match(this.interpolator.nestingRegexp);v=x&&x.length}let w=r.replace&&!z(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(w={...this.options.interpolation.defaultVariables,...w}),i=this.interpolator.interpolate(i,w,r.lng||this.language||u.usedLng,r),_){const x=i.match(this.interpolator.nestingRegexp),P=x&&x.length;v<P&&(r.nest=!1)}!r.lng&&u&&u.res&&(r.lng=this.language||u.usedLng),r.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var x=arguments.length,P=new Array(x),O=0;O<x;O++)P[O]=arguments[O];return(s==null?void 0:s[0])===P[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${P[0]} in key: ${n[0]}`),null):a.translate(...P,n)},r)),r.interpolation&&this.interpolator.reset()}const c=r.postProcess||this.options.postProcess,d=z(c)?[c]:c;return i!=null&&(d!=null&&d.length)&&r.applyPostProcessor!==!1&&(i=Vs.handle(d,i,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...u,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),i}resolve(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,u,s,a,c;return z(i)&&(i=[i]),i.forEach(d=>{if(this.isValidLookup(r))return;const p=this.extractFromKey(d,n),g=p.key;u=g;let _=p.namespaces;this.options.fallbackNS&&(_=_.concat(this.options.fallbackNS));const v=n.count!==void 0&&!z(n.count),w=v&&!n.ordinal&&n.count===0,x=n.context!==void 0&&(z(n.context)||typeof n.context=="number")&&n.context!=="",P=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);_.forEach(O=>{var M,E;this.isValidLookup(r)||(c=O,!Qo[`${P[0]}-${O}`]&&((M=this.utils)!=null&&M.hasLoadedNamespace)&&!((E=this.utils)!=null&&E.hasLoadedNamespace(c))&&(Qo[`${P[0]}-${O}`]=!0,this.logger.warn(`key "${u}" for languages "${P.join(", ")}" won't get resolved as namespace "${c}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),P.forEach(I=>{var $;if(this.isValidLookup(r))return;a=I;const W=[g];if(($=this.i18nFormat)!=null&&$.addLookupKeys)this.i18nFormat.addLookupKeys(W,g,I,O,n);else{let U;v&&(U=this.pluralResolver.getSuffix(I,n.count,n));const J=`${this.options.pluralSeparator}zero`,_t=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(v&&(W.push(g+U),n.ordinal&&U.indexOf(_t)===0&&W.push(g+U.replace(_t,this.options.pluralSeparator)),w&&W.push(g+J)),x){const It=`${g}${this.options.contextSeparator}${n.context}`;W.push(It),v&&(W.push(It+U),n.ordinal&&U.indexOf(_t)===0&&W.push(It+U.replace(_t,this.options.pluralSeparator)),w&&W.push(It+J))}}let F;for(;F=W.pop();)this.isValidLookup(r)||(s=F,r=this.getResource(I,O,F,n))}))})}),{res:r,usedKey:u,exactUsedKey:s,usedLng:a,usedNS:c}}isValidLookup(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}getResource(i,n,r){var s;let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(i,n,r,u):this.resourceStore.getResource(i,n,r,u)}getUsedParamsDetails(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=i.replace&&!z(i.replace);let u=r?i.replace:i;if(r&&typeof i.count<"u"&&(u.count=i.count),this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),!r){u={...u};for(const s of n)delete u[s]}return u}static hasDefaultValue(i){const n="defaultValue";for(const r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&n===r.substring(0,n.length)&&i[r]!==void 0)return!0;return!1}}class es{constructor(i){this.options=i,this.supportedLngs=this.options.supportedLngs||!1,this.logger=At.create("languageUtils")}getScriptPartFromCode(i){if(i=Li(i),!i||i.indexOf("-")<0)return null;const n=i.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(i){if(i=Li(i),!i||i.indexOf("-")<0)return i;const n=i.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(i){if(z(i)&&i.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(i)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?i.toLowerCase():i)}return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}isSupportedCode(i){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(i=this.getLanguagePartFromCode(i)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(i)>-1}getBestMatchFromCodes(i){if(!i)return null;let n;return i.forEach(r=>{if(n)return;const u=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(u))&&(n=u)}),!n&&this.options.supportedLngs&&i.forEach(r=>{if(n)return;const u=this.getLanguagePartFromCode(r);if(this.isSupportedCode(u))return n=u;n=this.options.supportedLngs.find(s=>{if(s===u)return s;if(!(s.indexOf("-")<0&&u.indexOf("-")<0)&&(s.indexOf("-")>0&&u.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===u||s.indexOf(u)===0&&u.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(i,n){if(!i)return[];if(typeof i=="function"&&(i=i(n)),z(i)&&(i=[i]),Array.isArray(i))return i;if(!n)return i.default||[];let r=i[n];return r||(r=i[this.getScriptPartFromCode(n)]),r||(r=i[this.formatLanguageCode(n)]),r||(r=i[this.getLanguagePartFromCode(n)]),r||(r=i.default),r||[]}toResolveHierarchy(i,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],i),u=[],s=a=>{a&&(this.isSupportedCode(a)?u.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return z(i)&&(i.indexOf("-")>-1||i.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(i)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(i)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(i))):z(i)&&s(this.formatLanguageCode(i)),r.forEach(a=>{u.indexOf(a)<0&&s(this.formatLanguageCode(a))}),u}}const is={zero:0,one:1,two:2,few:3,many:4,other:5},ns={select:h=>h===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Th{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=i,this.options=n,this.logger=At.create("pluralResolver"),this.pluralRulesCache={}}addRule(i,n){this.rules[i]=n}clearCache(){this.pluralRulesCache={}}getRule(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=Li(i==="dev"?"en":i),u=n.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:u});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:u})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),ns;if(!i.match(/-|_/))return ns;const d=this.languageUtils.getLanguagePartFromCode(i);a=this.getRule(d,n)}return this.pluralRulesCache[s]=a,a}needsPlural(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(i,n);return r||(r=this.getRule("dev",n)),(r==null?void 0:r.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(i,r).map(u=>`${n}${u}`)}getSuffixes(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(i,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((u,s)=>is[u]-is[s]).map(u=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${u}`):[]}getSuffix(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const u=this.getRule(i,r);return u?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${u.select(n)}`:(this.logger.warn(`no plural rule found for: ${i}`),this.getSuffix("dev",n,r))}}const os=function(h,i,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=wh(h,i,n);return!s&&u&&z(n)&&(s=vn(h,n,r),s===void 0&&(s=vn(i,n,r))),s},an=h=>h.replace(/\$/g,"$$$$");class Eh{constructor(){var n;let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=At.create("interpolator"),this.options=i,this.format=((n=i==null?void 0:i.interpolation)==null?void 0:n.format)||(r=>r),this.init(i)}init(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};i.interpolation||(i.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:u,prefix:s,prefixEscaped:a,suffix:c,suffixEscaped:d,formatSeparator:p,unescapeSuffix:g,unescapePrefix:_,nestingPrefix:v,nestingPrefixEscaped:w,nestingSuffix:x,nestingSuffixEscaped:P,nestingOptionsSeparator:O,maxReplaces:M,alwaysFormat:E}=i.interpolation;this.escape=n!==void 0?n:xh,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=u!==void 0?u:!1,this.prefix=s?he(s):a||"{{",this.suffix=c?he(c):d||"}}",this.formatSeparator=p||",",this.unescapePrefix=g?"":_||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=v?he(v):w||he("$t("),this.nestingSuffix=x?he(x):P||he(")"),this.nestingOptionsSeparator=O||",",this.maxReplaces=M||1e3,this.alwaysFormat=E!==void 0?E:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const i=(n,r)=>(n==null?void 0:n.source)===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=i(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=i(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=i(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(i,n,r,u){var w;let s,a,c;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},p=x=>{if(x.indexOf(this.formatSeparator)<0){const E=os(n,d,x,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(E,void 0,r,{...u,...n,interpolationkey:x}):E}const P=x.split(this.formatSeparator),O=P.shift().trim(),M=P.join(this.formatSeparator).trim();return this.format(os(n,d,O,this.options.keySeparator,this.options.ignoreJSONStructure),M,r,{...u,...n,interpolationkey:O})};this.resetRegExp();const g=(u==null?void 0:u.missingInterpolationHandler)||this.options.missingInterpolationHandler,_=((w=u==null?void 0:u.interpolation)==null?void 0:w.skipOnVariables)!==void 0?u.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:x=>an(x)},{regex:this.regexp,safeValue:x=>this.escapeValue?an(this.escape(x)):an(x)}].forEach(x=>{for(c=0;s=x.regex.exec(i);){const P=s[1].trim();if(a=p(P),a===void 0)if(typeof g=="function"){const M=g(i,s,u);a=z(M)?M:""}else if(u&&Object.prototype.hasOwnProperty.call(u,P))a="";else if(_){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${P} for interpolating ${i}`),a="";else!z(a)&&!this.useRawValueToEscape&&(a=Vo(a));const O=x.safeValue(a);if(i=i.replace(s[0],O),_?(x.regex.lastIndex+=a.length,x.regex.lastIndex-=s[0].length):x.regex.lastIndex=0,c++,c>=this.maxReplaces)break}}),i}nest(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u,s,a;const c=(d,p)=>{const g=this.nestingOptionsSeparator;if(d.indexOf(g)<0)return d;const _=d.split(new RegExp(`${g}[ ]*{`));let v=`{${_[1]}`;d=_[0],v=this.interpolate(v,a);const w=v.match(/'/g),x=v.match(/"/g);(((w==null?void 0:w.length)??0)%2===0&&!x||x.length%2!==0)&&(v=v.replace(/'/g,'"'));try{a=JSON.parse(v),p&&(a={...p,...a})}catch(P){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,P),`${d}${g}${v}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,d};for(;u=this.nestingRegexp.exec(i);){let d=[];a={...r},a=a.replace&&!z(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let p=!1;if(u[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(u[1])){const g=u[1].split(this.formatSeparator).map(_=>_.trim());u[1]=g.shift(),d=g,p=!0}if(s=n(c.call(this,u[1].trim(),a),a),s&&u[0]===i&&!z(s))return s;z(s)||(s=Vo(s)),s||(this.logger.warn(`missed to resolve ${u[1]} for nesting ${i}`),s=""),p&&(s=d.reduce((g,_)=>this.format(g,_,r.lng,{...r,interpolationkey:u[1].trim()}),s.trim())),i=i.replace(u[0],s),this.regexp.lastIndex=0}return i}}const kh=h=>{let i=h.toLowerCase().trim();const n={};if(h.indexOf("(")>-1){const r=h.split("(");i=r[0].toLowerCase().trim();const u=r[1].substring(0,r[1].length-1);i==="currency"&&u.indexOf(":")<0?n.currency||(n.currency=u.trim()):i==="relativetime"&&u.indexOf(":")<0?n.range||(n.range=u.trim()):u.split(";").forEach(a=>{if(a){const[c,...d]=a.split(":"),p=d.join(":").trim().replace(/^'+|'+$/g,""),g=c.trim();n[g]||(n[g]=p),p==="false"&&(n[g]=!1),p==="true"&&(n[g]=!0),isNaN(p)||(n[g]=parseInt(p,10))}})}return{formatName:i,formatOptions:n}},le=h=>{const i={};return(n,r,u)=>{let s=u;u&&u.interpolationkey&&u.formatParams&&u.formatParams[u.interpolationkey]&&u[u.interpolationkey]&&(s={...s,[u.interpolationkey]:void 0});const a=r+JSON.stringify(s);let c=i[a];return c||(c=h(Li(r),u),i[a]=c),c(n)}};class Ah{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=At.create("formatter"),this.options=i,this.formats={number:le((n,r)=>{const u=new Intl.NumberFormat(n,{...r});return s=>u.format(s)}),currency:le((n,r)=>{const u=new Intl.NumberFormat(n,{...r,style:"currency"});return s=>u.format(s)}),datetime:le((n,r)=>{const u=new Intl.DateTimeFormat(n,{...r});return s=>u.format(s)}),relativetime:le((n,r)=>{const u=new Intl.RelativeTimeFormat(n,{...r});return s=>u.format(s,r.range||"day")}),list:le((n,r)=>{const u=new Intl.ListFormat(n,{...r});return s=>u.format(s)})},this.init(i)}init(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(i,n){this.formats[i.toLowerCase().trim()]=n}addCached(i,n){this.formats[i.toLowerCase().trim()]=le(n)}format(i,n,r){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=n.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(c=>c.indexOf(")")>-1)){const c=s.findIndex(d=>d.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,c)].join(this.formatSeparator)}return s.reduce((c,d)=>{var _;const{formatName:p,formatOptions:g}=kh(d);if(this.formats[p]){let v=c;try{const w=((_=u==null?void 0:u.formatParams)==null?void 0:_[u.interpolationkey])||{},x=w.locale||w.lng||u.locale||u.lng||r;v=this.formats[p](c,x,{...g,...u,...w})}catch(w){this.logger.warn(w)}return v}else this.logger.warn(`there was no format function for ${p}`);return c},i)}}const Ih=(h,i)=>{h.pending[i]!==void 0&&(delete h.pending[i],h.pendingCount--)};class Bh extends Ci{constructor(i,n,r){var s,a;let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=i,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=u,this.logger=At.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=u.maxParallelReads||10,this.readingCalls=0,this.maxRetries=u.maxRetries>=0?u.maxRetries:5,this.retryTimeout=u.retryTimeout>=1?u.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,r,u.backend,u)}queueLoad(i,n,r,u){const s={},a={},c={},d={};return i.forEach(p=>{let g=!0;n.forEach(_=>{const v=`${p}|${_}`;!r.reload&&this.store.hasResourceBundle(p,_)?this.state[v]=2:this.state[v]<0||(this.state[v]===1?a[v]===void 0&&(a[v]=!0):(this.state[v]=1,g=!1,a[v]===void 0&&(a[v]=!0),s[v]===void 0&&(s[v]=!0),d[_]===void 0&&(d[_]=!0)))}),g||(c[p]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:u}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(c),toLoadNamespaces:Object.keys(d)}}loaded(i,n,r){const u=i.split("|"),s=u[0],a=u[1];n&&this.emit("failedLoading",s,a,n),!n&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[i]=n?-1:2,n&&r&&(this.state[i]=0);const c={};this.queue.forEach(d=>{Lh(d.loaded,[s],a),Ih(d,i),n&&d.errors.push(n),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(p=>{c[p]||(c[p]={});const g=d.loaded[p];g.length&&g.forEach(_=>{c[p][_]===void 0&&(c[p][_]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(d=>!d.done)}read(i,n,r){let u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!i.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:n,fcName:r,tried:u,wait:s,callback:a});return}this.readingCalls++;const c=(p,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const _=this.waitingReads.shift();this.read(_.lng,_.ns,_.fcName,_.tried,_.wait,_.callback)}if(p&&g&&u<this.maxRetries){setTimeout(()=>{this.read.call(this,i,n,r,u+1,s*2,a)},s);return}a(p,g)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const p=d(i,n);p&&typeof p.then=="function"?p.then(g=>c(null,g)).catch(c):c(null,p)}catch(p){c(p)}return}return d(i,n,c)}prepareLoading(i,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();z(i)&&(i=this.languageUtils.toResolveHierarchy(i)),z(n)&&(n=[n]);const s=this.queueLoad(i,n,r,u);if(!s.toLoad.length)return s.pending.length||u(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(i,n,r){this.prepareLoading(i,n,{},r)}reload(i,n,r){this.prepareLoading(i,n,{reload:!0},r)}loadOne(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=i.split("|"),u=r[0],s=r[1];this.read(u,s,"read",void 0,void 0,(a,c)=>{a&&this.logger.warn(`${n}loading namespace ${s} for language ${u} failed`,a),!a&&c&&this.logger.log(`${n}loaded namespace ${s} for language ${u}`,c),this.loaded(i,a,c)})}saveMissing(i,n,r,u,s){var d,p,g,_,v;let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if((p=(d=this.services)==null?void 0:d.utils)!=null&&p.hasLoadedNamespace&&!((_=(g=this.services)==null?void 0:g.utils)!=null&&_.hasLoadedNamespace(n))){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if((v=this.backend)!=null&&v.create){const w={...a,isUpdate:s},x=this.backend.create.bind(this.backend);if(x.length<6)try{let P;x.length===5?P=x(i,n,r,u,w):P=x(i,n,r,u),P&&typeof P.then=="function"?P.then(O=>c(null,O)).catch(c):c(null,P)}catch(P){c(P)}else x(i,n,r,u,c,w)}!i||!i[0]||this.store.addResource(i[0],n,r,u)}}}const ss=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:h=>{let i={};if(typeof h[1]=="object"&&(i=h[1]),z(h[1])&&(i.defaultValue=h[1]),z(h[2])&&(i.tDescription=h[2]),typeof h[2]=="object"||typeof h[3]=="object"){const n=h[3]||h[2];Object.keys(n).forEach(r=>{i[r]=n[r]})}return i},interpolation:{escapeValue:!0,format:h=>h,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),rs=h=>{var i,n;return z(h.ns)&&(h.ns=[h.ns]),z(h.fallbackLng)&&(h.fallbackLng=[h.fallbackLng]),z(h.fallbackNS)&&(h.fallbackNS=[h.fallbackNS]),((n=(i=h.supportedLngs)==null?void 0:i.indexOf)==null?void 0:n.call(i,"cimode"))<0&&(h.supportedLngs=h.supportedLngs.concat(["cimode"])),typeof h.initImmediate=="boolean"&&(h.initAsync=h.initImmediate),h},ui=()=>{},Rh=h=>{Object.getOwnPropertyNames(Object.getPrototypeOf(h)).forEach(n=>{typeof h[n]=="function"&&(h[n]=h[n].bind(h))})};class De extends Ci{constructor(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=rs(i),this.services={},this.logger=At,this.modules={external:[]},Rh(this),n&&!this.isInitialized&&!i.isClone){if(!this.options.initAsync)return this.init(i,n),this;setTimeout(()=>{this.init(i,n)},0)}}init(){var i=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),n.defaultNS==null&&n.ns&&(z(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const u=ss();this.options={...u,...this.options,...rs(n)},this.options.interpolation={...u.interpolation,...this.options.interpolation},n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const s=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?At.init(s(this.modules.logger),this.options):At.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:g=Ah;const _=new es(this.options);this.store=new Yo(this.options.resources,this.options);const v=this.services;v.logger=At,v.resourceStore=this.store,v.languageUtils=_,v.pluralResolver=new Th(_,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===u.interpolation.format)&&(v.formatter=s(g),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new Eh(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new Bh(s(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(w){for(var x=arguments.length,P=new Array(x>1?x-1:0),O=1;O<x;O++)P[O-1]=arguments[O];i.emit(w,...P)}),this.modules.languageDetector&&(v.languageDetector=s(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=s(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new bi(this.services,this.options),this.translator.on("*",function(w){for(var x=arguments.length,P=new Array(x>1?x-1:0),O=1;O<x;O++)P[O-1]=arguments[O];i.emit(w,...P)}),this.modules.external.forEach(w=>{w.init&&w.init(this)})}if(this.format=this.options.interpolation.format,r||(r=ui),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return i.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return i.store[g](...arguments),i}});const d=Ae(),p=()=>{const g=(_,v)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(v),r(_,v)};if(this.languages&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initAsync?p():setTimeout(p,0),d}loadResources(i){var s,a;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ui;const u=z(i)?i:this.language;if(typeof i=="function"&&(r=i),!this.options.resources||this.options.partialBundledLanguages){if((u==null?void 0:u.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const c=[],d=p=>{if(!p||p==="cimode")return;this.services.languageUtils.toResolveHierarchy(p).forEach(_=>{_!=="cimode"&&c.indexOf(_)<0&&c.push(_)})};u?d(u):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(g=>d(g)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,p=>d(p)),this.services.backendConnector.load(c,this.options.ns,p=>{!p&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(p)})}else r(null)}reloadResources(i,n,r){const u=Ae();return typeof i=="function"&&(r=i,i=void 0),typeof n=="function"&&(r=n,n=void 0),i||(i=this.languages),n||(n=this.options.ns),r||(r=ui),this.services.backendConnector.reload(i,n,s=>{u.resolve(),r(s)}),u}use(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&Vs.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}setResolvedLanguage(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(i,n){var r=this;this.isLanguageChangingTo=i;const u=Ae();this.emit("languageChanging",i);const s=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},a=(d,p)=>{p?(s(p),this.translator.changeLanguage(p),this.isLanguageChangingTo=void 0,this.emit("languageChanged",p),this.logger.log("languageChanged",p)):this.isLanguageChangingTo=void 0,u.resolve(function(){return r.t(...arguments)}),n&&n(d,function(){return r.t(...arguments)})},c=d=>{var g,_;!i&&!d&&this.services.languageDetector&&(d=[]);const p=z(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);p&&(this.language||s(p),this.translator.language||this.translator.changeLanguage(p),(_=(g=this.services.languageDetector)==null?void 0:g.cacheUserLanguage)==null||_.call(g,p)),this.loadResources(p,v=>{a(v,p)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(i),u}getFixedT(i,n,r){var u=this;const s=function(a,c){let d;if(typeof c!="object"){for(var p=arguments.length,g=new Array(p>2?p-2:0),_=2;_<p;_++)g[_-2]=arguments[_];d=u.options.overloadTranslationOptionHandler([a,c].concat(g))}else d={...c};d.lng=d.lng||s.lng,d.lngs=d.lngs||s.lngs,d.ns=d.ns||s.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||s.keyPrefix);const v=u.options.keySeparator||".";let w;return d.keyPrefix&&Array.isArray(a)?w=a.map(x=>`${d.keyPrefix}${v}${x}`):w=d.keyPrefix?`${d.keyPrefix}${v}${a}`:a,u.t(w,d)};return z(i)?s.lng=i:s.lngs=i,s.ns=n,s.keyPrefix=r,s}t(){var u;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(u=this.translator)==null?void 0:u.translate(...n)}exists(){var u;for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(u=this.translator)==null?void 0:u.exists(...n)}setDefaultNamespace(i){this.options.defaultNS=i}hasLoadedNamespace(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(c,d)=>{const p=this.services.backendConnector.state[`${c}|${d}`];return p===-1||p===0||p===2};if(n.precheck){const c=n.precheck(this,a);if(c!==void 0)return c}return!!(this.hasResourceBundle(r,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,i)&&(!u||a(s,i)))}loadNamespaces(i,n){const r=Ae();return this.options.ns?(z(i)&&(i=[i]),i.forEach(u=>{this.options.ns.indexOf(u)<0&&this.options.ns.push(u)}),this.loadResources(u=>{r.resolve(),n&&n(u)}),r):(n&&n(),Promise.resolve())}loadLanguages(i,n){const r=Ae();z(i)&&(i=[i]);const u=this.options.preload||[],s=i.filter(a=>u.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=u.concat(s),this.loadResources(a=>{r.resolve(),n&&n(a)}),r):(n&&n(),Promise.resolve())}dir(i){var u,s;if(i||(i=this.resolvedLanguage||(((u=this.languages)==null?void 0:u.length)>0?this.languages[0]:this.language)),!i)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=((s=this.services)==null?void 0:s.languageUtils)||new es(ss());return n.indexOf(r.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new De(i,n)}cloneInstance(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ui;const r=i.forkResourceStore;r&&delete i.forkResourceStore;const u={...this.options,...i,isClone:!0},s=new De(u);if((i.debug!==void 0||i.prefix!==void 0)&&(s.logger=s.logger.clone(i)),["store","services","language"].forEach(c=>{s[c]=this[c]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const c=Object.keys(this.store.data).reduce((d,p)=>(d[p]={...this.store.data[p]},Object.keys(d[p]).reduce((g,_)=>(g[_]={...d[p][_]},g),{})),{});s.store=new Yo(c,u),s.services.resourceStore=s.store}return s.translator=new bi(s.services,u),s.translator.on("*",function(c){for(var d=arguments.length,p=new Array(d>1?d-1:0),g=1;g<d;g++)p[g-1]=arguments[g];s.emit(c,...p)}),s.init(u,n),s.translator.options=u,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const et=De.createInstance();et.createInstance=De.createInstance;et.createInstance;et.dir;et.init;et.loadResources;et.reloadResources;et.use;et.changeLanguage;et.getFixedT;et.t;et.exists;et.setDefaultNamespace;et.hasLoadedNamespace;et.loadNamespaces;et.loadLanguages;const{slice:zh,forEach:Nh}=[];function Zh(h){return Nh.call(zh.call(arguments,1),i=>{if(i)for(const n in i)h[n]===void 0&&(h[n]=i[n])}),h}const as=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Dh=function(h,i){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},u=encodeURIComponent(i);let s=`${h}=${u}`;if(r.maxAge>0){const a=r.maxAge-0;if(Number.isNaN(a))throw new Error("maxAge should be a Number");s+=`; Max-Age=${Math.floor(a)}`}if(r.domain){if(!as.test(r.domain))throw new TypeError("option domain is invalid");s+=`; Domain=${r.domain}`}if(r.path){if(!as.test(r.path))throw new TypeError("option path is invalid");s+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");s+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"strict":s+="; SameSite=Strict";break;case"none":s+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s},hs={create(h,i,n,r){let u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(u.expires=new Date,u.expires.setTime(u.expires.getTime()+n*60*1e3)),r&&(u.domain=r),document.cookie=Dh(h,encodeURIComponent(i),u)},read(h){const i=`${h}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let u=n[r];for(;u.charAt(0)===" ";)u=u.substring(1,u.length);if(u.indexOf(i)===0)return u.substring(i.length,u.length)}return null},remove(h){this.create(h,"",-1)}};var Fh={name:"cookie",lookup(h){let{lookupCookie:i}=h;if(i&&typeof document<"u")return hs.read(i)||void 0},cacheUserLanguage(h,i){let{lookupCookie:n,cookieMinutes:r,cookieDomain:u,cookieOptions:s}=i;n&&typeof document<"u"&&hs.create(n,h,r,u,s)}},Uh={name:"querystring",lookup(h){var r;let{lookupQuerystring:i}=h,n;if(typeof window<"u"){let{search:u}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(u=window.location.hash.substring(window.location.hash.indexOf("?")));const a=u.substring(1).split("&");for(let c=0;c<a.length;c++){const d=a[c].indexOf("=");d>0&&a[c].substring(0,d)===i&&(n=a[c].substring(d+1))}}return n}};let ue=null;const ls=()=>{if(ue!==null)return ue;try{if(ue=typeof window<"u"&&window.localStorage!==null,!ue)return!1;const h="i18next.translate.boo";window.localStorage.setItem(h,"foo"),window.localStorage.removeItem(h)}catch{ue=!1}return ue};var jh={name:"localStorage",lookup(h){let{lookupLocalStorage:i}=h;if(i&&ls())return window.localStorage.getItem(i)||void 0},cacheUserLanguage(h,i){let{lookupLocalStorage:n}=i;n&&ls()&&window.localStorage.setItem(n,h)}};let ce=null;const us=()=>{if(ce!==null)return ce;try{if(ce=typeof window<"u"&&window.sessionStorage!==null,!ce)return!1;const h="i18next.translate.boo";window.sessionStorage.setItem(h,"foo"),window.sessionStorage.removeItem(h)}catch{ce=!1}return ce};var Gh={name:"sessionStorage",lookup(h){let{lookupSessionStorage:i}=h;if(i&&us())return window.sessionStorage.getItem(i)||void 0},cacheUserLanguage(h,i){let{lookupSessionStorage:n}=i;n&&us()&&window.sessionStorage.setItem(n,h)}},Hh={name:"navigator",lookup(h){const i=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:u}=navigator;if(n)for(let s=0;s<n.length;s++)i.push(n[s]);r&&i.push(r),u&&i.push(u)}return i.length>0?i:void 0}},Wh={name:"htmlTag",lookup(h){let{htmlTag:i}=h,n;const r=i||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},$h={name:"path",lookup(h){var u;let{lookupFromPathIndex:i}=h;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(u=n[typeof i=="number"?i:0])==null?void 0:u.replace("/",""):void 0}},qh={name:"subdomain",lookup(h){var u,s;let{lookupFromSubdomainIndex:i}=h;const n=typeof i=="number"?i+1:1,r=typeof window<"u"&&((s=(u=window.location)==null?void 0:u.hostname)==null?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};let Ks=!1;try{document.cookie,Ks=!0}catch{}const Js=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ks||Js.splice(1,1);const Vh=()=>({order:Js,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:h=>h});class Xs{constructor(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(i,n)}init(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=i,this.options=Zh(n,this.options||{},Vh()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=u=>u.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Fh),this.addDetector(Uh),this.addDetector(jh),this.addDetector(Gh),this.addDetector(Hh),this.addDetector(Wh),this.addDetector($h),this.addDetector(qh)}addDetector(i){return this.detectors[i.name]=i,this}detect(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return i.forEach(r=>{if(this.detectors[r]){let u=this.detectors[r].lookup(this.options);u&&typeof u=="string"&&(u=[u]),u&&(n=n.concat(u))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(i){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(i)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(i,this.options)}))}}Xs.type="languageDetector";function yn(h){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},yn(h)}function Ys(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":yn(XMLHttpRequest))==="object"}function Kh(h){return!!h&&typeof h.then=="function"}function Jh(h){return Kh(h)?h:Promise.resolve(h)}const Xh="modulepreload",Yh=function(h){return"/"+h},cs={},Qh=function(i,n,r){let u=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));u=Promise.allSettled(n.map(d=>{if(d=Yh(d),d in cs)return;cs[d]=!0;const p=d.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${g}`))return;const _=document.createElement("link");if(_.rel=p?"stylesheet":Xh,p||(_.as="script"),_.crossOrigin="",_.href=d,c&&_.setAttribute("nonce",c),document.head.appendChild(_),p)return new Promise((v,w)=>{_.addEventListener("load",v),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return u.then(a=>{for(const c of a||[])c.status==="rejected"&&s(c.reason);return i().catch(s)})};function fs(h,i){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(h);i&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),n.push.apply(n,r)}return n}function ds(h){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?fs(Object(n),!0).forEach(function(r){tl(h,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach(function(r){Object.defineProperty(h,r,Object.getOwnPropertyDescriptor(n,r))})}return h}function tl(h,i,n){return(i=el(i))in h?Object.defineProperty(h,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):h[i]=n,h}function el(h){var i=il(h,"string");return Yt(i)=="symbol"?i:i+""}function il(h,i){if(Yt(h)!="object"||!h)return h;var n=h[Symbol.toPrimitive];if(n!==void 0){var r=n.call(h,i);if(Yt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(h)}function Yt(h){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Yt(h)}var Ht=typeof fetch=="function"?fetch:void 0;typeof global<"u"&&global.fetch?Ht=global.fetch:typeof window<"u"&&window.fetch&&(Ht=window.fetch);var Fe;Ys()&&(typeof global<"u"&&global.XMLHttpRequest?Fe=global.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Fe=window.XMLHttpRequest));var xi;typeof ActiveXObject=="function"&&(typeof global<"u"&&global.ActiveXObject?xi=global.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(xi=window.ActiveXObject));typeof Ht!="function"&&(Ht=void 0);if(!Ht&&!Fe&&!xi)try{Qh(()=>import("./browser-ponyfill-CmE3Q57C.js").then(h=>h.b),[]).then(function(h){Ht=h.default}).catch(function(){})}catch{}var Ln=function(i,n){if(n&&Yt(n)==="object"){var r="";for(var u in n)r+="&"+encodeURIComponent(u)+"="+encodeURIComponent(n[u]);if(!r)return i;i=i+(i.indexOf("?")!==-1?"&":"?")+r.slice(1)}return i},ps=function(i,n,r,u){var s=function(d){if(!d.ok)return r(d.statusText||"Error",{status:d.status});d.text().then(function(p){r(null,{status:d.status,data:p})}).catch(r)};if(u){var a=u(i,n);if(a instanceof Promise){a.then(s).catch(r);return}}typeof fetch=="function"?fetch(i,n).then(s).catch(r):Ht(i,n).then(s).catch(r)},ms=!1,nl=function(i,n,r,u){i.queryStringParams&&(n=Ln(n,i.queryStringParams));var s=ds({},typeof i.customHeaders=="function"?i.customHeaders():i.customHeaders);typeof window>"u"&&typeof global<"u"&&typeof global.process<"u"&&global.process.versions&&global.process.versions.node&&(s["User-Agent"]="i18next-http-backend (node/".concat(global.process.version,"; ").concat(global.process.platform," ").concat(global.process.arch,")")),r&&(s["Content-Type"]="application/json");var a=typeof i.requestOptions=="function"?i.requestOptions(r):i.requestOptions,c=ds({method:r?"POST":"GET",body:r?i.stringify(r):void 0,headers:s},ms?{}:a),d=typeof i.alternateFetch=="function"&&i.alternateFetch.length>=1?i.alternateFetch:void 0;try{ps(n,c,u,d)}catch(p){if(!a||Object.keys(a).length===0||!p.message||p.message.indexOf("not implemented")<0)return u(p);try{Object.keys(a).forEach(function(g){delete c[g]}),ps(n,c,u,d),ms=!0}catch(g){u(g)}}},ol=function(i,n,r,u){r&&Yt(r)==="object"&&(r=Ln("",r).slice(1)),i.queryStringParams&&(n=Ln(n,i.queryStringParams));try{var s=Fe?new Fe:new xi("MSXML2.XMLHTTP.3.0");s.open(r?"POST":"GET",n,1),i.crossDomain||s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.withCredentials=!!i.withCredentials,r&&s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.overrideMimeType&&s.overrideMimeType("application/json");var a=i.customHeaders;if(a=typeof a=="function"?a():a,a)for(var c in a)s.setRequestHeader(c,a[c]);s.onreadystatechange=function(){s.readyState>3&&u(s.status>=400?s.statusText:null,{status:s.status,data:s.responseText})},s.send(r)}catch(d){console&&console.log(d)}},sl=function(i,n,r,u){if(typeof r=="function"&&(u=r,r=void 0),u=u||function(){},Ht&&n.indexOf("file:")!==0)return nl(i,n,r,u);if(Ys()||typeof ActiveXObject=="function")return ol(i,n,r,u);u(new Error("No fetch and no xhr implementation found!"))};function me(h){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},me(h)}function _s(h,i){var n=Object.keys(h);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(h);i&&(r=r.filter(function(u){return Object.getOwnPropertyDescriptor(h,u).enumerable})),n.push.apply(n,r)}return n}function hn(h){for(var i=1;i<arguments.length;i++){var n=arguments[i]!=null?arguments[i]:{};i%2?_s(Object(n),!0).forEach(function(r){Qs(h,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(n)):_s(Object(n)).forEach(function(r){Object.defineProperty(h,r,Object.getOwnPropertyDescriptor(n,r))})}return h}function rl(h,i){if(!(h instanceof i))throw new TypeError("Cannot call a class as a function")}function al(h,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(h,tr(r.key),r)}}function hl(h,i,n){return i&&al(h.prototype,i),Object.defineProperty(h,"prototype",{writable:!1}),h}function Qs(h,i,n){return(i=tr(i))in h?Object.defineProperty(h,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):h[i]=n,h}function tr(h){var i=ll(h,"string");return me(i)=="symbol"?i:i+""}function ll(h,i){if(me(h)!="object"||!h)return h;var n=h[Symbol.toPrimitive];if(n!==void 0){var r=n.call(h,i);if(me(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(h)}var ul=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",parse:function(n){return JSON.parse(n)},stringify:JSON.stringify,parsePayload:function(n,r,u){return Qs({},r,u||"")},parseLoadPayload:function(n,r){},request:sl,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},er=function(){function h(i){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};rl(this,h),this.services=i,this.options=n,this.allOptions=r,this.type="backend",this.init(i,n,r)}return hl(h,[{key:"init",value:function(n){var r=this,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.services=n,this.options=hn(hn(hn({},ul()),this.options||{}),u),this.allOptions=s,this.services&&this.options.reloadInterval){var a=setInterval(function(){return r.reload()},this.options.reloadInterval);me(a)==="object"&&typeof a.unref=="function"&&a.unref()}}},{key:"readMulti",value:function(n,r,u){this._readAny(n,n,r,r,u)}},{key:"read",value:function(n,r,u){this._readAny([n],n,[r],r,u)}},{key:"_readAny",value:function(n,r,u,s,a){var c=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(n,u)),d=Jh(d),d.then(function(p){if(!p)return a(null,{});var g=c.services.interpolator.interpolate(p,{lng:n.join("+"),ns:u.join("+")});c.loadUrl(g,a,r,s)})}},{key:"loadUrl",value:function(n,r,u,s){var a=this,c=typeof u=="string"?[u]:u,d=typeof s=="string"?[s]:s,p=this.options.parseLoadPayload(c,d);this.options.request(this.options,n,p,function(g,_){if(_&&(_.status>=500&&_.status<600||!_.status))return r("failed loading "+n+"; status code: "+_.status,!0);if(_&&_.status>=400&&_.status<500)return r("failed loading "+n+"; status code: "+_.status,!1);if(!_&&g&&g.message){var v=g.message.toLowerCase(),w=["failed","fetch","network","load"].find(function(O){return v.indexOf(O)>-1});if(w)return r("failed loading "+n+": "+g.message,!0)}if(g)return r(g,!1);var x,P;try{typeof _.data=="string"?x=a.options.parse(_.data,u,s):x=_.data}catch{P="failed parsing "+n+" to json"}if(P)return r(P,!1);r(null,x)})}},{key:"create",value:function(n,r,u,s,a){var c=this;if(this.options.addPath){typeof n=="string"&&(n=[n]);var d=this.options.parsePayload(r,u,s),p=0,g=[],_=[];n.forEach(function(v){var w=c.options.addPath;typeof c.options.addPath=="function"&&(w=c.options.addPath(v,r));var x=c.services.interpolator.interpolate(w,{lng:v,ns:r});c.options.request(c.options,x,d,function(P,O){p+=1,g.push(P),_.push(O),p===n.length&&typeof a=="function"&&a(g,_)})})}}},{key:"reload",value:function(){var n=this,r=this.services,u=r.backendConnector,s=r.languageUtils,a=r.logger,c=u.language;if(!(c&&c.toLowerCase()==="cimode")){var d=[],p=function(_){var v=s.toResolveHierarchy(_);v.forEach(function(w){d.indexOf(w)<0&&d.push(w)})};p(c),this.allOptions.preload&&this.allOptions.preload.forEach(function(g){return p(g)}),d.forEach(function(g){n.allOptions.ns.forEach(function(_){u.read(g,_,"read",null,null,function(v,w){v&&a.warn("loading namespace ".concat(_," for language ").concat(g," failed"),v),!v&&w&&a.log("loaded namespace ".concat(_," for language ").concat(g),w),u.loaded("".concat(g,"|").concat(_),v,w)})})})}}}])}();er.type="backend";const cl=et.use(er).use(Xs).init({fallbackLng:"en-GB",debug:!1,backend:{loadPath:"/locales/{{lng}}.json"}});function wn(h,i,n,r){let u=r;const s=i+(n-i>>1);let a=n-i,c;const d=h[i],p=h[i+1],g=h[n],_=h[n+1];for(let v=i+3;v<n;v+=3){const w=fl(h[v],h[v+1],d,p,g,_);if(w>u)c=v,u=w;else if(w===u){const x=Math.abs(v-s);x<a&&(c=v,a=x)}}u>r&&(c-i>3&&wn(h,i,c,r),h[c+2]=u,n-c>3&&wn(h,c,n,r))}function fl(h,i,n,r,u,s){let a=u-n,c=s-r;if(a!==0||c!==0){const d=((h-n)*a+(i-r)*c)/(a*a+c*c);d>1?(n=u,r=s):d>0&&(n+=a*d,r+=c*d)}return a=h-n,c=i-r,a*a+c*c}function Ue(h,i,n,r){const u={id:h??null,type:i,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(i==="Point"||i==="MultiPoint"||i==="LineString")ci(u,n);else if(i==="Polygon")ci(u,n[0]);else if(i==="MultiLineString")for(const s of n)ci(u,s);else if(i==="MultiPolygon")for(const s of n)ci(u,s[0]);return u}function ci(h,i){for(let n=0;n<i.length;n+=3)h.minX=Math.min(h.minX,i[n]),h.minY=Math.min(h.minY,i[n+1]),h.maxX=Math.max(h.maxX,i[n]),h.maxY=Math.max(h.maxY,i[n+1])}function dl(h,i){const n=[];if(h.type==="FeatureCollection")for(let r=0;r<h.features.length;r++)mi(n,h.features[r],i,r);else h.type==="Feature"?mi(n,h,i):mi(n,{geometry:h},i);return n}function mi(h,i,n,r){if(!i.geometry)return;const u=i.geometry.coordinates;if(u&&u.length===0)return;const s=i.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2);let c=[],d=i.id;if(n.promoteId?d=i.properties[n.promoteId]:n.generateId&&(d=r||0),s==="Point")gs(u,c);else if(s==="MultiPoint")for(const p of u)gs(p,c);else if(s==="LineString")bn(u,c,a,!1);else if(s==="MultiLineString")if(n.lineMetrics){for(const p of u)c=[],bn(p,c,a,!1),h.push(Ue(d,"LineString",c,i.properties));return}else ln(u,c,a,!1);else if(s==="Polygon")ln(u,c,a,!0);else if(s==="MultiPolygon")for(const p of u){const g=[];ln(p,g,a,!0),c.push(g)}else if(s==="GeometryCollection"){for(const p of i.geometry.geometries)mi(h,{id:d,geometry:p,properties:i.properties},n,r);return}else throw new Error("Input data is not a valid GeoJSON object.");h.push(Ue(d,s,c,i.properties))}function gs(h,i){i.push(ir(h[0]),nr(h[1]),0)}function bn(h,i,n,r){let u,s,a=0;for(let d=0;d<h.length;d++){const p=ir(h[d][0]),g=nr(h[d][1]);i.push(p,g,0),d>0&&(r?a+=(u*g-p*s)/2:a+=Math.sqrt(Math.pow(p-u,2)+Math.pow(g-s,2))),u=p,s=g}const c=i.length-3;i[2]=1,wn(i,0,c,n),i[c+2]=1,i.size=Math.abs(a),i.start=0,i.end=i.size}function ln(h,i,n,r){for(let u=0;u<h.length;u++){const s=[];bn(h[u],s,n,r),i.push(s)}}function ir(h){return h/360+.5}function nr(h){const i=Math.sin(h*Math.PI/180),n=.5-.25*Math.log((1+i)/(1-i))/Math.PI;return n<0?0:n>1?1:n}function Dt(h,i,n,r,u,s,a,c){if(n/=i,r/=i,s>=n&&a<r)return h;if(a<n||s>=r)return null;const d=[];for(const p of h){const g=p.geometry;let _=p.type;const v=u===0?p.minX:p.minY,w=u===0?p.maxX:p.maxY;if(v>=n&&w<r){d.push(p);continue}else if(w<n||v>=r)continue;let x=[];if(_==="Point"||_==="MultiPoint")pl(g,x,n,r,u);else if(_==="LineString")or(g,x,n,r,u,!1,c.lineMetrics);else if(_==="MultiLineString")un(g,x,n,r,u,!1);else if(_==="Polygon")un(g,x,n,r,u,!0);else if(_==="MultiPolygon")for(const P of g){const O=[];un(P,O,n,r,u,!0),O.length&&x.push(O)}if(x.length){if(c.lineMetrics&&_==="LineString"){for(const P of x)d.push(Ue(p.id,_,P,p.tags));continue}(_==="LineString"||_==="MultiLineString")&&(x.length===1?(_="LineString",x=x[0]):_="MultiLineString"),(_==="Point"||_==="MultiPoint")&&(_=x.length===3?"Point":"MultiPoint"),d.push(Ue(p.id,_,x,p.tags))}}return d.length?d:null}function pl(h,i,n,r,u){for(let s=0;s<h.length;s+=3){const a=h[s+u];a>=n&&a<=r&&pe(i,h[s],h[s+1],h[s+2])}}function or(h,i,n,r,u,s,a){let c=vs(h);const d=u===0?ml:_l;let p=h.start,g,_;for(let M=0;M<h.length-3;M+=3){const E=h[M],I=h[M+1],W=h[M+2],F=h[M+3],$=h[M+4],U=u===0?E:I,J=u===0?F:$;let _t=!1;a&&(g=Math.sqrt(Math.pow(E-F,2)+Math.pow(I-$,2))),U<n?J>n&&(_=d(c,E,I,F,$,n),a&&(c.start=p+g*_)):U>r?J<r&&(_=d(c,E,I,F,$,r),a&&(c.start=p+g*_)):pe(c,E,I,W),J<n&&U>=n&&(_=d(c,E,I,F,$,n),_t=!0),J>r&&U<=r&&(_=d(c,E,I,F,$,r),_t=!0),!s&&_t&&(a&&(c.end=p+g*_),i.push(c),c=vs(h)),a&&(p+=g)}let v=h.length-3;const w=h[v],x=h[v+1],P=h[v+2],O=u===0?w:x;O>=n&&O<=r&&pe(c,w,x,P),v=c.length-3,s&&v>=3&&(c[v]!==c[0]||c[v+1]!==c[1])&&pe(c,c[0],c[1],c[2]),c.length&&i.push(c)}function vs(h){const i=[];return i.size=h.size,i.start=h.start,i.end=h.end,i}function un(h,i,n,r,u,s){for(const a of h)or(a,i,n,r,u,s,!1)}function pe(h,i,n,r){h.push(i,n,r)}function ml(h,i,n,r,u,s){const a=(s-i)/(r-i);return pe(h,s,n+(u-n)*a,1),a}function _l(h,i,n,r,u,s){const a=(s-n)/(u-n);return pe(h,i+(r-i)*a,s,1),a}function gl(h,i){const n=i.buffer/i.extent;let r=h;const u=Dt(h,1,-1-n,n,0,-1,2,i),s=Dt(h,1,1-n,2+n,0,-1,2,i);return(u||s)&&(r=Dt(h,1,-n,1+n,0,-1,2,i)||[],u&&(r=ys(u,1).concat(r)),s&&(r=r.concat(ys(s,-1)))),r}function ys(h,i){const n=[];for(let r=0;r<h.length;r++){const u=h[r],s=u.type;let a;if(s==="Point"||s==="MultiPoint"||s==="LineString")a=cn(u.geometry,i);else if(s==="MultiLineString"||s==="Polygon"){a=[];for(const c of u.geometry)a.push(cn(c,i))}else if(s==="MultiPolygon"){a=[];for(const c of u.geometry){const d=[];for(const p of c)d.push(cn(p,i));a.push(d)}}n.push(Ue(u.id,s,a,u.tags))}return n}function cn(h,i){const n=[];n.size=h.size,h.start!==void 0&&(n.start=h.start,n.end=h.end);for(let r=0;r<h.length;r+=3)n.push(h[r]+i,h[r+1],h[r+2]);return n}function Ls(h,i){if(h.transformed)return h;const n=1<<h.z,r=h.x,u=h.y;for(const s of h.features){const a=s.geometry,c=s.type;if(s.geometry=[],c===1)for(let d=0;d<a.length;d+=2)s.geometry.push(ws(a[d],a[d+1],i,n,r,u));else for(let d=0;d<a.length;d++){const p=[];for(let g=0;g<a[d].length;g+=2)p.push(ws(a[d][g],a[d][g+1],i,n,r,u));s.geometry.push(p)}}return h.transformed=!0,h}function ws(h,i,n,r,u,s){return[Math.round(n*(h*r-u)),Math.round(n*(i*r-s))]}function vl(h,i,n,r,u){const s=i===u.maxZoom?0:u.tolerance/((1<<i)*u.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:h.length,source:null,x:n,y:r,z:i,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const c of h)yl(a,c,s,u);return a}function yl(h,i,n,r){const u=i.geometry,s=i.type,a=[];if(h.minX=Math.min(h.minX,i.minX),h.minY=Math.min(h.minY,i.minY),h.maxX=Math.max(h.maxX,i.maxX),h.maxY=Math.max(h.maxY,i.maxY),s==="Point"||s==="MultiPoint")for(let c=0;c<u.length;c+=3)a.push(u[c],u[c+1]),h.numPoints++,h.numSimplified++;else if(s==="LineString")fn(a,u,h,n,!1,!1);else if(s==="MultiLineString"||s==="Polygon")for(let c=0;c<u.length;c++)fn(a,u[c],h,n,s==="Polygon",c===0);else if(s==="MultiPolygon")for(let c=0;c<u.length;c++){const d=u[c];for(let p=0;p<d.length;p++)fn(a,d[p],h,n,!0,p===0)}if(a.length){let c=i.tags||null;if(s==="LineString"&&r.lineMetrics){c={};for(const p in i.tags)c[p]=i.tags[p];c.mapbox_clip_start=u.start/u.size,c.mapbox_clip_end=u.end/u.size}const d={geometry:a,type:s==="Polygon"||s==="MultiPolygon"?3:s==="LineString"||s==="MultiLineString"?2:1,tags:c};i.id!==null&&(d.id=i.id),h.features.push(d)}}function fn(h,i,n,r,u,s){const a=r*r;if(r>0&&i.size<(u?a:r)){n.numPoints+=i.length/3;return}const c=[];for(let d=0;d<i.length;d+=3)(r===0||i[d+2]>a)&&(n.numSimplified++,c.push(i[d],i[d+1])),n.numPoints++;u&&Ll(c,s),h.push(c)}function Ll(h,i){let n=0;for(let r=0,u=h.length,s=u-2;r<u;s=r,r+=2)n+=(h[r]-h[s])*(h[r+1]+h[s+1]);if(n>0===i)for(let r=0,u=h.length;r<u/2;r+=2){const s=h[r],a=h[r+1];h[r]=h[u-2-r],h[r+1]=h[u-1-r],h[u-2-r]=s,h[u-1-r]=a}}const wl={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class bl{constructor(i,n){n=this.options=xl(Object.create(wl),n);const r=n.debug;if(r&&console.time("preprocess data"),n.maxZoom<0||n.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(n.promoteId&&n.generateId)throw new Error("promoteId and generateId cannot be used together.");let u=dl(i,n);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",n.indexMaxZoom,n.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),u=gl(u,n),u.length&&this.splitTile(u,0,0,0),r&&(u.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(i,n,r,u,s,a,c){const d=[i,n,r,u],p=this.options,g=p.debug;for(;d.length;){u=d.pop(),r=d.pop(),n=d.pop(),i=d.pop();const _=1<<n,v=dn(n,r,u);let w=this.tiles[v];if(!w&&(g>1&&console.time("creation"),w=this.tiles[v]=vl(i,n,r,u,p),this.tileCoords.push({z:n,x:r,y:u}),g)){g>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",n,r,u,w.numFeatures,w.numPoints,w.numSimplified),console.timeEnd("creation"));const J=`z${n}`;this.stats[J]=(this.stats[J]||0)+1,this.total++}if(w.source=i,s==null){if(n===p.indexMaxZoom||w.numPoints<=p.indexMaxPoints)continue}else{if(n===p.maxZoom||n===s)continue;if(s!=null){const J=s-n;if(r!==a>>J||u!==c>>J)continue}}if(w.source=null,i.length===0)continue;g>1&&console.time("clipping");const x=.5*p.buffer/p.extent,P=.5-x,O=.5+x,M=1+x;let E=null,I=null,W=null,F=null,$=Dt(i,_,r-x,r+O,0,w.minX,w.maxX,p),U=Dt(i,_,r+P,r+M,0,w.minX,w.maxX,p);i=null,$&&(E=Dt($,_,u-x,u+O,1,w.minY,w.maxY,p),I=Dt($,_,u+P,u+M,1,w.minY,w.maxY,p),$=null),U&&(W=Dt(U,_,u-x,u+O,1,w.minY,w.maxY,p),F=Dt(U,_,u+P,u+M,1,w.minY,w.maxY,p),U=null),g>1&&console.timeEnd("clipping"),d.push(E||[],n+1,r*2,u*2),d.push(I||[],n+1,r*2,u*2+1),d.push(W||[],n+1,r*2+1,u*2),d.push(F||[],n+1,r*2+1,u*2+1)}}getTile(i,n,r){i=+i,n=+n,r=+r;const u=this.options,{extent:s,debug:a}=u;if(i<0||i>24)return null;const c=1<<i;n=n+c&c-1;const d=dn(i,n,r);if(this.tiles[d])return Ls(this.tiles[d],s);a>1&&console.log("drilling down to z%d-%d-%d",i,n,r);let p=i,g=n,_=r,v;for(;!v&&p>0;)p--,g=g>>1,_=_>>1,v=this.tiles[dn(p,g,_)];return!v||!v.source?null:(a>1&&(console.log("found parent tile z%d-%d-%d",p,g,_),console.time("drilling down")),this.splitTile(v.source,p,g,_,i,n,r),a>1&&console.timeEnd("drilling down"),this.tiles[d]?Ls(this.tiles[d],s):null)}}function dn(h,i,n){return((1<<h)*n+i)*32+h}function xl(h,i){for(const n in i)h[n]=i[n];return h}function Cl(h,i){return new bl(h,i)}L.GeoJSON.VT=L.GridLayer.extend({options:{async:!1},initialize:function(h,i){L.setOptions(this,i),L.GridLayer.prototype.initialize.call(this,i),this.tileIndex=geojsonvt(h,this.options)},createTile:function(h){var i=L.DomUtil.create("canvas","leaflet-tile"),n=this.getTileSize();i.width=n.x,i.height=n.y;for(var r=i.getContext("2d"),u=this.tileIndex.getTile(h.z,h.x,h.y),s=u?u.features:[],a=0;a<s.length;a++){var c=s[a];this.drawFeature(r,c)}return i},drawFeature:function(h,i){i.type;var n=i.type;if(h.beginPath(),this.options.style&&(this.options.style instanceof Function?this.setStyle(h,this.options.style(i.tags)):this.setStyle(h,this.options.style)),n===2||n===3)for(var r=0;r<i.geometry.length;r++)for(var u=i.geometry[r],s=0;s<u.length;s++){var a=u[s];s?h.lineTo(a[0]/16,a[1]/16):h.moveTo(a[0]/16,a[1]/16)}else if(n===1)for(var r=0;r<i.geometry.length;r++){var a=i.geometry[r];h.arc(a[0]/16,a[1]/16,2,0,Math.PI*2,!0)}n===3&&h.fill(this.options.style.fillRule||"evenodd"),h.stroke()},setStyle:function(h,i){i.stroke;{h.lineWidth=i.weight||5;var n=this.setOpacity(i.color,i.opacity);h.strokeStyle=n}i.fill;{h.fillStyle=i.fillColor||"#03f";var n=this.setOpacity(i.fillColor,i.fillOpacity);h.fillStyle=n}},setOpacity:function(h,i){if(i){var h=h||"#03f";if(h.iscolorHex()){var n=h.colorRgb();return"rgba("+n[0]+","+n[1]+","+n[2]+","+i+")"}else return h}else return h}});L.geoJson.vt=function(h,i){return new L.GeoJSON.VT(h,i)};String.prototype.iscolorHex=function(){var h=this.toLowerCase(),i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;return i.test(h)};String.prototype.colorRgb=function(){var h=this.toLowerCase();if(h.length===4){for(var i="#",n=1;n<4;n+=1)i+=h.slice(n,n+1).concat(h.slice(n,n+1));h=i}for(var r=[],n=1;n<7;n+=2)r.push(parseInt("0x"+h.slice(n,n+2)));return r};window.geojsonvt=Cl;const Pl=()=>{const h=r=>({type:"Feature",geometry:{type:"Point",coordinates:[r[1],r[0]]}}),i=r=>({type:"FeatureCollection",features:r.map(u=>h(u))}),n={name:"tracks",maxZoom:20,tolerance:3,debug:0,style:{color:"#3388FF",weight:2,fillOpacity:.2},zIndex:2};return{setFromQuadTree(r){const u=i(r.points());return L.geoJson.vt(u,n)},async setFromExtralayer(r){return fetch(r.url).then(u=>u.json()).then(u=>L.geoJson.vt(u,{name:r.name,style:function(s){return{color:s.flag?r.color:"#FF00FF",weight:10,opacity:1}}}))}}},Sl={onAdd:function(){return L.DomUtil.create("progress","loader")},loadWithCurrentTotal:(h,i)=>{const n=document.getElementsByClassName("loader")[0];n.min=0,n.max=i,n.value=h,n.style.display="block"},load:()=>{const h=document.getElementsByClassName("loader")[0];h.style.display="block"},stop:()=>{document.getElementsByClassName("loader")[0].style.display="none"}},Ol=h=>{L.Control.ProgressBar=L.Control.extend(Sl);const i=new L.Control.ProgressBar({position:"bottomleft"});return i.addTo(h),i.stop(),i},Ml=()=>{const h="uploadedFiles";return{isAlreadyLoaded(i){return(JSON.parse(localStorage.getItem(h))||[]).includes(i.name)},saveUploadedFile(i){if(!this.isAlreadyLoaded(i)){const r=[...JSON.parse(localStorage.getItem(h))||[],i.name];localStorage.setItem(h,JSON.stringify(r))}},clear(){localStorage.removeItem(h)},getAll(){return JSON.parse(localStorage.getItem(h))||[]},putAll(i){localStorage.setItem(h,JSON.stringify(i))}}},Tl=()=>{const h="geodb",i="geoData",n="estuve-quadtree";return{openDatabase(){return new Promise((r,u)=>{const s=indexedDB.open(h,1);s.onupgradeneeded=function(a){const c=a.target.result;c.objectStoreNames.contains(i)||c.createObjectStore(i,{keyPath:"id"})},s.onsuccess=function(a){r(a.target.result)},s.onerror=function(a){u(a.target.error)}})},async save(r){const s=(await this.openDatabase()).transaction(i,"readwrite");return s.objectStore(i).put({id:n,data:r}),new Promise((c,d)=>{s.oncomplete=()=>c(),s.onerror=()=>d(s.error)})},async load(){const a=(await this.openDatabase()).transaction(i,"readonly").objectStore(i).get(n);return new Promise((c,d)=>{a.onsuccess=()=>{var p;if(a.result&&((p=a.result)!=null&&p.data)){c(Et.fromObject(a.result.data));return}c(Et.empty())},a.onerror=()=>d(a.error)})},async clear(){const u=(await this.openDatabase()).transaction(i,"readwrite");return u.objectStore(i).delete(n),new Promise((a,c)=>{u.oncomplete=()=>a(),u.onerror=()=>c(u.error)})}}},El=()=>{const h="layers";return{putLayer(i){const r=[...JSON.parse(localStorage.getItem(h))||[],i];localStorage.setItem(h,JSON.stringify(r))},removeLayer(i){const r=(JSON.parse(localStorage.getItem(h))||[]).filter(u=>u.name!==i);localStorage.setItem(h,JSON.stringify(r))},getAll(){return JSON.parse(localStorage.getItem(h))||[]},putAll(i){localStorage.setItem(h,JSON.stringify(i))},clear(){localStorage.removeItem(h)}}};let bs;const kl=h=>{const i=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(h),n=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png?",{maxZoom:20,attribution:'&copy; <a href="https://opentopomap.org/about">OpenTopoMap</a>'}),r=L.tileLayer.wms("https://geoserveis.icgc.cat/geoserver/nivoallaus/wms?",{layers:"zonesallaus",opacity:.4}),u=L.tileLayer("https://geoserveis.icgc.cat/servei/catalunya/mapa-base/wmts/topografic/MON3857NW/{z}/{x}/{y}.png",{maxZoom:20,attribution:"&copy;"}),s=L.tileLayer("https://geoserveis.icgc.cat/servei/catalunya/mapa-base/wmts/orto-hibrida/MON3857NW/{z}/{x}/{y}.png",{maxZoom:20});var a=L.tileLayer("https://tms-mapa-raster.ign.es/1.0.0/mapa-raster/{z}/{x}/{-y}.jpeg?layer=MTN&style=default&tilematrixset=GoogleMapsCompatible&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image/jpeg&TileMatrix={z}&TileCol={x}&TileRow={y}",{maxNativeZoom:17,minZoom:1,scheme:"xyz",continuousWorld:!1,attribution:'CC-BY 4.0 <a href="https://www.ign.es" target="_blank">www.ign.es</a>'});const c={OpenStreeMap:i,OpenTopomap:n,"Topografic (ICGC)":u,"Topografico (IGN)":a,"Ortofoto (ICGC)":s},d={"Allaus (ICGC)":r};return bs=L.control.layers(c,d,{collapsed:!1}).addTo(h),bs},mt=Cn.map("map").setView([41.53289317099601,2.104000992549118],4),xs=El(),Ze=Pl(),je=kl(mt);let fe=null,ze={};const Al=Ol(mt),Il=Ml(),Cs=Tl(),sr=h=>{fe&&(mt.removeLayer(fe),je.removeLayer(fe)),h.addTo(mt),fe=h,window.geoJsonLayer=fe,je.addOverlay(fe,"Tracks")},xn=h=>{je.addOverlay(h,h.options.name),ze[h.options.name]=h},Bl=h=>{if(h==="ALL"){const n=Object.values(ze);for(let r of n)je.removeLayer(r),mt.removeLayer(r);ze={};return}const i=ze[h];je.removeLayer(i),mt.removeLayer(i),delete ze[h]};document.addEventListener("mapUpdate",h=>{if(h.detail.qt){let i=Ze.setFromQuadTree(h.detail.qt);sr(i)}if(h.detail.extraLayer&&Ze.setFromExtralayer(h.detail.extraLayer).then(i=>{xn(i)}),h.detail.extraLayers)for(let i of h.detail.extraLayers)Ze.setFromExtralayer(i).then(n=>{xn(n)});h.detail.removedLayerName&&Bl(h.detail.removedLayerName)});Promise.all([cl,Cs.load()]).then(([h,i])=>{const n={qt:i,fileLoadedCache:Il,qtStorage:Cs,layers:xs};gh(mt,et),sh(mt,Al,et,n),ah(mt,n,et),lh(mt,n,et),fh(mt,n,et),mh(mt,n,et);const r=Ze.setFromQuadTree(i);sr(r);for(let u of xs.getAll())Ze.setFromExtralayer(u).then(s=>{xn(s)})}).catch(h=>{console.error("Error loading dependencies:",h)});navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(h){const i=new Cn.LatLng(h.coords.latitude,h.coords.longitude);mt.panTo(i)});const Rl=new Ga({provider:new Wa,style:"bar",showMarker:!1});mt.addControl(Rl);window.i18next=et;window.map=mt;export{zl as c,ka as g};
